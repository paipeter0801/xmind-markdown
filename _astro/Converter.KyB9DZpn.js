import{s as se,c as K,a as qe}from"./utils.CtZ2nkZ-.js";import{h as Q,s as he,g as ge,c as be,a as we,b as Ge,d as i,r as Ke,H as Ze,e as Ae,f as xe,i as re,C as Ie,j as Je,k as Le,l as Qe,m as ye,n as $e,o as et,p as tt,E as at,q as Pe,t as rt,u as st,v as nt,w as lt,x as Fe,y as $,z as Re,A as He,I as ke,B as it,D as ot,F as dt,G as je,J as W,K as ct,L as vt,M as ut,N as ft,O as Se,P as ht,Q as gt,R as mt,S as pt,T as bt,U as xt,V as kt,W as _t,X as Ne,Y as le,Z as _,_ as z,$ as b,a0 as Ce,a1 as fe,a2 as Me,a3 as T,a4 as ie,a5 as G,a6 as X,a7 as j,a8 as E,a9 as Oe,aa as Ee,ab as ne,ac as ve}from"./utils.BZGW3RSc.js";import{s as U}from"./render.BXKHRkUz.js";import{p as O,s as me,a as wt,i as N,r as yt,b as Ct}from"./props.Cv-ckuSl.js";import{s as Ve}from"./snippet.Y4IIRdzT.js";import"./branches.C6pMJEjR.js";function Mt(t,e){return e}function Et(t,e,r){for(var v=[],h=e.length,l,g=e.length,a=0;a<h;a++){let x=e[a];He(x,()=>{if(l){if(l.pending.delete(x),l.done.add(x),l.pending.size===0){var m=t.outrogroups;Te(Fe(l.done)),m.delete(l),m.size===0&&(t.outrogroups=null)}}else g-=1},!1)}if(g===0){var d=v.length===0&&r!==null;if(d){var n=r,o=n.parentNode;ot(o),o.append(n),t.items.clear()}Te(e,!d)}else l={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(l)}function Te(t,e=!0){for(var r=0;r<t.length;r++)dt(t[r],e)}var Be;function Tt(t,e,r,v,h,l=null){var g=t,a=new Map;{var d=t;g=Q?he(ge(d)):d.appendChild(be())}Q&&we();var n=null,o=tt(()=>{var C=r();return lt(C)?C:C==null?[]:Fe(C)}),x,m=!0;function I(){k.fallback=n,zt(k,x,g,e,v),n!==null&&(x.length===0?(n.f&$)===0?Re(n):(n.f^=$,ce(n,null,g)):He(n,()=>{n=null}))}var s=Ge(()=>{x=i(o);var C=x.length;let R=!1;if(Q){var L=Ke(g)===Ze;L!==(C===0)&&(g=Ae(),he(g),xe(!1),R=!0)}for(var H=new Set,F=Qe,S=et(),P=0;P<C;P+=1){Q&&re.nodeType===Ie&&re.data===Je&&(g=re,R=!0,xe(!1));var c=x[P],w=v(c,P),M=m?null:a.get(w);M?(M.v&&Le(M.v,c),M.i&&Le(M.i,P),S&&F.unskip_effect(M.e)):(M=Ft(a,m?g:Be??=be(),c,w,P,h,e,r),m||(M.e.f|=$),a.set(w,M)),H.add(w)}if(C===0&&l&&!n&&(m?n=ye(()=>l(g)):(n=ye(()=>l(Be??=be())),n.f|=$)),C>H.size&&$e(),Q&&C>0&&he(Ae()),!m)if(S){for(const[Z,u]of a)H.has(Z)||F.skip_effect(u.e);F.oncommit(I),F.ondiscard(()=>{})}else I();R&&xe(!0),i(o)}),k={effect:s,items:a,outrogroups:null,fallback:n};m=!1,Q&&(g=re)}function de(t){for(;t!==null&&(t.f&it)===0;)t=t.next;return t}function zt(t,e,r,v,h){var l=e.length,g=t.items,a=de(t.effect.first),d,n=null,o=[],x=[],m,I,s,k;for(k=0;k<l;k+=1){if(m=e[k],I=h(m,k),s=g.get(I).e,t.outrogroups!==null)for(const w of t.outrogroups)w.pending.delete(s),w.done.delete(s);if((s.f&$)!==0)if(s.f^=$,s===a)ce(s,null,r);else{var C=n?n.next:a;s===t.effect.last&&(t.effect.last=s.prev),s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),J(t,n,s),J(t,s,C),ce(s,C,r),n=s,o=[],x=[],a=de(n.next);continue}if((s.f&ke)!==0&&Re(s),s!==a){if(d!==void 0&&d.has(s)){if(o.length<x.length){var R=x[0],L;n=R.prev;var H=o[0],F=o[o.length-1];for(L=0;L<o.length;L+=1)ce(o[L],R,r);for(L=0;L<x.length;L+=1)d.delete(x[L]);J(t,H.prev,F.next),J(t,n,H),J(t,F,R),a=R,n=F,k-=1,o=[],x=[]}else d.delete(s),ce(s,a,r),J(t,s.prev,s.next),J(t,s,n===null?t.effect.first:n.next),J(t,n,s),n=s;continue}for(o=[],x=[];a!==null&&a!==s;)(d??=new Set).add(a),x.push(a),a=de(a.next);if(a===null)continue}(s.f&$)===0&&o.push(s),n=s,a=de(s.next)}if(t.outrogroups!==null){for(const w of t.outrogroups)w.pending.size===0&&(Te(Fe(w.done)),t.outrogroups?.delete(w));t.outrogroups.size===0&&(t.outrogroups=null)}if(a!==null||d!==void 0){var S=[];if(d!==void 0)for(s of d)(s.f&ke)===0&&S.push(s);for(;a!==null;)(a.f&ke)===0&&a!==t.fallback&&S.push(a),a=de(a.next);var P=S.length;if(P>0){var c=l===0?r:null;Et(t,S,c)}}}function Ft(t,e,r,v,h,l,g,a){var d=(g&rt)!==0?(g&st)===0?nt(r,!1,!1):Pe(r):null,n=(g&at)!==0?Pe(h):null;return{v:d,i:n,e:ye(()=>(l(e,d??r,n??h,a),()=>{t.delete(v)}))}}function ce(t,e,r){if(t.nodes)for(var v=t.nodes.start,h=t.nodes.end,l=e&&(e.f&$)===0?e.nodes.start:r;v!==null;){var g=je(v);if(l.before(v),v===h)return;v=g}}function J(t,e,r){e===null?t.effect.first=r:e.next=r,r===null?t.effect.last=e:r.prev=e}function At(t,e,r=!1,v=!1,h=!1){var l=t,g="";W(()=>{var a=ct;if(g===(g=e()??"")){Q&&we();return}if(a.nodes!==null&&(vt(a.nodes.start,a.nodes.end),a.nodes=null),g!==""){if(Q){re.data;for(var d=we(),n=d;d!==null&&(d.nodeType!==Ie||d.data!=="");)n=d,d=je(d);if(d===null)throw ut(),ft;Se(re,n),l=he(d);return}var o=r?gt:v?mt:void 0,x=ht(r?"svg":v?"math":"template",o);x.innerHTML=g;var m=r||v?x:x.content;if(Se(ge(m),m.lastChild),r||v)for(;ge(m);)l.before(ge(m));else l.before(m)}})}function De(t,e){return t===e||t?.[_t]===e}function Lt(t={},e,r,v){return pt(()=>{var h,l;return bt(()=>{h=l,l=[],xt(()=>{t!==r(...l)&&(e(t,...l),h&&De(r(...h),t)&&e(null,...h))})}),()=>{kt(()=>{l&&De(r(...l),t)&&e(null,...l)})}}),t}var Pt=j('<div role="button" tabindex="0" aria-label="Drop zone for file upload"><div class="flex flex-col items-center gap-4"><div><svg class="w-8 h-8 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div> <div><p class="text-lg font-medium text-slate-700 dark:text-slate-300"> </p> <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">or click to browse</p></div> <input type="file" class="hidden"/></div></div>');function St(t,e){le(e,!0);let r=O(e,"accept",3,".xmind"),v=O(e,"multiple",3,!1),h=O(e,"disabled",3,!1),l=G(!1),g=G(void 0);const a="border-2 border-dashed rounded-xl p-12 text-center transition-all cursor-pointer",d=X(()=>K(a,h()?"border-slate-200 dark:border-slate-700 opacity-50 cursor-not-allowed":"hover:border-primary-500 dark:hover:border-primary-500",i(l)&&!h()?"border-primary-500 dark:border-primary-500 bg-primary-50 dark:bg-primary-900/20 scale-[1.02]":"border-slate-300 dark:border-slate-600",e.class));function n(c){c.preventDefault(),h()||E(l,!0)}function o(c){c.preventDefault(),h()||E(l,!1)}function x(c){c.preventDefault(),h()||E(l,!0)}function m(c){if(c.preventDefault(),E(l,!1),h())return;const w=Array.from(c.dataTransfer?.files||[]);w.length>0&&e.onFileSelect(v()?w:[w[0]])}function I(){h()||i(g)?.click()}function s(c){const w=c.target,M=Array.from(w.files||[]);M.length>0&&e.onFileSelect(v()?M:[M[0]]),w.value=""}var k=Pt(),C=_(k),R=_(C);let L;var H=z(R,2),F=_(H),S=_(F,!0);b(F),Ce(2),b(H);var P=z(H,2);Lt(P,c=>E(g,c),()=>i(g)),b(C),b(k),W(()=>{se(k,1,i(d)),L=se(R,1,"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center transition-transform",null,L,{"scale-110":i(l)}),U(S,i(l)?"Drop your file here":"Drop your XMind file here"),me(P,"accept",r()),P.multiple=v(),P.disabled=h()}),fe("dragenter",k,n),fe("dragleave",k,o),fe("dragover",k,x),fe("drop",k,m),Me("click",k,I),Me("change",P,s),T(t,k),ie()}Ne(["click","change"]);var Bt=j("<div><!></div>");function ze(t,e){le(e,!0);let r=O(e,"variant",3,"default"),v=O(e,"padding",3,"md");const h="rounded-xl transition-all",l=X(()=>K(h,r()==="default"&&"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-lg",r()==="bordered"&&"bg-white dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600",r()==="elevated"&&"bg-white dark:bg-slate-800 shadow-xl border border-slate-200 dark:border-slate-700",r()==="flat"&&"bg-transparent dark:bg-transparent border-0 shadow-none")),g=X(()=>K(v()==="none"&&"p-0",v()==="sm"&&"p-4",v()==="md"&&"p-6",v()==="lg"&&"p-8"));var a=Bt(),d=_(a);Ve(d,()=>e.children??Oe),b(a),W(()=>se(a,1,`${i(l)??""} ${i(g)??""} ${e.class??""}`)),T(t,a),ie()}var Dt=ve('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),It=j("<button><!> <!></button>");function _e(t,e){le(e,!0);let r=O(e,"variant",3,"primary"),v=O(e,"size",3,"md"),h=O(e,"isLoading",3,!1),l=yt(e,["$$slots","$$events","$$legacy","variant","size","isLoading","class","children","disabled"]);const g="inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",a=X(()=>K(g,r()==="primary"&&"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 shadow-sm",r()==="secondary"&&"bg-slate-200 text-slate-900 dark:bg-slate-700 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600",r()==="outline"&&"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800",r()==="ghost"&&"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",r()==="danger"&&"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-sm",e.class)),d=X(()=>K(v()==="sm"&&"px-3 py-1.5 text-sm",v()==="md"&&"px-4 py-2 text-base",v()==="lg"&&"px-6 py-3 text-lg")),n=X(()=>e.disabled||h());var o=It();wt(o,()=>({class:`${i(a)??""} ${i(d)??""}`,disabled:i(n),...l}));var x=_(o);{var m=k=>{var C=Dt();T(k,C)};N(x,k=>{h()&&k(m)})}var I=z(x,2);{var s=k=>{var C=Ee(),R=ne(C);Ve(R,()=>e.children??Oe),T(k,C)};N(I,k=>{h()||k(s)})}b(o),T(t,o),ie()}var Rt=ve('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg> Stats',1),Ht=ve('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),jt=ve('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>'),Nt=ve('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Export .md',1),Ot=j('<div class="text-center"><div class="text-2xl mb-1"> </div> <div class="text-lg font-semibold text-slate-900 dark:text-slate-100"> </div> <div class="text-xs text-slate-500 dark:text-slate-400"> </div></div>'),Vt=j('<div class="mb-4 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 animate-slide-down"><div class="grid grid-cols-2 sm:grid-cols-4 gap-4"></div> <div class="mt-3 pt-3 border-t border-slate-200 dark:border-slate-700 text-center"><p class="text-sm text-slate-600 dark:text-slate-400">Source: <span class="font-medium"> </span></p></div></div>'),Xt=j('<div class="flex items-center justify-center h-64"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"></div> <p class="text-slate-600 dark:text-slate-400">Converting your XMind file...</p></div></div>'),Ut=j('<div class="flex items-center justify-center h-64 text-slate-400 dark:text-slate-600"><div class="text-center"><svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p>Upload an XMind file to see the preview</p></div></div>'),Wt=j('<div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-semibold flex items-center gap-2 text-slate-900 dark:text-slate-100"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Markdown Preview</h2> <div class="flex items-center gap-2"><!> <!> <!></div></div> <!> <div class="prose dark:prose-invert max-w-none min-h-[400px] p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-auto"><!></div>',1);function Yt(t,e){le(e,!0);let r=O(e,"isLoading",3,!1),v=G(!1),h=G(!1);async function l(){e.onCopy&&(await e.onCopy(),E(h,!0),setTimeout(()=>{E(h,!1)},2e3))}const g=X(()=>[{label:"Topics",value:e.stats.totalTopics,icon:"ðŸ“"},{label:"Max Depth",value:e.stats.maxDepthReached,icon:"ðŸ“Š"},{label:"Root Topics",value:e.stats.rootTopics,icon:"ðŸŒ³"},{label:"Processing Time",value:`${e.stats.processingTime}ms`,icon:"â±ï¸"},{label:"Markers",value:e.stats.markersProcessed,icon:"ðŸ·ï¸"},{label:"Attachments",value:e.stats.attachmentsProcessed,icon:"ðŸ“Ž"},{label:"Links",value:e.stats.linksProcessed,icon:"ðŸ”—"},{label:"Images",value:e.stats.imagesProcessed,icon:"ðŸ–¼ï¸"}]);{let a=X(()=>K("flex flex-col",e.class));ze(t,{variant:"default",get class(){return i(a)},children:(d,n)=>{var o=Wt(),x=ne(o),m=z(_(x),2),I=_(m);_e(I,{variant:"outline",size:"sm",onclick:()=>E(v,!i(v)),"aria-label":"Toggle statistics",children:(c,w)=>{var M=Rt();Ce(),T(c,M)},$$slots:{default:!0}});var s=z(I,2);_e(s,{variant:"outline",size:"sm",onclick:l,get disabled(){return r()},children:(c,w)=>{var M=Ee(),Z=ne(M);{var u=p=>{var f=Ht();T(p,f)},y=p=>{var f=jt();T(p,f)};N(Z,p=>{i(h)?p(u):p(y,!1)})}T(c,M)},$$slots:{default:!0}});var k=z(s,2);_e(k,{variant:"primary",size:"sm",get onclick(){return e.onExport},get disabled(){return r()},children:(c,w)=>{var M=Nt();Ce(),T(c,M)},$$slots:{default:!0}}),b(m),b(x);var C=z(x,2);{var R=c=>{var w=Vt(),M=_(w);Tt(M,21,()=>i(g),Mt,(f,B)=>{var A=Ot(),D=_(A),Y=_(D,!0);b(D);var ee=z(D,2),ae=_(ee,!0);b(ee);var te=z(ee,2),V=_(te,!0);b(te),b(A),W(()=>{U(Y,i(B).icon),U(ae,i(B).value),U(V,i(B).label)}),T(f,A)}),b(M);var Z=z(M,2),u=_(Z),y=z(_(u)),p=_(y,!0);b(y),b(u),b(Z),b(w),W(()=>U(p,e.sourceFile)),T(c,w)};N(C,c=>{i(v)&&c(R)})}var L=z(C,2),H=_(L);{var F=c=>{var w=Xt();T(c,w)},S=c=>{var w=Ee(),M=ne(w);At(M,()=>e.content),T(c,w)},P=c=>{var w=Ut();T(c,w)};N(H,c=>{r()?c(F):e.content?c(S,1):c(P,!1)})}b(L),T(d,o)},$$slots:{default:!0}})}ie()}var qt=j('<span class="text-sm font-medium text-slate-700 dark:text-slate-300"> </span>'),Gt=j('<span class="text-sm text-slate-600 dark:text-slate-400"> </span>'),Kt=j('<div class="flex items-center justify-between mb-2"><!> <!></div>'),Zt=j('<div><!> <div><div role="progressbar"></div></div></div>');function Jt(t,e){le(e,!0);let r=O(e,"max",3,100),v=O(e,"showPercentage",3,!0),h=O(e,"size",3,"md"),l=O(e,"variant",3,"default");const g=X(()=>Math.min(Math.max(e.progress/r()*100,0),100)),a=X(()=>K(h()==="sm"&&"h-1.5",h()==="md"&&"h-2.5",h()==="lg"&&"h-4")),d=X(()=>K("rounded-full transition-all duration-300 ease-out",l()==="default"&&"bg-primary-500",l()==="success"&&"bg-green-500",l()==="warning"&&"bg-yellow-500",l()==="error"&&"bg-red-500"));var n=Zt(),o=_(n);{var x=s=>{var k=Kt(),C=_(k);{var R=F=>{var S=qt(),P=_(S,!0);b(S),W(()=>U(P,e.label)),T(F,S)};N(C,F=>{e.label&&F(R)})}var L=z(C,2);{var H=F=>{var S=Gt(),P=_(S);b(S),W(c=>U(P,`${c??""}%`),[()=>Math.round(i(g))]),T(F,S)};N(L,F=>{v()&&F(H)})}b(k),T(s,k)};N(o,s=>{(e.label||v())&&s(x)})}var m=z(o,2),I=_(m);me(I,"aria-valuemin",0),b(m),b(n),W(s=>{se(n,1,s),se(m,1,`w-full bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden ${i(a)??""}`),se(I,1,`${i(d)??""} ${i(a)??""}`),Ct(I,`width: ${i(g)??""}%`),me(I,"aria-valuenow",e.progress),me(I,"aria-valuemax",r())},[()=>qe(K("w-full",e.class))]),T(t,n),ie()}var Qt=j('<h2 class="text-2xl font-semibold mb-4 flex items-center gap-2 text-slate-900 dark:text-slate-100"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> Upload XMind File</h2> <!>',1),$t=j('<div class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-primary-500"></div> Converting...</div>'),ea=j('<div class="mt-4"><!></div>'),ta=j('<div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><p class="font-medium text-slate-900 dark:text-slate-100"> </p> <p class="text-sm text-slate-500 dark:text-slate-400"> </p></div></div> <div class="flex items-center gap-2"><!> <button class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-500 dark:text-slate-400" aria-label="Clear file"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <!>',1),aa=j('<div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-red-500 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div><p class="font-medium text-red-800 dark:text-red-200">Conversion Error</p> <p class="text-sm text-red-600 dark:text-red-400 mt-1"> </p></div></div></div>'),ra=j('<div class="space-y-6"><section><!></section> <!> <!></div>');function ca(t,e){le(e,!0);function r(u){console.log("[markdownToHtml] Input:",u.substring(0,200));const y=u.split(`
`),p=[],f=[];let B=!1;function A(){for(;f.length>0;)f[f.length-1].hasItem&&p.push("</li>"),f.pop(),p.push("</ul>")}for(const D of y){if(D.includes("<!--")){A(),p.push(D),B=!0;continue}if(D.includes("-->")){p.push(D),B=!1;continue}if(B){p.push(D);continue}if(D.startsWith("# ")){A(),p.push(`<h1>${D.slice(2)}</h1>`);continue}if(D.startsWith("## ")){A(),p.push(`<h2>${D.slice(3)}</h2>`);continue}if(D.startsWith("### ")){A(),p.push(`<h3>${D.slice(4)}</h3>`);continue}const Y=D.match(/^(\s*)-\s+(.*)$/);if(Y){const ae=Y[1],te=Y[2],V=Math.floor(ae.length/2);for(console.log(`[markdownToHtml] List item: depth=${V}, content="${te}"`);f.length>0&&f[f.length-1].depth>V;)f[f.length-1].hasItem&&p.push("</li>"),f.pop(),p.push("</ul>");if(f.length===0||f[f.length-1].depth<V){const pe=V===0?"ml-4 mt-1":`ml-${Math.min(4+V*2,12)} mt-1`;p.push(`<ul class="list-disc ${pe}">`),f.push({depth:V,hasItem:!1})}else f[f.length-1].depth===V&&f[f.length-1].hasItem&&p.push("</li>");const ue=v(te);p.push(`<li>${ue}`),f[f.length-1].hasItem=!0;continue}if(D.trim()===""){A(),p.push("<br />");continue}A();const ee=v(D);p.push(`<p>${ee}</p>`)}return A(),p.join(`
`)}function v(u){return u.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>").replace(/\*(.+?)\*/g,"<em>$1</em>").replace(/`(.+?)`/g,"<code>$1</code>").replace(/\[(.+?)\]\((.+?)\)/g,'<a href="$2">$1</a>')}function h(u,y,p){const f=new Blob([u],{type:p}),B=URL.createObjectURL(f),A=document.createElement("a");A.href=B,A.download=y,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(B)}async function l(u){try{return await navigator.clipboard.writeText(u),!0}catch{const y=document.createElement("textarea");y.value=u,y.style.position="fixed",y.style.left="-999999px",document.body.appendChild(y),y.select();try{return document.execCommand("copy"),document.body.removeChild(y),!0}catch{return document.body.removeChild(y),!1}}}function g(u){return u.replace(/\.[^/.]+$/,"")}let a=G(null),d=G(!1),n=G(0),o=G(null),x=X(()=>i(o)&&i(o).success&&i(o).content?r(i(o).content):""),m=G(null);async function I(u){if(u.length===0)return;const y=u[0];if(!y.name.endsWith(".xmind")){E(m,"Please select a valid XMind file (.xmind)");return}E(a,y,!0),E(m,null),await s(y)}async function s(u){E(d,!0),E(n,0),E(o,null),e.onConversionStart?.();try{const y=globalThis.XmindConverter;if(!y?.convertXmindToMarkdown)throw new Error("Converter not loaded. Please refresh the page.");E(n,10);const p=await u.arrayBuffer();E(n,30);const f=await y.convertXmindToMarkdown(p,u.name,{outputFormat:"markdown",includeMetadata:!0,includeIds:!1,includeTimestamps:!1,skipEmpty:!0,preserveFormatting:!0});E(n,90),await new Promise(B=>setTimeout(B,200)),E(n,100),E(o,f,!0),f.success?e.onConversionComplete?.(f):(E(m,f.error||"Failed to convert XMind file",!0),e.onError?.(i(m)))}catch(y){const p=y instanceof Error?y.message:"Failed to convert file";E(m,p,!0),e.onError?.(p)}finally{E(d,!1)}}function k(){if(i(o)&&i(a)){const u=`${g(i(a).name)}.md`;h(i(o).content,u,"text/markdown")}}async function C(){i(o)&&(await l(i(o).content)||E(m,"Failed to copy to clipboard"))}function R(){E(a,null),E(o,null),E(m,null),E(n,0)}var L=ra(),H=_(L),F=_(H);{var S=u=>{ze(u,{children:(y,p)=>{var f=Qt(),B=z(ne(f),2);St(B,{onFileSelect:I}),T(y,f)},$$slots:{default:!0}})},P=u=>{ze(u,{children:(y,p)=>{var f=ta(),B=ne(f),A=_(B),D=z(_(A),2),Y=_(D),ee=_(Y,!0);b(Y);var ae=z(Y,2),te=_(ae);b(ae),b(D),b(A);var V=z(A,2),ue=_(V);{var pe=q=>{var oe=$t();T(q,oe)};N(ue,q=>{i(d)&&q(pe)})}var Xe=z(ue,2);b(V),b(B);var Ue=z(B,2);{var We=q=>{var oe=ea(),Ye=_(oe);Jt(Ye,{get progress(){return i(n)},label:"Converting..."}),b(oe),T(q,oe)};N(Ue,q=>{i(d)&&q(We)})}W(q=>{U(ee,i(a).name),U(te,`${q??""} KB`)},[()=>(i(a).size/1024).toFixed(2)]),Me("click",Xe,R),T(y,f)},$$slots:{default:!0}})};N(F,u=>{i(a)?u(P,!1):u(S)})}b(H);var c=z(H,2);{var w=u=>{var y=aa(),p=_(y),f=z(_(p),2),B=z(_(f),2),A=_(B,!0);b(B),b(f),b(p),b(y),W(()=>U(A,i(m))),T(u,y)};N(c,u=>{i(m)&&u(w)})}var M=z(c,2);{var Z=u=>{Yt(u,{get content(){return i(x)},get stats(){return i(o).stats},get sourceFile(){return i(o).metadata.sourceFile},get isLoading(){return i(d)},onExport:k,onCopy:C})};N(M,u=>{i(o)&&u(Z)})}b(L),T(t,L),ie()}Ne(["click"]);export{ca as default};
