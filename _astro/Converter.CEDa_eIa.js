import{s as ee,c as Y,a as Ye}from"./utils.BYruac-D.js";import{h as K,s as ce,g as ue,c as me,a as ke,b as Ge,d as i,r as Ke,H as We,e as ze,f as pe,i as $,C as Se,j as Ze,k as Fe,l as Je,m as _e,n as Qe,o as $e,p as ea,E as aa,q as Ae,t as ra,u as ta,v as sa,w as la,x as Te,y as W,z as Le,A as Re,I as be,B as na,D as ia,F as oa,G as He,J as X,K as da,L as va,M as ca,N as ua,O as Pe,P as fa,Q as ga,R as ha,S as ma,T as pa,U as ba,V as xa,W as ka,X as je,Y as re,Z as p,_ as T,$ as h,a0 as we,a1 as ve,a2 as ye,a3 as M,a4 as te,a5 as q,a6 as O,a7 as L,a8 as C,a9 as Ie,aa as Ce,ab as ae,ac as oe}from"./utils.PJwVcRqf.js";import{s as V}from"./render.Bd7dY8qx.js";import{p as N,s as fe,a as _a,i as I,r as wa,b as ya}from"./props.DmToVuwK.js";import{s as Ne}from"./snippet.D6VF0mp1.js";import"./branches.54bsqzi5.js";function Ca(a,e){return e}function Ma(a,e,s){for(var u=[],f=e.length,n,o=e.length,t=0;t<f;t++){let v=e[t];Re(v,()=>{if(n){if(n.pending.delete(v),n.done.add(v),n.pending.size===0){var _=a.outrogroups;Me(Te(n.done)),_.delete(n),_.size===0&&(a.outrogroups=null)}}else o-=1},!1)}if(o===0){var d=u.length===0&&s!==null;if(d){var r=s,k=r.parentNode;ia(k),k.append(r),a.items.clear()}Me(e,!d)}else n={pending:new Set(e),done:new Set},(a.outrogroups??=new Set).add(n)}function Me(a,e=!0){for(var s=0;s<a.length;s++)oa(a[s],e)}var Be;function Ea(a,e,s,u,f,n=null){var o=a,t=new Map;{var d=a;o=K?ce(ue(d)):d.appendChild(me())}K&&ke();var r=null,k=ea(()=>{var w=s();return la(w)?w:w==null?[]:Te(w)}),v,_=!0;function D(){m.fallback=r,Ta(m,v,o,e,u),r!==null&&(v.length===0?(r.f&W)===0?Le(r):(r.f^=W,ie(r,null,o)):Re(r,()=>{r=null}))}var l=Ge(()=>{v=i(k);var w=v.length;let P=!1;if(K){var A=Ke(o)===We;A!==(w===0)&&(o=ze(),ce(o),pe(!1),P=!0)}for(var R=new Set,z=Je,B=$e(),F=0;F<w;F+=1){K&&$.nodeType===Se&&$.data===Ze&&(o=$,P=!0,pe(!1));var c=v[F],b=u(c,F),y=_?null:t.get(b);y?(y.v&&Fe(y.v,c),y.i&&Fe(y.i,F),B&&z.unskip_effect(y.e)):(y=za(t,_?o:Be??=me(),c,b,F,f,e,s),_||(y.e.f|=W),t.set(b,y)),R.add(b)}if(w===0&&n&&!r&&(_?r=_e(()=>n(o)):(r=_e(()=>n(Be??=me())),r.f|=W)),w>R.size&&Qe(),K&&w>0&&ce(ze()),!_)if(B){for(const[g,x]of t)R.has(g)||z.skip_effect(x.e);z.oncommit(D),z.ondiscard(()=>{})}else D();P&&pe(!0),i(k)}),m={effect:l,items:t,outrogroups:null,fallback:r};_=!1,K&&(o=$)}function ne(a){for(;a!==null&&(a.f&na)===0;)a=a.next;return a}function Ta(a,e,s,u,f){var n=e.length,o=a.items,t=ne(a.effect.first),d,r=null,k=[],v=[],_,D,l,m;for(m=0;m<n;m+=1){if(_=e[m],D=f(_,m),l=o.get(D).e,a.outrogroups!==null)for(const b of a.outrogroups)b.pending.delete(l),b.done.delete(l);if((l.f&W)!==0)if(l.f^=W,l===t)ie(l,null,s);else{var w=r?r.next:t;l===a.effect.last&&(a.effect.last=l.prev),l.prev&&(l.prev.next=l.next),l.next&&(l.next.prev=l.prev),G(a,r,l),G(a,l,w),ie(l,w,s),r=l,k=[],v=[],t=ne(r.next);continue}if((l.f&be)!==0&&Le(l),l!==t){if(d!==void 0&&d.has(l)){if(k.length<v.length){var P=v[0],A;r=P.prev;var R=k[0],z=k[k.length-1];for(A=0;A<k.length;A+=1)ie(k[A],P,s);for(A=0;A<v.length;A+=1)d.delete(v[A]);G(a,R.prev,z.next),G(a,r,R),G(a,z,P),t=P,r=z,m-=1,k=[],v=[]}else d.delete(l),ie(l,t,s),G(a,l.prev,l.next),G(a,l,r===null?a.effect.first:r.next),G(a,r,l),r=l;continue}for(k=[],v=[];t!==null&&t!==l;)(d??=new Set).add(t),v.push(t),t=ne(t.next);if(t===null)continue}(l.f&W)===0&&k.push(l),r=l,t=ne(l.next)}if(a.outrogroups!==null){for(const b of a.outrogroups)b.pending.size===0&&(Me(Te(b.done)),a.outrogroups?.delete(b));a.outrogroups.size===0&&(a.outrogroups=null)}if(t!==null||d!==void 0){var B=[];if(d!==void 0)for(l of d)(l.f&be)===0&&B.push(l);for(;t!==null;)(t.f&be)===0&&t!==a.fallback&&B.push(t),t=ne(t.next);var F=B.length;if(F>0){var c=n===0?s:null;Ma(a,B,c)}}}function za(a,e,s,u,f,n,o,t){var d=(o&ra)!==0?(o&ta)===0?sa(s,!1,!1):Ae(s):null,r=(o&aa)!==0?Ae(f):null;return{v:d,i:r,e:_e(()=>(n(e,d??s,r??f,t),()=>{a.delete(u)}))}}function ie(a,e,s){if(a.nodes)for(var u=a.nodes.start,f=a.nodes.end,n=e&&(e.f&W)===0?e.nodes.start:s;u!==null;){var o=He(u);if(n.before(u),u===f)return;u=o}}function G(a,e,s){e===null?a.effect.first=s:e.next=s,s===null?a.effect.last=e:s.prev=e}function Fa(a,e,s=!1,u=!1,f=!1){var n=a,o="";X(()=>{var t=da;if(o===(o=e()??"")){K&&ke();return}if(t.nodes!==null&&(va(t.nodes.start,t.nodes.end),t.nodes=null),o!==""){if(K){$.data;for(var d=ke(),r=d;d!==null&&(d.nodeType!==Se||d.data!=="");)r=d,d=He(d);if(d===null)throw ca(),ua;Pe($,r),n=ce(d);return}var k=s?ga:u?ha:void 0,v=fa(s?"svg":u?"math":"template",k);v.innerHTML=o;var _=s||u?v:v.content;if(Pe(ue(_),_.lastChild),s||u)for(;ue(_);)n.before(ue(_));else n.before(_)}})}function De(a,e){return a===e||a?.[ka]===e}function Aa(a={},e,s,u){return ma(()=>{var f,n;return pa(()=>{f=n,n=[],ba(()=>{a!==s(...n)&&(e(a,...n),f&&De(s(...f),a)&&e(null,...f))})}),()=>{xa(()=>{n&&De(s(...n),a)&&e(null,...n)})}}),a}var Pa=L('<div role="button" tabindex="0" aria-label="Drop zone for file upload"><div class="flex flex-col items-center gap-4"><div><svg class="w-8 h-8 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div> <div><p class="text-lg font-medium text-slate-700 dark:text-slate-300"> </p> <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">or click to browse</p></div> <input type="file" class="hidden"/></div></div>');function Ba(a,e){re(e,!0);let s=N(e,"accept",3,".xmind"),u=N(e,"multiple",3,!1),f=N(e,"disabled",3,!1),n=q(!1),o=q(void 0);const t="border-2 border-dashed rounded-xl p-12 text-center transition-all cursor-pointer",d=O(()=>Y(t,f()?"border-slate-200 dark:border-slate-700 opacity-50 cursor-not-allowed":"hover:border-primary-500 dark:hover:border-primary-500",i(n)&&!f()?"border-primary-500 dark:border-primary-500 bg-primary-50 dark:bg-primary-900/20 scale-[1.02]":"border-slate-300 dark:border-slate-600",e.class));function r(c){c.preventDefault(),f()||C(n,!0)}function k(c){c.preventDefault(),f()||C(n,!1)}function v(c){c.preventDefault(),f()||C(n,!0)}function _(c){if(c.preventDefault(),C(n,!1),f())return;const b=Array.from(c.dataTransfer?.files||[]);b.length>0&&e.onFileSelect(u()?b:[b[0]])}function D(){f()||i(o)?.click()}function l(c){const b=c.target,y=Array.from(b.files||[]);y.length>0&&e.onFileSelect(u()?y:[y[0]]),b.value=""}var m=Pa(),w=p(m),P=p(w);let A;var R=T(P,2),z=p(R),B=p(z,!0);h(z),we(2),h(R);var F=T(R,2);Aa(F,c=>C(o,c),()=>i(o)),h(w),h(m),X(()=>{ee(m,1,i(d)),A=ee(P,1,"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center transition-transform",null,A,{"scale-110":i(n)}),V(B,i(n)?"Drop your file here":"Drop your XMind file here"),fe(F,"accept",s()),F.multiple=u(),F.disabled=f()}),ve("dragenter",m,r),ve("dragleave",m,k),ve("dragover",m,v),ve("drop",m,_),ye("click",m,D),ye("change",F,l),M(a,m),te()}je(["click","change"]);var Da=L("<div><!></div>");function Ee(a,e){re(e,!0);let s=N(e,"variant",3,"default"),u=N(e,"padding",3,"md");const f="rounded-xl transition-all",n=O(()=>Y(f,s()==="default"&&"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-lg",s()==="bordered"&&"bg-white dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600",s()==="elevated"&&"bg-white dark:bg-slate-800 shadow-xl border border-slate-200 dark:border-slate-700",s()==="flat"&&"bg-transparent dark:bg-transparent border-0 shadow-none")),o=O(()=>Y(u()==="none"&&"p-0",u()==="sm"&&"p-4",u()==="md"&&"p-6",u()==="lg"&&"p-8"));var t=Da(),d=p(t);Ne(d,()=>e.children??Ie),h(t),X(()=>ee(t,1,`${i(n)??""} ${i(o)??""} ${e.class??""}`)),M(a,t),te()}var Sa=oe('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),La=L("<button><!> <!></button>");function xe(a,e){re(e,!0);let s=N(e,"variant",3,"primary"),u=N(e,"size",3,"md"),f=N(e,"isLoading",3,!1),n=wa(e,["$$slots","$$events","$$legacy","variant","size","isLoading","class","children","disabled"]);const o="inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",t=O(()=>Y(o,s()==="primary"&&"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 shadow-sm",s()==="secondary"&&"bg-slate-200 text-slate-900 dark:bg-slate-700 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600",s()==="outline"&&"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800",s()==="ghost"&&"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",s()==="danger"&&"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-sm",e.class)),d=O(()=>Y(u()==="sm"&&"px-3 py-1.5 text-sm",u()==="md"&&"px-4 py-2 text-base",u()==="lg"&&"px-6 py-3 text-lg")),r=O(()=>e.disabled||f());var k=La();_a(k,()=>({class:`${i(t)??""} ${i(d)??""}`,disabled:i(r),...n}));var v=p(k);{var _=m=>{var w=Sa();M(m,w)};I(v,m=>{f()&&m(_)})}var D=T(v,2);{var l=m=>{var w=Ce(),P=ae(w);Ne(P,()=>e.children??Ie),M(m,w)};I(D,m=>{f()||m(l)})}h(k),M(a,k),te()}var Ra=oe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg> Stats',1),Ha=oe('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),ja=oe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>'),Ia=oe('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Export .md',1),Na=L('<div class="text-center"><div class="text-2xl mb-1"> </div> <div class="text-lg font-semibold text-slate-900 dark:text-slate-100"> </div> <div class="text-xs text-slate-500 dark:text-slate-400"> </div></div>'),Oa=L('<div class="mb-4 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 animate-slide-down"><div class="grid grid-cols-2 sm:grid-cols-4 gap-4"></div> <div class="mt-3 pt-3 border-t border-slate-200 dark:border-slate-700 text-center"><p class="text-sm text-slate-600 dark:text-slate-400">Source: <span class="font-medium"> </span></p></div></div>'),Va=L('<div class="flex items-center justify-center h-64"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"></div> <p class="text-slate-600 dark:text-slate-400">Converting your XMind file...</p></div></div>'),Xa=L('<div class="flex items-center justify-center h-64 text-slate-400 dark:text-slate-600"><div class="text-center"><svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p>Upload an XMind file to see the preview</p></div></div>'),Ua=L('<div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-semibold flex items-center gap-2 text-slate-900 dark:text-slate-100"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Markdown Preview</h2> <div class="flex items-center gap-2"><!> <!> <!></div></div> <!> <div class="prose dark:prose-invert max-w-none min-h-[400px] p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-auto"><!></div>',1);function qa(a,e){re(e,!0);let s=N(e,"isLoading",3,!1),u=q(!1),f=q(!1);async function n(){e.onCopy&&(await e.onCopy(),C(f,!0),setTimeout(()=>{C(f,!1)},2e3))}const o=O(()=>[{label:"Topics",value:e.stats.totalTopics,icon:"ðŸ“"},{label:"Max Depth",value:e.stats.maxDepthReached,icon:"ðŸ“Š"},{label:"Root Topics",value:e.stats.rootTopics,icon:"ðŸŒ³"},{label:"Processing Time",value:`${e.stats.processingTime}ms`,icon:"â±ï¸"},{label:"Markers",value:e.stats.markersProcessed,icon:"ðŸ·ï¸"},{label:"Attachments",value:e.stats.attachmentsProcessed,icon:"ðŸ“Ž"},{label:"Links",value:e.stats.linksProcessed,icon:"ðŸ”—"},{label:"Images",value:e.stats.imagesProcessed,icon:"ðŸ–¼ï¸"}]);{let t=O(()=>Y("flex flex-col",e.class));Ee(a,{variant:"default",get class(){return i(t)},children:(d,r)=>{var k=Ua(),v=ae(k),_=T(p(v),2),D=p(_);xe(D,{variant:"outline",size:"sm",onclick:()=>C(u,!i(u)),"aria-label":"Toggle statistics",children:(c,b)=>{var y=Ra();we(),M(c,y)},$$slots:{default:!0}});var l=T(D,2);xe(l,{variant:"outline",size:"sm",onclick:n,get disabled(){return s()},children:(c,b)=>{var y=Ce(),g=ae(y);{var x=E=>{var S=Ha();M(E,S)},H=E=>{var S=ja();M(E,S)};I(g,E=>{i(f)?E(x):E(H,!1)})}M(c,y)},$$slots:{default:!0}});var m=T(l,2);xe(m,{variant:"primary",size:"sm",get onclick(){return e.onExport},get disabled(){return s()},children:(c,b)=>{var y=Ia();we(),M(c,y)},$$slots:{default:!0}}),h(_),h(v);var w=T(v,2);{var P=c=>{var b=Oa(),y=p(b);Ea(y,21,()=>i(o),Ca,(S,j)=>{var J=Na(),Z=p(J),ge=p(Z,!0);h(Z);var Q=T(Z,2),he=p(Q,!0);h(Q);var se=T(Q,2),de=p(se,!0);h(se),h(J),X(()=>{V(ge,i(j).icon),V(he,i(j).value),V(de,i(j).label)}),M(S,J)}),h(y);var g=T(y,2),x=p(g),H=T(p(x)),E=p(H,!0);h(H),h(x),h(g),h(b),X(()=>V(E,e.sourceFile)),M(c,b)};I(w,c=>{i(u)&&c(P)})}var A=T(w,2),R=p(A);{var z=c=>{var b=Va();M(c,b)},B=c=>{var b=Ce(),y=ae(b);Fa(y,()=>e.content),M(c,b)},F=c=>{var b=Xa();M(c,b)};I(R,c=>{s()?c(z):e.content?c(B,1):c(F,!1)})}h(A),M(d,k)},$$slots:{default:!0}})}te()}var Ya=L('<span class="text-sm font-medium text-slate-700 dark:text-slate-300"> </span>'),Ga=L('<span class="text-sm text-slate-600 dark:text-slate-400"> </span>'),Ka=L('<div class="flex items-center justify-between mb-2"><!> <!></div>'),Wa=L('<div><!> <div><div role="progressbar"></div></div></div>');function Za(a,e){re(e,!0);let s=N(e,"max",3,100),u=N(e,"showPercentage",3,!0),f=N(e,"size",3,"md"),n=N(e,"variant",3,"default");const o=O(()=>Math.min(Math.max(e.progress/s()*100,0),100)),t=O(()=>Y(f()==="sm"&&"h-1.5",f()==="md"&&"h-2.5",f()==="lg"&&"h-4")),d=O(()=>Y("rounded-full transition-all duration-300 ease-out",n()==="default"&&"bg-primary-500",n()==="success"&&"bg-green-500",n()==="warning"&&"bg-yellow-500",n()==="error"&&"bg-red-500"));var r=Wa(),k=p(r);{var v=l=>{var m=Ka(),w=p(m);{var P=z=>{var B=Ya(),F=p(B,!0);h(B),X(()=>V(F,e.label)),M(z,B)};I(w,z=>{e.label&&z(P)})}var A=T(w,2);{var R=z=>{var B=Ga(),F=p(B);h(B),X(c=>V(F,`${c??""}%`),[()=>Math.round(i(o))]),M(z,B)};I(A,z=>{u()&&z(R)})}h(m),M(l,m)};I(k,l=>{(e.label||u())&&l(v)})}var _=T(k,2),D=p(_);fe(D,"aria-valuemin",0),h(_),h(r),X(l=>{ee(r,1,l),ee(_,1,`w-full bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden ${i(t)??""}`),ee(D,1,`${i(d)??""} ${i(t)??""}`),ya(D,`width: ${i(o)??""}%`),fe(D,"aria-valuenow",e.progress),fe(D,"aria-valuemax",s())},[()=>Ye(Y("w-full",e.class))]),M(a,r),te()}var Ja=L('<h2 class="text-2xl font-semibold mb-4 flex items-center gap-2 text-slate-900 dark:text-slate-100"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> Upload XMind File</h2> <!>',1),Qa=L('<div class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-primary-500"></div> Converting...</div>'),$a=L('<div class="mt-4"><!></div>'),er=L('<div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><p class="font-medium text-slate-900 dark:text-slate-100"> </p> <p class="text-sm text-slate-500 dark:text-slate-400"> </p></div></div> <div class="flex items-center gap-2"><!> <button class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-500 dark:text-slate-400" aria-label="Clear file"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <!>',1),ar=L('<div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-red-500 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div><p class="font-medium text-red-800 dark:text-red-200">Conversion Error</p> <p class="text-sm text-red-600 dark:text-red-400 mt-1"> </p></div></div></div>'),rr=L('<div class="space-y-6"><section><!></section> <!> <!></div>');function dr(a,e){re(e,!0);function s(g){return g.replace(/^### (.*$)/gim,"<h3>$1</h3>").replace(/^## (.*$)/gim,"<h2>$1</h2>").replace(/^# (.*$)/gim,"<h1>$1</h1>").replace(/\*\*(.*)\*\*/gim,"<strong>$1</strong>").replace(/\*(.*)\*/gim,"<em>$1</em>").replace(/!\[(.*?)\]\((.*?)\)/gim,'<img alt="$1" src="$2" />').replace(/\[(.*?)\]\((.*?)\)/gim,'<a href="$2">$1</a>').replace(/^\> (.*$)/gim,"<blockquote>$1</blockquote>").replace(/`(.*?)`/gim,"<code>$1</code>").replace(/\n/gim,"<br />")}function u(g,x,H){const E=new Blob([g],{type:H}),S=URL.createObjectURL(E),j=document.createElement("a");j.href=S,j.download=x,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(S)}async function f(g){try{return await navigator.clipboard.writeText(g),!0}catch{const x=document.createElement("textarea");x.value=g,x.style.position="fixed",x.style.left="-999999px",document.body.appendChild(x),x.select();try{return document.execCommand("copy"),document.body.removeChild(x),!0}catch{return document.body.removeChild(x),!1}}}function n(g){return g.replace(/\.[^/.]+$/,"")}let o=q(null),t=q(!1),d=q(0),r=q(null),k=O(()=>i(r)&&i(r).success&&i(r).content?s(i(r).content):""),v=q(null);async function _(g){if(g.length===0)return;const x=g[0];if(!x.name.endsWith(".xmind")){C(v,"Please select a valid XMind file (.xmind)");return}C(o,x,!0),C(v,null),await D(x)}async function D(g){C(t,!0),C(d,0),C(r,null),e.onConversionStart?.();try{const x=globalThis.XmindConverter;if(!x?.convertXmindToMarkdown)throw new Error("Converter not loaded. Please refresh the page.");C(d,10);const H=await g.arrayBuffer();C(d,30);const E=await x.convertXmindToMarkdown(H,g.name,{outputFormat:"markdown",includeMetadata:!0,includeIds:!1,includeTimestamps:!1,skipEmpty:!0,preserveFormatting:!0});C(d,90),await new Promise(S=>setTimeout(S,200)),C(d,100),C(r,E,!0),E.success?e.onConversionComplete?.(E):(C(v,E.error||"Failed to convert XMind file",!0),e.onError?.(i(v)))}catch(x){const H=x instanceof Error?x.message:"Failed to convert file";C(v,H,!0),e.onError?.(H)}finally{C(t,!1)}}function l(){if(i(r)&&i(o)){const g=`${n(i(o).name)}.md`;u(i(r).content,g,"text/markdown")}}async function m(){i(r)&&(await f(i(r).content)||C(v,"Failed to copy to clipboard"))}function w(){C(o,null),C(r,null),C(v,null),C(d,0)}var P=rr(),A=p(P),R=p(A);{var z=g=>{Ee(g,{children:(x,H)=>{var E=Ja(),S=T(ae(E),2);Ba(S,{onFileSelect:_}),M(x,E)},$$slots:{default:!0}})},B=g=>{Ee(g,{children:(x,H)=>{var E=er(),S=ae(E),j=p(S),J=T(p(j),2),Z=p(J),ge=p(Z,!0);h(Z);var Q=T(Z,2),he=p(Q);h(Q),h(J),h(j);var se=T(j,2),de=p(se);{var Oe=U=>{var le=Qa();M(U,le)};I(de,U=>{i(t)&&U(Oe)})}var Ve=T(de,2);h(se),h(S);var Xe=T(S,2);{var Ue=U=>{var le=$a(),qe=p(le);Za(qe,{get progress(){return i(d)},label:"Converting..."}),h(le),M(U,le)};I(Xe,U=>{i(t)&&U(Ue)})}X(U=>{V(ge,i(o).name),V(he,`${U??""} KB`)},[()=>(i(o).size/1024).toFixed(2)]),ye("click",Ve,w),M(x,E)},$$slots:{default:!0}})};I(R,g=>{i(o)?g(B,!1):g(z)})}h(A);var F=T(A,2);{var c=g=>{var x=ar(),H=p(x),E=T(p(H),2),S=T(p(E),2),j=p(S,!0);h(S),h(E),h(H),h(x),X(()=>V(j,i(v))),M(g,x)};I(F,g=>{i(v)&&g(c)})}var b=T(F,2);{var y=g=>{qa(g,{get content(){return i(k)},get stats(){return i(r).stats},get sourceFile(){return i(r).metadata.sourceFile},get isLoading(){return i(t)},onExport:l,onCopy:m})};I(b,g=>{i(r)&&g(y)})}h(P),M(a,P),te()}je(["click"]);export{dr as default};
