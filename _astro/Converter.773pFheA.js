import{s as jt,c as zt,a as tr,b as er,g as rr,d as nr,m as sr}from"./utils.t3pewObc.js";import{h as Pt,s as re,g as ne,c as le,a as pe,b as ir,d as tt,r as ar,H as or,e as Ce,f as ue,i as Lt,C as je,j as lr,k as Se,l as ur,m as ge,n as dr,o as fr,p as hr,E as cr,q as Ae,t as pr,u as gr,v as mr,w as vr,x as xe,y as Bt,z as Ue,A as We,I as de,B as _r,D as br,F as wr,G as Ze,J as At,K as yr,L as kr,M as xr,N as Er,O as Ie,P as Tr,Q as Cr,R as Sr,S as Ar,T as Ir,U as Nr,V as zr,W as Or,X as Ve,Y as Wt,Z as nt,_ as dt,$ as rt,a0 as me,a1 as Qt,a2 as ve,a3 as ut,a4 as Zt,a5 as Nt,a6 as xt,a7 as mt,a8 as lt,a9 as He,aa as _e,ab as Ut,ac as $t}from"./utils.PJwVcRqf.js";import{s as St}from"./render.Bd7dY8qx.js";import{p as yt,s as se,a as Pr,i as wt,r as Fr,b as Br}from"./props.Bmk2XFij.js";import{s as Xe}from"./snippet.D6VF0mp1.js";import"./branches.54bsqzi5.js";function Rr(i,e){return e}function Mr(i,e,t){for(var u=[],a=e.length,r,o=e.length,n=0;n<a;n++){let g=e[n];We(g,()=>{if(r){if(r.pending.delete(g),r.done.add(g),r.pending.size===0){var y=i.outrogroups;be(xe(r.done)),y.delete(r),y.size===0&&(i.outrogroups=null)}}else o-=1},!1)}if(o===0){var l=u.length===0&&t!==null;if(l){var f=t,b=f.parentNode;br(b),b.append(f),i.items.clear()}be(e,!l)}else r={pending:new Set(e),done:new Set},(i.outrogroups??=new Set).add(r)}function be(i,e=!0){for(var t=0;t<i.length;t++)wr(i[t],e)}var Ne;function Lr(i,e,t,u,a,r=null){var o=i,n=new Map;{var l=i;o=Pt?re(ne(l)):l.appendChild(le())}Pt&&pe();var f=null,b=hr(()=>{var m=t();return vr(m)?m:m==null?[]:xe(m)}),g,y=!0;function c(){h.fallback=f,jr(h,g,o,e,u),f!==null&&(g.length===0?(f.f&Bt)===0?Ue(f):(f.f^=Bt,Kt(f,null,o)):We(f,()=>{f=null}))}var v=ir(()=>{g=tt(b);var m=g.length;let p=!1;if(Pt){var w=ar(o)===or;w!==(m===0)&&(o=Ce(),re(o),ue(!1),p=!0)}for(var E=new Set,C=ur,T=fr(),z=0;z<m;z+=1){Pt&&Lt.nodeType===je&&Lt.data===lr&&(o=Lt,p=!0,ue(!1));var S=g[z],F=u(S,z),I=y?null:n.get(F);I?(I.v&&Se(I.v,S),I.i&&Se(I.i,z),T&&C.unskip_effect(I.e)):(I=Ur(n,y?o:Ne??=le(),S,F,z,a,e,t),y||(I.e.f|=Bt),n.set(F,I)),E.add(F)}if(m===0&&r&&!f&&(y?f=ge(()=>r(o)):(f=ge(()=>r(Ne??=le())),f.f|=Bt)),m>E.size&&dr(),Pt&&m>0&&re(Ce()),!y)if(T){for(const[U,K]of n)E.has(U)||C.skip_effect(K.e);C.oncommit(c),C.ondiscard(()=>{})}else c();p&&ue(!0),tt(b)}),h={effect:v,items:n,outrogroups:null,fallback:f};y=!1,Pt&&(o=Lt)}function Yt(i){for(;i!==null&&(i.f&_r)===0;)i=i.next;return i}function jr(i,e,t,u,a){var r=e.length,o=i.items,n=Yt(i.effect.first),l,f=null,b=[],g=[],y,c,v,h;for(h=0;h<r;h+=1){if(y=e[h],c=a(y,h),v=o.get(c).e,i.outrogroups!==null)for(const F of i.outrogroups)F.pending.delete(v),F.done.delete(v);if((v.f&Bt)!==0)if(v.f^=Bt,v===n)Kt(v,null,t);else{var m=f?f.next:n;v===i.effect.last&&(i.effect.last=v.prev),v.prev&&(v.prev.next=v.next),v.next&&(v.next.prev=v.prev),Ot(i,f,v),Ot(i,v,m),Kt(v,m,t),f=v,b=[],g=[],n=Yt(f.next);continue}if((v.f&de)!==0&&Ue(v),v!==n){if(l!==void 0&&l.has(v)){if(b.length<g.length){var p=g[0],w;f=p.prev;var E=b[0],C=b[b.length-1];for(w=0;w<b.length;w+=1)Kt(b[w],p,t);for(w=0;w<g.length;w+=1)l.delete(g[w]);Ot(i,E.prev,C.next),Ot(i,f,E),Ot(i,C,p),n=p,f=C,h-=1,b=[],g=[]}else l.delete(v),Kt(v,n,t),Ot(i,v.prev,v.next),Ot(i,v,f===null?i.effect.first:f.next),Ot(i,f,v),f=v;continue}for(b=[],g=[];n!==null&&n!==v;)(l??=new Set).add(n),g.push(n),n=Yt(n.next);if(n===null)continue}(v.f&Bt)===0&&b.push(v),f=v,n=Yt(v.next)}if(i.outrogroups!==null){for(const F of i.outrogroups)F.pending.size===0&&(be(xe(F.done)),i.outrogroups?.delete(F));i.outrogroups.size===0&&(i.outrogroups=null)}if(n!==null||l!==void 0){var T=[];if(l!==void 0)for(v of l)(v.f&de)===0&&T.push(v);for(;n!==null;)(n.f&de)===0&&n!==i.fallback&&T.push(n),n=Yt(n.next);var z=T.length;if(z>0){var S=r===0?t:null;Mr(i,T,S)}}}function Ur(i,e,t,u,a,r,o,n){var l=(o&pr)!==0?(o&gr)===0?mr(t,!1,!1):Ae(t):null,f=(o&cr)!==0?Ae(a):null;return{v:l,i:f,e:ge(()=>(r(e,l??t,f??a,n),()=>{i.delete(u)}))}}function Kt(i,e,t){if(i.nodes)for(var u=i.nodes.start,a=i.nodes.end,r=e&&(e.f&Bt)===0?e.nodes.start:t;u!==null;){var o=Ze(u);if(r.before(u),u===a)return;u=o}}function Ot(i,e,t){e===null?i.effect.first=t:e.next=t,t===null?i.effect.last=e:t.prev=e}function Wr(i,e,t=!1,u=!1,a=!1){var r=i,o="";At(()=>{var n=yr;if(o===(o=e()??"")){Pt&&pe();return}if(n.nodes!==null&&(kr(n.nodes.start,n.nodes.end),n.nodes=null),o!==""){if(Pt){Lt.data;for(var l=pe(),f=l;l!==null&&(l.nodeType!==je||l.data!=="");)f=l,l=Ze(l);if(l===null)throw xr(),Er;Ie(Lt,f),r=re(l);return}var b=t?Cr:u?Sr:void 0,g=Tr(t?"svg":u?"math":"template",b);g.innerHTML=o;var y=t||u?g:g.content;if(Ie(ne(y),y.lastChild),t||u)for(;ne(y);)r.before(ne(y));else r.before(y)}})}function ze(i,e){return i===e||i?.[Or]===e}function Zr(i={},e,t,u){return Ar(()=>{var a,r;return Ir(()=>{a=r,r=[],Nr(()=>{i!==t(...r)&&(e(i,...r),a&&ze(t(...a),i)&&e(null,...a))})}),()=>{zr(()=>{r&&ze(t(...r),i)&&e(null,...r)})}}),i}var Vr=mt('<div role="button" tabindex="0" aria-label="Drop zone for file upload"><div class="flex flex-col items-center gap-4"><div><svg class="w-8 h-8 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg></div> <div><p class="text-lg font-medium text-slate-700 dark:text-slate-300"> </p> <p class="text-sm text-slate-500 dark:text-slate-400 mt-1">or click to browse</p></div> <input type="file" class="hidden"/></div></div>');function Hr(i,e){Wt(e,!0);let t=yt(e,"accept",3,".xmind"),u=yt(e,"multiple",3,!1),a=yt(e,"disabled",3,!1),r=Nt(!1),o=Nt(void 0);const n="border-2 border-dashed rounded-xl p-12 text-center transition-all cursor-pointer",l=xt(()=>zt(n,a()?"border-slate-200 dark:border-slate-700 opacity-50 cursor-not-allowed":"hover:border-primary-500 dark:hover:border-primary-500",tt(r)&&!a()?"border-primary-500 dark:border-primary-500 bg-primary-50 dark:bg-primary-900/20 scale-[1.02]":"border-slate-300 dark:border-slate-600",e.class));function f(S){S.preventDefault(),a()||lt(r,!0)}function b(S){S.preventDefault(),a()||lt(r,!1)}function g(S){S.preventDefault(),a()||lt(r,!0)}function y(S){if(S.preventDefault(),lt(r,!1),a())return;const F=Array.from(S.dataTransfer?.files||[]);F.length>0&&e.onFileSelect(u()?F:[F[0]])}function c(){a()||tt(o)?.click()}function v(S){const F=S.target,I=Array.from(F.files||[]);I.length>0&&e.onFileSelect(u()?I:[I[0]]),F.value=""}var h=Vr(),m=nt(h),p=nt(m);let w;var E=dt(p,2),C=nt(E),T=nt(C,!0);rt(C),me(2),rt(E);var z=dt(E,2);Zr(z,S=>lt(o,S),()=>tt(o)),rt(m),rt(h),At(()=>{jt(h,1,tt(l)),w=jt(p,1,"w-16 h-16 bg-primary-100 dark:bg-primary-900/30 rounded-full flex items-center justify-center transition-transform",null,w,{"scale-110":tt(r)}),St(T,tt(r)?"Drop your file here":"Drop your XMind file here"),se(z,"accept",t()),z.multiple=u(),z.disabled=a()}),Qt("dragenter",h,f),Qt("dragleave",h,b),Qt("dragover",h,g),Qt("drop",h,y),ve("click",h,c),ve("change",z,v),ut(i,h),Zt()}Ve(["click","change"]);var Xr=mt("<div><!></div>");function we(i,e){Wt(e,!0);let t=yt(e,"variant",3,"default"),u=yt(e,"padding",3,"md");const a="rounded-xl transition-all",r=xt(()=>zt(a,t()==="default"&&"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 shadow-lg",t()==="bordered"&&"bg-white dark:bg-slate-800 border-2 border-slate-300 dark:border-slate-600",t()==="elevated"&&"bg-white dark:bg-slate-800 shadow-xl border border-slate-200 dark:border-slate-700",t()==="flat"&&"bg-transparent dark:bg-transparent border-0 shadow-none")),o=xt(()=>zt(u()==="none"&&"p-0",u()==="sm"&&"p-4",u()==="md"&&"p-6",u()==="lg"&&"p-8"));var n=Xr(),l=nt(n);Xe(l,()=>e.children??He),rt(n),At(()=>jt(n,1,`${tt(r)??""} ${tt(o)??""} ${e.class??""}`)),ut(i,n),Zt()}var Yr=$t('<svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),Dr=mt("<button><!> <!></button>");function fe(i,e){Wt(e,!0);let t=yt(e,"variant",3,"primary"),u=yt(e,"size",3,"md"),a=yt(e,"isLoading",3,!1),r=Fr(e,["$$slots","$$events","$$legacy","variant","size","isLoading","class","children","disabled"]);const o="inline-flex items-center justify-center gap-2 rounded-lg font-medium transition-all focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",n=xt(()=>zt(o,t()==="primary"&&"bg-primary-500 text-white hover:bg-primary-600 focus:ring-primary-500 shadow-sm",t()==="secondary"&&"bg-slate-200 text-slate-900 dark:bg-slate-700 dark:text-slate-100 hover:bg-slate-300 dark:hover:bg-slate-600",t()==="outline"&&"border-2 border-slate-300 dark:border-slate-600 text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800",t()==="ghost"&&"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",t()==="danger"&&"bg-red-500 text-white hover:bg-red-600 focus:ring-red-500 shadow-sm",e.class)),l=xt(()=>zt(u()==="sm"&&"px-3 py-1.5 text-sm",u()==="md"&&"px-4 py-2 text-base",u()==="lg"&&"px-6 py-3 text-lg")),f=xt(()=>e.disabled||a());var b=Dr();Pr(b,()=>({class:`${tt(n)??""} ${tt(l)??""}`,disabled:tt(f),...r}));var g=nt(b);{var y=h=>{var m=Yr();ut(h,m)};wt(g,h=>{a()&&h(y)})}var c=dt(g,2);{var v=h=>{var m=_e(),p=Ut(m);Xe(p,()=>e.children??He),ut(h,m)};wt(c,h=>{a()||h(v)})}rt(b),ut(i,b),Zt()}var Gr=$t('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg> Stats',1),Kr=$t('<svg class="w-4 h-4 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>'),$r=$t('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"></path></svg>'),qr=$t('<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg> Export .md',1),Jr=mt('<div class="text-center"><div class="text-2xl mb-1"> </div> <div class="text-lg font-semibold text-slate-900 dark:text-slate-100"> </div> <div class="text-xs text-slate-500 dark:text-slate-400"> </div></div>'),Qr=mt('<div class="mb-4 p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 animate-slide-down"><div class="grid grid-cols-2 sm:grid-cols-4 gap-4"></div> <div class="mt-3 pt-3 border-t border-slate-200 dark:border-slate-700 text-center"><p class="text-sm text-slate-600 dark:text-slate-400">Source: <span class="font-medium"> </span></p></div></div>'),tn=mt('<div class="flex items-center justify-center h-64"><div class="text-center"><div class="animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"></div> <p class="text-slate-600 dark:text-slate-400">Converting your XMind file...</p></div></div>'),en=mt('<div class="flex items-center justify-center h-64 text-slate-400 dark:text-slate-600"><div class="text-center"><svg class="w-12 h-12 mx-auto mb-4 opacity-50" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg> <p>Upload an XMind file to see the preview</p></div></div>'),rn=mt('<div class="flex items-center justify-between mb-4"><h2 class="text-2xl font-semibold flex items-center gap-2 text-slate-900 dark:text-slate-100"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg> Markdown Preview</h2> <div class="flex items-center gap-2"><!> <!> <!></div></div> <!> <div class="prose dark:prose-invert max-w-none min-h-[400px] p-4 bg-slate-50 dark:bg-slate-900/50 rounded-xl border border-slate-200 dark:border-slate-700 overflow-auto"><!></div>',1);function nn(i,e){Wt(e,!0);let t=yt(e,"isLoading",3,!1),u=Nt(!1),a=Nt(!1);async function r(){e.onCopy&&(await e.onCopy(),lt(a,!0),setTimeout(()=>{lt(a,!1)},2e3))}const o=xt(()=>[{label:"Topics",value:e.stats.totalTopics,icon:"ðŸ“"},{label:"Max Depth",value:e.stats.maxDepthReached,icon:"ðŸ“Š"},{label:"Root Topics",value:e.stats.rootTopics,icon:"ðŸŒ³"},{label:"Processing Time",value:`${e.stats.processingTime}ms`,icon:"â±ï¸"},{label:"Markers",value:e.stats.markersProcessed,icon:"ðŸ·ï¸"},{label:"Attachments",value:e.stats.attachmentsProcessed,icon:"ðŸ“Ž"},{label:"Links",value:e.stats.linksProcessed,icon:"ðŸ”—"},{label:"Images",value:e.stats.imagesProcessed,icon:"ðŸ–¼ï¸"}]);{let n=xt(()=>zt("flex flex-col",e.class));we(i,{variant:"default",get class(){return tt(n)},children:(l,f)=>{var b=rn(),g=Ut(b),y=dt(nt(g),2),c=nt(y);fe(c,{variant:"outline",size:"sm",onclick:()=>lt(u,!tt(u)),"aria-label":"Toggle statistics",children:(S,F)=>{var I=Gr();me(),ut(S,I)},$$slots:{default:!0}});var v=dt(c,2);fe(v,{variant:"outline",size:"sm",onclick:r,get disabled(){return t()},children:(S,F)=>{var I=_e(),U=Ut(I);{var K=R=>{var d=Kr();ut(R,d)},x=R=>{var d=$r();ut(R,d)};wt(U,R=>{tt(a)?R(K):R(x,!1)})}ut(S,I)},$$slots:{default:!0}});var h=dt(v,2);fe(h,{variant:"primary",size:"sm",get onclick(){return e.onExport},get disabled(){return t()},children:(S,F)=>{var I=qr();me(),ut(S,I)},$$slots:{default:!0}}),rt(y),rt(g);var m=dt(g,2);{var p=S=>{var F=Qr(),I=nt(F);Lr(I,21,()=>tt(o),Rr,(d,M)=>{var Q=Jr(),W=nt(Q),et=nt(W,!0);rt(W);var V=dt(W,2),J=nt(V,!0);rt(V);var P=dt(V,2),O=nt(P,!0);rt(P),rt(Q),At(()=>{St(et,tt(M).icon),St(J,tt(M).value),St(O,tt(M).label)}),ut(d,Q)}),rt(I);var U=dt(I,2),K=nt(U),x=dt(nt(K)),R=nt(x,!0);rt(x),rt(K),rt(U),rt(F),At(()=>St(R,e.sourceFile)),ut(S,F)};wt(m,S=>{tt(u)&&S(p)})}var w=dt(m,2),E=nt(w);{var C=S=>{var F=tn();ut(S,F)},T=S=>{var F=_e(),I=Ut(F);Wr(I,()=>e.content),ut(S,F)},z=S=>{var F=en();ut(S,F)};wt(E,S=>{t()?S(C):e.content?S(T,1):S(z,!1)})}rt(w),ut(l,b)},$$slots:{default:!0}})}Zt()}var sn=mt('<span class="text-sm font-medium text-slate-700 dark:text-slate-300"> </span>'),an=mt('<span class="text-sm text-slate-600 dark:text-slate-400"> </span>'),on=mt('<div class="flex items-center justify-between mb-2"><!> <!></div>'),ln=mt('<div><!> <div><div role="progressbar"></div></div></div>');function un(i,e){Wt(e,!0);let t=yt(e,"max",3,100),u=yt(e,"showPercentage",3,!0),a=yt(e,"size",3,"md"),r=yt(e,"variant",3,"default");const o=xt(()=>Math.min(Math.max(e.progress/t()*100,0),100)),n=xt(()=>zt(a()==="sm"&&"h-1.5",a()==="md"&&"h-2.5",a()==="lg"&&"h-4")),l=xt(()=>zt("rounded-full transition-all duration-300 ease-out",r()==="default"&&"bg-primary-500",r()==="success"&&"bg-green-500",r()==="warning"&&"bg-yellow-500",r()==="error"&&"bg-red-500"));var f=ln(),b=nt(f);{var g=v=>{var h=on(),m=nt(h);{var p=C=>{var T=sn(),z=nt(T,!0);rt(T),At(()=>St(z,e.label)),ut(C,T)};wt(m,C=>{e.label&&C(p)})}var w=dt(m,2);{var E=C=>{var T=an(),z=nt(T);rt(T),At(S=>St(z,`${S??""}%`),[()=>Math.round(tt(o))]),ut(C,T)};wt(w,C=>{u()&&C(E)})}rt(h),ut(v,h)};wt(b,v=>{(e.label||u())&&v(g)})}var y=dt(b,2),c=nt(y);se(c,"aria-valuemin",0),rt(y),rt(f),At(v=>{jt(f,1,v),jt(y,1,`w-full bg-slate-200 dark:bg-slate-700 rounded-full overflow-hidden ${tt(n)??""}`),jt(c,1,`${tt(l)??""} ${tt(n)??""}`),Br(c,`width: ${tt(o)??""}%`),se(c,"aria-valuenow",e.progress),se(c,"aria-valuemax",t())},[()=>tr(zt("w-full",e.class))]),ut(i,f),Zt()}var te=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dn(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ee(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var he={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Oe;function fn(){return Oe||(Oe=1,(function(i,e){(function(t){i.exports=t()})(function(){return(function t(u,a,r){function o(f,b){if(!a[f]){if(!u[f]){var g=typeof ee=="function"&&ee;if(!b&&g)return g(f,!0);if(n)return n(f,!0);var y=new Error("Cannot find module '"+f+"'");throw y.code="MODULE_NOT_FOUND",y}var c=a[f]={exports:{}};u[f][0].call(c.exports,function(v){var h=u[f][1][v];return o(h||v)},c,c.exports,t,u,a,r)}return a[f].exports}for(var n=typeof ee=="function"&&ee,l=0;l<r.length;l++)o(r[l]);return o})({1:[function(t,u,a){var r=t("./utils"),o=t("./support"),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(l){for(var f,b,g,y,c,v,h,m=[],p=0,w=l.length,E=w,C=r.getTypeOf(l)!=="string";p<l.length;)E=w-p,g=C?(f=l[p++],b=p<w?l[p++]:0,p<w?l[p++]:0):(f=l.charCodeAt(p++),b=p<w?l.charCodeAt(p++):0,p<w?l.charCodeAt(p++):0),y=f>>2,c=(3&f)<<4|b>>4,v=1<E?(15&b)<<2|g>>6:64,h=2<E?63&g:64,m.push(n.charAt(y)+n.charAt(c)+n.charAt(v)+n.charAt(h));return m.join("")},a.decode=function(l){var f,b,g,y,c,v,h=0,m=0,p="data:";if(l.substr(0,p.length)===p)throw new Error("Invalid base64 input, it looks like a data url.");var w,E=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===n.charAt(64)&&E--,l.charAt(l.length-2)===n.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(w=o.uint8array?new Uint8Array(0|E):new Array(0|E);h<l.length;)f=n.indexOf(l.charAt(h++))<<2|(y=n.indexOf(l.charAt(h++)))>>4,b=(15&y)<<4|(c=n.indexOf(l.charAt(h++)))>>2,g=(3&c)<<6|(v=n.indexOf(l.charAt(h++))),w[m++]=f,c!==64&&(w[m++]=b),v!==64&&(w[m++]=g);return w}},{"./support":30,"./utils":32}],2:[function(t,u,a){var r=t("./external"),o=t("./stream/DataWorker"),n=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function f(b,g,y,c,v){this.compressedSize=b,this.uncompressedSize=g,this.crc32=y,this.compression=c,this.compressedContent=v}f.prototype={getContentWorker:function(){var b=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),g=this;return b.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(b,g,y){return b.pipe(new n).pipe(new l("uncompressedSize")).pipe(g.compressWorker(y)).pipe(new l("compressedSize")).withStreamInfo("compression",g)},u.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,u,a){var r=t("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},a.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,u,a){var r=t("./utils"),o=(function(){for(var n,l=[],f=0;f<256;f++){n=f;for(var b=0;b<8;b++)n=1&n?3988292384^n>>>1:n>>>1;l[f]=n}return l})();u.exports=function(n,l){return n!==void 0&&n.length?r.getTypeOf(n)!=="string"?(function(f,b,g,y){var c=o,v=y+g;f^=-1;for(var h=y;h<v;h++)f=f>>>8^c[255&(f^b[h])];return-1^f})(0|l,n,n.length,0):(function(f,b,g,y){var c=o,v=y+g;f^=-1;for(var h=y;h<v;h++)f=f>>>8^c[255&(f^b.charCodeAt(h))];return-1^f})(0|l,n,n.length,0):0}},{"./utils":32}],5:[function(t,u,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(t,u,a){var r=null;r=typeof Promise<"u"?Promise:t("lie"),u.exports={Promise:r}},{lie:37}],7:[function(t,u,a){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=t("pako"),n=t("./utils"),l=t("./stream/GenericWorker"),f=r?"uint8array":"array";function b(g,y){l.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=y,this.meta={}}a.magic="\b\0",n.inherits(b,l),b.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(n.transformTo(f,g.data),!1)},b.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(y){g.push({data:y,meta:g.meta})}},a.compressWorker=function(g){return new b("Deflate",g)},a.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,u,a){function r(c,v){var h,m="";for(h=0;h<v;h++)m+=String.fromCharCode(255&c),c>>>=8;return m}function o(c,v,h,m,p,w){var E,C,T=c.file,z=c.compression,S=w!==f.utf8encode,F=n.transformTo("string",w(T.name)),I=n.transformTo("string",f.utf8encode(T.name)),U=T.comment,K=n.transformTo("string",w(U)),x=n.transformTo("string",f.utf8encode(U)),R=I.length!==T.name.length,d=x.length!==U.length,M="",Q="",W="",et=T.dir,V=T.date,J={crc32:0,compressedSize:0,uncompressedSize:0};v&&!h||(J.crc32=c.crc32,J.compressedSize=c.compressedSize,J.uncompressedSize=c.uncompressedSize);var P=0;v&&(P|=8),S||!R&&!d||(P|=2048);var O=0,$=0;et&&(O|=16),p==="UNIX"?($=798,O|=(function(Y,ft){var vt=Y;return Y||(vt=ft?16893:33204),(65535&vt)<<16})(T.unixPermissions,et)):($=20,O|=(function(Y){return 63&(Y||0)})(T.dosPermissions)),E=V.getUTCHours(),E<<=6,E|=V.getUTCMinutes(),E<<=5,E|=V.getUTCSeconds()/2,C=V.getUTCFullYear()-1980,C<<=4,C|=V.getUTCMonth()+1,C<<=5,C|=V.getUTCDate(),R&&(Q=r(1,1)+r(b(F),4)+I,M+="up"+r(Q.length,2)+Q),d&&(W=r(1,1)+r(b(K),4)+x,M+="uc"+r(W.length,2)+W);var D="";return D+=`
\0`,D+=r(P,2),D+=z.magic,D+=r(E,2),D+=r(C,2),D+=r(J.crc32,4),D+=r(J.compressedSize,4),D+=r(J.uncompressedSize,4),D+=r(F.length,2),D+=r(M.length,2),{fileRecord:g.LOCAL_FILE_HEADER+D+F+M,dirRecord:g.CENTRAL_FILE_HEADER+r($,2)+D+r(K.length,2)+"\0\0\0\0"+r(O,4)+r(m,4)+F+M+K}}var n=t("../utils"),l=t("../stream/GenericWorker"),f=t("../utf8"),b=t("../crc32"),g=t("../signature");function y(c,v,h,m){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=v,this.zipPlatform=h,this.encodeFileName=m,this.streamFiles=c,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}n.inherits(y,l),y.prototype.push=function(c){var v=c.meta.percent||0,h=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(c):(this.bytesWritten+=c.data.length,l.prototype.push.call(this,{data:c.data,meta:{currentFile:this.currentFile,percent:h?(v+100*(h-m-1))/h:100}}))},y.prototype.openedSource=function(c){this.currentSourceOffset=this.bytesWritten,this.currentFile=c.file.name;var v=this.streamFiles&&!c.file.dir;if(v){var h=o(c,v,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:h.fileRecord,meta:{percent:0}})}else this.accumulate=!0},y.prototype.closedSource=function(c){this.accumulate=!1;var v=this.streamFiles&&!c.file.dir,h=o(c,v,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(h.dirRecord),v)this.push({data:(function(m){return g.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)})(c),meta:{percent:100}});else for(this.push({data:h.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},y.prototype.flush=function(){for(var c=this.bytesWritten,v=0;v<this.dirRecords.length;v++)this.push({data:this.dirRecords[v],meta:{percent:100}});var h=this.bytesWritten-c,m=(function(p,w,E,C,T){var z=n.transformTo("string",T(C));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(p,2)+r(p,2)+r(w,4)+r(E,4)+r(z.length,2)+z})(this.dirRecords.length,h,c,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},y.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},y.prototype.registerPrevious=function(c){this._sources.push(c);var v=this;return c.on("data",function(h){v.processChunk(h)}),c.on("end",function(){v.closedSource(v.previous.streamInfo),v._sources.length?v.prepareNextSource():v.end()}),c.on("error",function(h){v.error(h)}),this},y.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},y.prototype.error=function(c){var v=this._sources;if(!l.prototype.error.call(this,c))return!1;for(var h=0;h<v.length;h++)try{v[h].error(c)}catch{}return!0},y.prototype.lock=function(){l.prototype.lock.call(this);for(var c=this._sources,v=0;v<c.length;v++)c[v].lock()},u.exports=y},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,u,a){var r=t("../compressions"),o=t("./ZipFileWorker");a.generateWorker=function(n,l,f){var b=new o(l.streamFiles,f,l.platform,l.encodeFileName),g=0;try{n.forEach(function(y,c){g++;var v=(function(w,E){var C=w||E,T=r[C];if(!T)throw new Error(C+" is not a valid compression method !");return T})(c.options.compression,l.compression),h=c.options.compressionOptions||l.compressionOptions||{},m=c.dir,p=c.date;c._compressWorker(v,h).withStreamInfo("file",{name:y,dir:m,date:p,comment:c.comment||"",unixPermissions:c.unixPermissions,dosPermissions:c.dosPermissions}).pipe(b)}),b.entriesCount=g}catch(y){b.error(y)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,u,a){function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var n in this)typeof this[n]!="function"&&(o[n]=this[n]);return o}}(r.prototype=t("./object")).loadAsync=t("./load"),r.support=t("./support"),r.defaults=t("./defaults"),r.version="3.10.1",r.loadAsync=function(o,n){return new r().loadAsync(o,n)},r.external=t("./external"),u.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,u,a){var r=t("./utils"),o=t("./external"),n=t("./utf8"),l=t("./zipEntries"),f=t("./stream/Crc32Probe"),b=t("./nodejsUtils");function g(y){return new o.Promise(function(c,v){var h=y.decompressed.getContentWorker().pipe(new f);h.on("error",function(m){v(m)}).on("end",function(){h.streamInfo.crc32!==y.decompressed.crc32?v(new Error("Corrupted zip : CRC32 mismatch")):c()}).resume()})}u.exports=function(y,c){var v=this;return c=r.extend(c||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:n.utf8decode}),b.isNode&&b.isStream(y)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",y,!0,c.optimizedBinaryString,c.base64).then(function(h){var m=new l(c);return m.load(h),m}).then(function(h){var m=[o.Promise.resolve(h)],p=h.files;if(c.checkCRC32)for(var w=0;w<p.length;w++)m.push(g(p[w]));return o.Promise.all(m)}).then(function(h){for(var m=h.shift(),p=m.files,w=0;w<p.length;w++){var E=p[w],C=E.fileNameStr,T=r.resolve(E.fileNameStr);v.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:c.createFolders}),E.dir||(v.file(T).unsafeOriginalName=C)}return m.zipComment.length&&(v.comment=m.zipComment),v})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,u,a){var r=t("../utils"),o=t("../stream/GenericWorker");function n(l,f){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(f)}r.inherits(n,o),n.prototype._bindStream=function(l){var f=this;(this._stream=l).pause(),l.on("data",function(b){f.push({data:b,meta:{percent:0}})}).on("error",function(b){f.isPaused?this.generatedError=b:f.error(b)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},n.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},n.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=n},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,u,a){var r=t("readable-stream").Readable;function o(n,l,f){r.call(this,l),this._helper=n;var b=this;n.on("data",function(g,y){b.push(g)||b._helper.pause(),f&&f(y)}).on("error",function(g){b.emit("error",g)}).on("end",function(){b.push(null)})}t("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},u.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,u,a){u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(t,u,a){function r(T,z,S){var F,I=n.getTypeOf(z),U=n.extend(S||{},b);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(T=p(T)),U.createFolders&&(F=m(T))&&w.call(this,F,!0);var K=I==="string"&&U.binary===!1&&U.base64===!1;S&&S.binary!==void 0||(U.binary=!K),(z instanceof g&&z.uncompressedSize===0||U.dir||!z||z.length===0)&&(U.base64=!1,U.binary=!0,z="",U.compression="STORE",I="string");var x=null;x=z instanceof g||z instanceof l?z:v.isNode&&v.isStream(z)?new h(T,z):n.prepareContent(T,z,U.binary,U.optimizedBinaryString,U.base64);var R=new y(T,x,U);this.files[T]=R}var o=t("./utf8"),n=t("./utils"),l=t("./stream/GenericWorker"),f=t("./stream/StreamHelper"),b=t("./defaults"),g=t("./compressedObject"),y=t("./zipObject"),c=t("./generate"),v=t("./nodejsUtils"),h=t("./nodejs/NodejsStreamInputAdapter"),m=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var z=T.lastIndexOf("/");return 0<z?T.substring(0,z):""},p=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},w=function(T,z){return z=z!==void 0?z:b.createFolders,T=p(T),this.files[T]||r.call(this,T,null,{dir:!0,createFolders:z}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var C={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var z,S,F;for(z in this.files)F=this.files[z],(S=z.slice(this.root.length,z.length))&&z.slice(0,this.root.length)===this.root&&T(S,F)},filter:function(T){var z=[];return this.forEach(function(S,F){T(S,F)&&z.push(F)}),z},file:function(T,z,S){if(arguments.length!==1)return T=this.root+T,r.call(this,T,z,S),this;if(E(T)){var F=T;return this.filter(function(U,K){return!K.dir&&F.test(U)})}var I=this.files[this.root+T];return I&&!I.dir?I:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(I,U){return U.dir&&T.test(I)});var z=this.root+T,S=w.call(this,z),F=this.clone();return F.root=S.name,F},remove:function(T){T=this.root+T;var z=this.files[T];if(z||(T.slice(-1)!=="/"&&(T+="/"),z=this.files[T]),z&&!z.dir)delete this.files[T];else for(var S=this.filter(function(I,U){return U.name.slice(0,T.length)===T}),F=0;F<S.length;F++)delete this.files[S[F].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var z,S={};try{if((S=n.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");n.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var F=S.comment||this.comment||"";z=c.generateWorker(this,S,F)}catch(I){(z=new l("error")).error(I)}return new f(z,S.type||"string",S.mimeType)},generateAsync:function(T,z){return this.generateInternalStream(T).accumulate(z)},generateNodeStream:function(T,z){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(z)}};u.exports=C},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,u,a){u.exports=t("stream")},{stream:void 0}],17:[function(t,u,a){var r=t("./DataReader");function o(n){r.call(this,n);for(var l=0;l<this.data.length;l++)n[l]=255&n[l]}t("../utils").inherits(o,r),o.prototype.byteAt=function(n){return this.data[this.zero+n]},o.prototype.lastIndexOfSignature=function(n){for(var l=n.charCodeAt(0),f=n.charCodeAt(1),b=n.charCodeAt(2),g=n.charCodeAt(3),y=this.length-4;0<=y;--y)if(this.data[y]===l&&this.data[y+1]===f&&this.data[y+2]===b&&this.data[y+3]===g)return y-this.zero;return-1},o.prototype.readAndCheckSignature=function(n){var l=n.charCodeAt(0),f=n.charCodeAt(1),b=n.charCodeAt(2),g=n.charCodeAt(3),y=this.readData(4);return l===y[0]&&f===y[1]&&b===y[2]&&g===y[3]},o.prototype.readData=function(n){if(this.checkOffset(n),n===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},u.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,u,a){var r=t("../utils");function o(n){this.data=n,this.length=n.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(n){this.checkIndex(this.index+n)},checkIndex:function(n){if(this.length<this.zero+n||n<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+n+"). Corrupted zip ?")},setIndex:function(n){this.checkIndex(n),this.index=n},skip:function(n){this.setIndex(this.index+n)},byteAt:function(){},readInt:function(n){var l,f=0;for(this.checkOffset(n),l=this.index+n-1;l>=this.index;l--)f=(f<<8)+this.byteAt(l);return this.index+=n,f},readString:function(n){return r.transformTo("string",this.readData(n))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var n=this.readInt(4);return new Date(Date.UTC(1980+(n>>25&127),(n>>21&15)-1,n>>16&31,n>>11&31,n>>5&63,(31&n)<<1))}},u.exports=o},{"../utils":32}],19:[function(t,u,a){var r=t("./Uint8ArrayReader");function o(n){r.call(this,n)}t("../utils").inherits(o,r),o.prototype.readData=function(n){this.checkOffset(n);var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},u.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,u,a){var r=t("./DataReader");function o(n){r.call(this,n)}t("../utils").inherits(o,r),o.prototype.byteAt=function(n){return this.data.charCodeAt(this.zero+n)},o.prototype.lastIndexOfSignature=function(n){return this.data.lastIndexOf(n)-this.zero},o.prototype.readAndCheckSignature=function(n){return n===this.readData(4)},o.prototype.readData=function(n){this.checkOffset(n);var l=this.data.slice(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},u.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,u,a){var r=t("./ArrayReader");function o(n){r.call(this,n)}t("../utils").inherits(o,r),o.prototype.readData=function(n){if(this.checkOffset(n),n===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+n);return this.index+=n,l},u.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,u,a){var r=t("../utils"),o=t("../support"),n=t("./ArrayReader"),l=t("./StringReader"),f=t("./NodeBufferReader"),b=t("./Uint8ArrayReader");u.exports=function(g){var y=r.getTypeOf(g);return r.checkSupport(y),y!=="string"||o.uint8array?y==="nodebuffer"?new f(g):o.uint8array?new b(r.transformTo("uint8array",g)):new n(r.transformTo("array",g)):new l(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,u,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,u,a){var r=t("./GenericWorker"),o=t("../utils");function n(l){r.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(n,r),n.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},u.exports=n},{"../utils":32,"./GenericWorker":28}],25:[function(t,u,a){var r=t("./GenericWorker"),o=t("../crc32");function n(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(n,r),n.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},u.exports=n},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,u,a){var r=t("../utils"),o=t("./GenericWorker");function n(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}r.inherits(n,o),n.prototype.processChunk=function(l){if(l){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+l.data.length}o.prototype.processChunk.call(this,l)},u.exports=n},{"../utils":32,"./GenericWorker":28}],27:[function(t,u,a){var r=t("../utils"),o=t("./GenericWorker");function n(l){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(b){f.dataIsReady=!0,f.data=b,f.max=b&&b.length||0,f.type=r.getTypeOf(b),f.isPaused||f._tickAndRepeat()},function(b){f.error(b)})}r.inherits(n,o),n.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},n.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},n.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},n.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,f);break;case"uint8array":l=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":l=this.data.slice(this.index,f)}return this.index=f,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=n},{"../utils":32,"./GenericWorker":28}],28:[function(t,u,a){function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,n){return this._listeners[o].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,n){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,n)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var n=this;return o.on("data",function(l){n.processChunk(l)}),o.on("end",function(){n.end()}),o.on("error",function(l){n.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,n){return this.extraStreamInfo[o]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},u.exports=r},{}],29:[function(t,u,a){var r=t("../utils"),o=t("./ConvertWorker"),n=t("./GenericWorker"),l=t("../base64"),f=t("../support"),b=t("../external"),g=null;if(f.nodestream)try{g=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function y(v,h){return new b.Promise(function(m,p){var w=[],E=v._internalType,C=v._outputType,T=v._mimeType;v.on("data",function(z,S){w.push(z),h&&h(S)}).on("error",function(z){w=[],p(z)}).on("end",function(){try{var z=(function(S,F,I){switch(S){case"blob":return r.newBlob(r.transformTo("arraybuffer",F),I);case"base64":return l.encode(F);default:return r.transformTo(S,F)}})(C,(function(S,F){var I,U=0,K=null,x=0;for(I=0;I<F.length;I++)x+=F[I].length;switch(S){case"string":return F.join("");case"array":return Array.prototype.concat.apply([],F);case"uint8array":for(K=new Uint8Array(x),I=0;I<F.length;I++)K.set(F[I],U),U+=F[I].length;return K;case"nodebuffer":return Buffer.concat(F);default:throw new Error("concat : unsupported type '"+S+"'")}})(E,w),T);m(z)}catch(S){p(S)}w=[]}).resume()})}function c(v,h,m){var p=h;switch(h){case"blob":case"arraybuffer":p="uint8array";break;case"base64":p="string"}try{this._internalType=p,this._outputType=h,this._mimeType=m,r.checkSupport(p),this._worker=v.pipe(new o(p)),v.lock()}catch(w){this._worker=new n("error"),this._worker.error(w)}}c.prototype={accumulate:function(v){return y(this,v)},on:function(v,h){var m=this;return v==="data"?this._worker.on(v,function(p){h.call(m,p.data,p.meta)}):this._worker.on(v,function(){r.delay(h,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},v)}},u.exports=c},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,u,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var r=new ArrayBuffer(0);try{a.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),a.blob=o.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!t("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(t,u,a){for(var r=t("./utils"),o=t("./support"),n=t("./nodejsUtils"),l=t("./stream/GenericWorker"),f=new Array(256),b=0;b<256;b++)f[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;f[254]=f[254]=1;function g(){l.call(this,"utf-8 decode"),this.leftOver=null}function y(){l.call(this,"utf-8 encode")}a.utf8encode=function(c){return o.nodebuffer?n.newBufferFrom(c,"utf-8"):(function(v){var h,m,p,w,E,C=v.length,T=0;for(w=0;w<C;w++)(64512&(m=v.charCodeAt(w)))==55296&&w+1<C&&(64512&(p=v.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),T+=m<128?1:m<2048?2:m<65536?3:4;for(h=o.uint8array?new Uint8Array(T):new Array(T),w=E=0;E<T;w++)(64512&(m=v.charCodeAt(w)))==55296&&w+1<C&&(64512&(p=v.charCodeAt(w+1)))==56320&&(m=65536+(m-55296<<10)+(p-56320),w++),m<128?h[E++]=m:(m<2048?h[E++]=192|m>>>6:(m<65536?h[E++]=224|m>>>12:(h[E++]=240|m>>>18,h[E++]=128|m>>>12&63),h[E++]=128|m>>>6&63),h[E++]=128|63&m);return h})(c)},a.utf8decode=function(c){return o.nodebuffer?r.transformTo("nodebuffer",c).toString("utf-8"):(function(v){var h,m,p,w,E=v.length,C=new Array(2*E);for(h=m=0;h<E;)if((p=v[h++])<128)C[m++]=p;else if(4<(w=f[p]))C[m++]=65533,h+=w-1;else{for(p&=w===2?31:w===3?15:7;1<w&&h<E;)p=p<<6|63&v[h++],w--;1<w?C[m++]=65533:p<65536?C[m++]=p:(p-=65536,C[m++]=55296|p>>10&1023,C[m++]=56320|1023&p)}return C.length!==m&&(C.subarray?C=C.subarray(0,m):C.length=m),r.applyFromCharCode(C)})(c=r.transformTo(o.uint8array?"uint8array":"array",c))},r.inherits(g,l),g.prototype.processChunk=function(c){var v=r.transformTo(o.uint8array?"uint8array":"array",c.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var h=v;(v=new Uint8Array(h.length+this.leftOver.length)).set(this.leftOver,0),v.set(h,this.leftOver.length)}else v=this.leftOver.concat(v);this.leftOver=null}var m=(function(w,E){var C;for((E=E||w.length)>w.length&&(E=w.length),C=E-1;0<=C&&(192&w[C])==128;)C--;return C<0||C===0?E:C+f[w[C]]>E?C:E})(v),p=v;m!==v.length&&(o.uint8array?(p=v.subarray(0,m),this.leftOver=v.subarray(m,v.length)):(p=v.slice(0,m),this.leftOver=v.slice(m,v.length))),this.push({data:a.utf8decode(p),meta:c.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=g,r.inherits(y,l),y.prototype.processChunk=function(c){this.push({data:a.utf8encode(c.data),meta:c.meta})},a.Utf8EncodeWorker=y},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,u,a){var r=t("./support"),o=t("./base64"),n=t("./nodejsUtils"),l=t("./external");function f(h){return h}function b(h,m){for(var p=0;p<h.length;++p)m[p]=255&h.charCodeAt(p);return m}t("setimmediate"),a.newBlob=function(h,m){a.checkSupport("blob");try{return new Blob([h],{type:m})}catch{try{var p=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return p.append(h),p.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(h,m,p){var w=[],E=0,C=h.length;if(C<=p)return String.fromCharCode.apply(null,h);for(;E<C;)m==="array"||m==="nodebuffer"?w.push(String.fromCharCode.apply(null,h.slice(E,Math.min(E+p,C)))):w.push(String.fromCharCode.apply(null,h.subarray(E,Math.min(E+p,C)))),E+=p;return w.join("")},stringifyByChar:function(h){for(var m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);return m},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,n.allocBuffer(1)).length===1}catch{return!1}})()}};function y(h){var m=65536,p=a.getTypeOf(h),w=!0;if(p==="uint8array"?w=g.applyCanBeUsed.uint8array:p==="nodebuffer"&&(w=g.applyCanBeUsed.nodebuffer),w)for(;1<m;)try{return g.stringifyByChunk(h,p,m)}catch{m=Math.floor(m/2)}return g.stringifyByChar(h)}function c(h,m){for(var p=0;p<h.length;p++)m[p]=h[p];return m}a.applyFromCharCode=y;var v={};v.string={string:f,array:function(h){return b(h,new Array(h.length))},arraybuffer:function(h){return v.string.uint8array(h).buffer},uint8array:function(h){return b(h,new Uint8Array(h.length))},nodebuffer:function(h){return b(h,n.allocBuffer(h.length))}},v.array={string:y,array:f,arraybuffer:function(h){return new Uint8Array(h).buffer},uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return n.newBufferFrom(h)}},v.arraybuffer={string:function(h){return y(new Uint8Array(h))},array:function(h){return c(new Uint8Array(h),new Array(h.byteLength))},arraybuffer:f,uint8array:function(h){return new Uint8Array(h)},nodebuffer:function(h){return n.newBufferFrom(new Uint8Array(h))}},v.uint8array={string:y,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return h.buffer},uint8array:f,nodebuffer:function(h){return n.newBufferFrom(h)}},v.nodebuffer={string:y,array:function(h){return c(h,new Array(h.length))},arraybuffer:function(h){return v.nodebuffer.uint8array(h).buffer},uint8array:function(h){return c(h,new Uint8Array(h.length))},nodebuffer:f},a.transformTo=function(h,m){if(m=m||"",!h)return m;a.checkSupport(h);var p=a.getTypeOf(m);return v[p][h](m)},a.resolve=function(h){for(var m=h.split("/"),p=[],w=0;w<m.length;w++){var E=m[w];E==="."||E===""&&w!==0&&w!==m.length-1||(E===".."?p.pop():p.push(E))}return p.join("/")},a.getTypeOf=function(h){return typeof h=="string"?"string":Object.prototype.toString.call(h)==="[object Array]"?"array":r.nodebuffer&&n.isBuffer(h)?"nodebuffer":r.uint8array&&h instanceof Uint8Array?"uint8array":r.arraybuffer&&h instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(h){if(!r[h.toLowerCase()])throw new Error(h+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(h){var m,p,w="";for(p=0;p<(h||"").length;p++)w+="\\x"+((m=h.charCodeAt(p))<16?"0":"")+m.toString(16).toUpperCase();return w},a.delay=function(h,m,p){setImmediate(function(){h.apply(p||null,m||[])})},a.inherits=function(h,m){function p(){}p.prototype=m.prototype,h.prototype=new p},a.extend=function(){var h,m,p={};for(h=0;h<arguments.length;h++)for(m in arguments[h])Object.prototype.hasOwnProperty.call(arguments[h],m)&&p[m]===void 0&&(p[m]=arguments[h][m]);return p},a.prepareContent=function(h,m,p,w,E){return l.Promise.resolve(m).then(function(C){return r.blob&&(C instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(C))!==-1)&&typeof FileReader<"u"?new l.Promise(function(T,z){var S=new FileReader;S.onload=function(F){T(F.target.result)},S.onerror=function(F){z(F.target.error)},S.readAsArrayBuffer(C)}):C}).then(function(C){var T=a.getTypeOf(C);return T?(T==="arraybuffer"?C=a.transformTo("uint8array",C):T==="string"&&(E?C=o.decode(C):p&&w!==!0&&(C=(function(z){return b(z,r.uint8array?new Uint8Array(z.length):new Array(z.length))})(C))),C):l.Promise.reject(new Error("Can't read the data of '"+h+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,u,a){var r=t("./reader/readerFor"),o=t("./utils"),n=t("./signature"),l=t("./zipEntry"),f=t("./support");function b(g){this.files=[],this.loadOptions=g}b.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var y=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(y)+", expected "+o.pretty(g)+")")}},isSignature:function(g,y){var c=this.reader.index;this.reader.setIndex(g);var v=this.reader.readString(4)===y;return this.reader.setIndex(c),v},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),y=f.uint8array?"uint8array":"array",c=o.transformTo(y,g);this.zipComment=this.loadOptions.decodeFileName(c)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,y,c,v=this.zip64EndOfCentralSize-44;0<v;)g=this.reader.readInt(2),y=this.reader.readInt(4),c=this.reader.readData(y),this.zip64ExtensibleData[g]={id:g,length:y,value:c}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,y;for(g=0;g<this.files.length;g++)y=this.files[g],this.reader.setIndex(y.localHeaderOffset),this.checkSignature(n.LOCAL_FILE_HEADER),y.readLocalPart(this.reader),y.handleUTF8(),y.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(n.CENTRAL_FILE_HEADER);)(g=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(n.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,n.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var y=g;if(this.checkSignature(n.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,n.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(n.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var c=this.centralDirOffset+this.centralDirSize;this.zip64&&(c+=20,c+=12+this.zip64EndOfCentralSize);var v=y-c;if(0<v)this.isSignature(y,n.CENTRAL_FILE_HEADER)||(this.reader.zero=v);else if(v<0)throw new Error("Corrupted zip: missing "+Math.abs(v)+" bytes.")},prepareReader:function(g){this.reader=r(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,u,a){var r=t("./reader/readerFor"),o=t("./utils"),n=t("./compressedObject"),l=t("./crc32"),f=t("./utf8"),b=t("./compressions"),g=t("./support");function y(c,v){this.options=c,this.loadOptions=v}y.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(c){var v,h;if(c.skip(22),this.fileNameLength=c.readInt(2),h=c.readInt(2),this.fileName=c.readData(this.fileNameLength),c.skip(h),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((v=(function(m){for(var p in b)if(Object.prototype.hasOwnProperty.call(b,p)&&b[p].magic===m)return b[p];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new n(this.compressedSize,this.uncompressedSize,this.crc32,v,c.readData(this.compressedSize))},readCentralPart:function(c){this.versionMadeBy=c.readInt(2),c.skip(2),this.bitFlag=c.readInt(2),this.compressionMethod=c.readString(2),this.date=c.readDate(),this.crc32=c.readInt(4),this.compressedSize=c.readInt(4),this.uncompressedSize=c.readInt(4);var v=c.readInt(2);if(this.extraFieldsLength=c.readInt(2),this.fileCommentLength=c.readInt(2),this.diskNumberStart=c.readInt(2),this.internalFileAttributes=c.readInt(2),this.externalFileAttributes=c.readInt(4),this.localHeaderOffset=c.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");c.skip(v),this.readExtraFields(c),this.parseZIP64ExtraField(c),this.fileComment=c.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var c=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),c==0&&(this.dosPermissions=63&this.externalFileAttributes),c==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var c=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=c.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=c.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=c.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=c.readInt(4))}},readExtraFields:function(c){var v,h,m,p=c.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});c.index+4<p;)v=c.readInt(2),h=c.readInt(2),m=c.readData(h),this.extraFields[v]={id:v,length:h,value:m};c.setIndex(p)},handleUTF8:function(){var c=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var v=this.findExtraFieldUnicodePath();if(v!==null)this.fileNameStr=v;else{var h=o.transformTo(c,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(h)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var p=o.transformTo(c,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(p)}}},findExtraFieldUnicodePath:function(){var c=this.extraFields[28789];if(c){var v=r(c.value);return v.readInt(1)!==1||l(this.fileName)!==v.readInt(4)?null:f.utf8decode(v.readData(c.length-5))}return null},findExtraFieldUnicodeComment:function(){var c=this.extraFields[25461];if(c){var v=r(c.value);return v.readInt(1)!==1||l(this.fileComment)!==v.readInt(4)?null:f.utf8decode(v.readData(c.length-5))}return null}},u.exports=y},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,u,a){function r(v,h,m){this.name=v,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=h,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=t("./stream/StreamHelper"),n=t("./stream/DataWorker"),l=t("./utf8"),f=t("./compressedObject"),b=t("./stream/GenericWorker");r.prototype={internalStream:function(v){var h=null,m="string";try{if(!v)throw new Error("No output type specified.");var p=(m=v.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),h=this._decompressWorker();var w=!this._dataBinary;w&&!p&&(h=h.pipe(new l.Utf8EncodeWorker)),!w&&p&&(h=h.pipe(new l.Utf8DecodeWorker))}catch(E){(h=new b("error")).error(E)}return new o(h,m,"")},async:function(v,h){return this.internalStream(v).accumulate(h)},nodeStream:function(v,h){return this.internalStream(v||"nodebuffer").toNodejsStream(h)},_compressWorker:function(v,h){if(this._data instanceof f&&this._data.compression.magic===v.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new l.Utf8EncodeWorker)),f.createWorkerFrom(m,v,h)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof b?this._data:new n(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],y=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},c=0;c<g.length;c++)r.prototype[g[c]]=y;u.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,u,a){(function(r){var o,n,l=r.MutationObserver||r.WebKitMutationObserver;if(l){var f=0,b=new l(v),g=r.document.createTextNode("");b.observe(g,{characterData:!0}),o=function(){g.data=f=++f%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var h=r.document.createElement("script");h.onreadystatechange=function(){v(),h.onreadystatechange=null,h.parentNode.removeChild(h),h=null},r.document.documentElement.appendChild(h)}:function(){setTimeout(v,0)};else{var y=new r.MessageChannel;y.port1.onmessage=v,o=function(){y.port2.postMessage(0)}}var c=[];function v(){var h,m;n=!0;for(var p=c.length;p;){for(m=c,c=[],h=-1;++h<p;)m[h]();p=c.length}n=!1}u.exports=function(h){c.push(h)!==1||n||o()}}).call(this,typeof te<"u"?te:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,u,a){var r=t("immediate");function o(){}var n={},l=["REJECTED"],f=["FULFILLED"],b=["PENDING"];function g(p){if(typeof p!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,p!==o&&h(this,p)}function y(p,w,E){this.promise=p,typeof w=="function"&&(this.onFulfilled=w,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function c(p,w,E){r(function(){var C;try{C=w(E)}catch(T){return n.reject(p,T)}C===p?n.reject(p,new TypeError("Cannot resolve promise with itself")):n.resolve(p,C)})}function v(p){var w=p&&p.then;if(p&&(typeof p=="object"||typeof p=="function")&&typeof w=="function")return function(){w.apply(p,arguments)}}function h(p,w){var E=!1;function C(S){E||(E=!0,n.reject(p,S))}function T(S){E||(E=!0,n.resolve(p,S))}var z=m(function(){w(T,C)});z.status==="error"&&C(z.value)}function m(p,w){var E={};try{E.value=p(w),E.status="success"}catch(C){E.status="error",E.value=C}return E}(u.exports=g).prototype.finally=function(p){if(typeof p!="function")return this;var w=this.constructor;return this.then(function(E){return w.resolve(p()).then(function(){return E})},function(E){return w.resolve(p()).then(function(){throw E})})},g.prototype.catch=function(p){return this.then(null,p)},g.prototype.then=function(p,w){if(typeof p!="function"&&this.state===f||typeof w!="function"&&this.state===l)return this;var E=new this.constructor(o);return this.state!==b?c(E,this.state===f?p:w,this.outcome):this.queue.push(new y(E,p,w)),E},y.prototype.callFulfilled=function(p){n.resolve(this.promise,p)},y.prototype.otherCallFulfilled=function(p){c(this.promise,this.onFulfilled,p)},y.prototype.callRejected=function(p){n.reject(this.promise,p)},y.prototype.otherCallRejected=function(p){c(this.promise,this.onRejected,p)},n.resolve=function(p,w){var E=m(v,w);if(E.status==="error")return n.reject(p,E.value);var C=E.value;if(C)h(p,C);else{p.state=f,p.outcome=w;for(var T=-1,z=p.queue.length;++T<z;)p.queue[T].callFulfilled(w)}return p},n.reject=function(p,w){p.state=l,p.outcome=w;for(var E=-1,C=p.queue.length;++E<C;)p.queue[E].callRejected(w);return p},g.resolve=function(p){return p instanceof this?p:n.resolve(new this(o),p)},g.reject=function(p){var w=new this(o);return n.reject(w,p)},g.all=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=p.length,C=!1;if(!E)return this.resolve([]);for(var T=new Array(E),z=0,S=-1,F=new this(o);++S<E;)I(p[S],S);return F;function I(U,K){w.resolve(U).then(function(x){T[K]=x,++z!==E||C||(C=!0,n.resolve(F,T))},function(x){C||(C=!0,n.reject(F,x))})}},g.race=function(p){var w=this;if(Object.prototype.toString.call(p)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=p.length,C=!1;if(!E)return this.resolve([]);for(var T=-1,z=new this(o);++T<E;)S=p[T],w.resolve(S).then(function(F){C||(C=!0,n.resolve(z,F))},function(F){C||(C=!0,n.reject(z,F))});var S;return z}},{immediate:36}],38:[function(t,u,a){var r={};(0,t("./lib/utils/common").assign)(r,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),u.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,u,a){var r=t("./zlib/deflate"),o=t("./utils/common"),n=t("./utils/strings"),l=t("./zlib/messages"),f=t("./zlib/zstream"),b=Object.prototype.toString,g=0,y=-1,c=0,v=8;function h(p){if(!(this instanceof h))return new h(p);this.options=o.assign({level:y,method:v,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},p||{});var w=this.options;w.raw&&0<w.windowBits?w.windowBits=-w.windowBits:w.gzip&&0<w.windowBits&&w.windowBits<16&&(w.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var E=r.deflateInit2(this.strm,w.level,w.method,w.windowBits,w.memLevel,w.strategy);if(E!==g)throw new Error(l[E]);if(w.header&&r.deflateSetHeader(this.strm,w.header),w.dictionary){var C;if(C=typeof w.dictionary=="string"?n.string2buf(w.dictionary):b.call(w.dictionary)==="[object ArrayBuffer]"?new Uint8Array(w.dictionary):w.dictionary,(E=r.deflateSetDictionary(this.strm,C))!==g)throw new Error(l[E]);this._dict_set=!0}}function m(p,w){var E=new h(w);if(E.push(p,!0),E.err)throw E.msg||l[E.err];return E.result}h.prototype.push=function(p,w){var E,C,T=this.strm,z=this.options.chunkSize;if(this.ended)return!1;C=w===~~w?w:w===!0?4:0,typeof p=="string"?T.input=n.string2buf(p):b.call(p)==="[object ArrayBuffer]"?T.input=new Uint8Array(p):T.input=p,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(z),T.next_out=0,T.avail_out=z),(E=r.deflate(T,C))!==1&&E!==g)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||C!==4&&C!==2)||(this.options.to==="string"?this.onData(n.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return C===4?(E=r.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===g):C!==2||(this.onEnd(g),!(T.avail_out=0))},h.prototype.onData=function(p){this.chunks.push(p)},h.prototype.onEnd=function(p){p===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=p,this.msg=this.strm.msg},a.Deflate=h,a.deflate=m,a.deflateRaw=function(p,w){return(w=w||{}).raw=!0,m(p,w)},a.gzip=function(p,w){return(w=w||{}).gzip=!0,m(p,w)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,u,a){var r=t("./zlib/inflate"),o=t("./utils/common"),n=t("./utils/strings"),l=t("./zlib/constants"),f=t("./zlib/messages"),b=t("./zlib/zstream"),g=t("./zlib/gzheader"),y=Object.prototype.toString;function c(h){if(!(this instanceof c))return new c(h);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},h||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||h&&h.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var p=r.inflateInit2(this.strm,m.windowBits);if(p!==l.Z_OK)throw new Error(f[p]);this.header=new g,r.inflateGetHeader(this.strm,this.header)}function v(h,m){var p=new c(m);if(p.push(h,!0),p.err)throw p.msg||f[p.err];return p.result}c.prototype.push=function(h,m){var p,w,E,C,T,z,S=this.strm,F=this.options.chunkSize,I=this.options.dictionary,U=!1;if(this.ended)return!1;w=m===~~m?m:m===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof h=="string"?S.input=n.binstring2buf(h):y.call(h)==="[object ArrayBuffer]"?S.input=new Uint8Array(h):S.input=h,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(F),S.next_out=0,S.avail_out=F),(p=r.inflate(S,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&I&&(z=typeof I=="string"?n.string2buf(I):y.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,p=r.inflateSetDictionary(this.strm,z)),p===l.Z_BUF_ERROR&&U===!0&&(p=l.Z_OK,U=!1),p!==l.Z_STREAM_END&&p!==l.Z_OK)return this.onEnd(p),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&p!==l.Z_STREAM_END&&(S.avail_in!==0||w!==l.Z_FINISH&&w!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=n.utf8border(S.output,S.next_out),C=S.next_out-E,T=n.buf2string(S.output,E),S.next_out=C,S.avail_out=F-C,C&&o.arraySet(S.output,S.output,E,C,0),this.onData(T)):this.onData(o.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(U=!0)}while((0<S.avail_in||S.avail_out===0)&&p!==l.Z_STREAM_END);return p===l.Z_STREAM_END&&(w=l.Z_FINISH),w===l.Z_FINISH?(p=r.inflateEnd(this.strm),this.onEnd(p),this.ended=!0,p===l.Z_OK):w!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(S.avail_out=0))},c.prototype.onData=function(h){this.chunks.push(h)},c.prototype.onEnd=function(h){h===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=h,this.msg=this.strm.msg},a.Inflate=c,a.inflate=v,a.inflateRaw=function(h,m){return(m=m||{}).raw=!0,v(h,m)},a.ungzip=v},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,u,a){var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(l){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var b=f.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var g in b)b.hasOwnProperty(g)&&(l[g]=b[g])}}return l},a.shrinkBuf=function(l,f){return l.length===f?l:l.subarray?l.subarray(0,f):(l.length=f,l)};var o={arraySet:function(l,f,b,g,y){if(f.subarray&&l.subarray)l.set(f.subarray(b,b+g),y);else for(var c=0;c<g;c++)l[y+c]=f[b+c]},flattenChunks:function(l){var f,b,g,y,c,v;for(f=g=0,b=l.length;f<b;f++)g+=l[f].length;for(v=new Uint8Array(g),f=y=0,b=l.length;f<b;f++)c=l[f],v.set(c,y),y+=c.length;return v}},n={arraySet:function(l,f,b,g,y){for(var c=0;c<g;c++)l[y+c]=f[b+c]},flattenChunks:function(l){return[].concat.apply([],l)}};a.setTyped=function(l){l?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,o)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,n))},a.setTyped(r)},{}],42:[function(t,u,a){var r=t("./common"),o=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var l=new r.Buf8(256),f=0;f<256;f++)l[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function b(g,y){if(y<65537&&(g.subarray&&n||!g.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(g,y));for(var c="",v=0;v<y;v++)c+=String.fromCharCode(g[v]);return c}l[254]=l[254]=1,a.string2buf=function(g){var y,c,v,h,m,p=g.length,w=0;for(h=0;h<p;h++)(64512&(c=g.charCodeAt(h)))==55296&&h+1<p&&(64512&(v=g.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(v-56320),h++),w+=c<128?1:c<2048?2:c<65536?3:4;for(y=new r.Buf8(w),h=m=0;m<w;h++)(64512&(c=g.charCodeAt(h)))==55296&&h+1<p&&(64512&(v=g.charCodeAt(h+1)))==56320&&(c=65536+(c-55296<<10)+(v-56320),h++),c<128?y[m++]=c:(c<2048?y[m++]=192|c>>>6:(c<65536?y[m++]=224|c>>>12:(y[m++]=240|c>>>18,y[m++]=128|c>>>12&63),y[m++]=128|c>>>6&63),y[m++]=128|63&c);return y},a.buf2binstring=function(g){return b(g,g.length)},a.binstring2buf=function(g){for(var y=new r.Buf8(g.length),c=0,v=y.length;c<v;c++)y[c]=g.charCodeAt(c);return y},a.buf2string=function(g,y){var c,v,h,m,p=y||g.length,w=new Array(2*p);for(c=v=0;c<p;)if((h=g[c++])<128)w[v++]=h;else if(4<(m=l[h]))w[v++]=65533,c+=m-1;else{for(h&=m===2?31:m===3?15:7;1<m&&c<p;)h=h<<6|63&g[c++],m--;1<m?w[v++]=65533:h<65536?w[v++]=h:(h-=65536,w[v++]=55296|h>>10&1023,w[v++]=56320|1023&h)}return b(w,v)},a.utf8border=function(g,y){var c;for((y=y||g.length)>g.length&&(y=g.length),c=y-1;0<=c&&(192&g[c])==128;)c--;return c<0||c===0?y:c+l[g[c]]>y?c:y}},{"./common":41}],43:[function(t,u,a){u.exports=function(r,o,n,l){for(var f=65535&r|0,b=r>>>16&65535|0,g=0;n!==0;){for(n-=g=2e3<n?2e3:n;b=b+(f=f+o[l++]|0)|0,--g;);f%=65521,b%=65521}return f|b<<16|0}},{}],44:[function(t,u,a){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,u,a){var r=(function(){for(var o,n=[],l=0;l<256;l++){o=l;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;n[l]=o}return n})();u.exports=function(o,n,l,f){var b=r,g=f+l;o^=-1;for(var y=f;y<g;y++)o=o>>>8^b[255&(o^n[y])];return-1^o}},{}],46:[function(t,u,a){var r,o=t("../utils/common"),n=t("./trees"),l=t("./adler32"),f=t("./crc32"),b=t("./messages"),g=0,y=4,c=0,v=-2,h=-1,m=4,p=2,w=8,E=9,C=286,T=30,z=19,S=2*C+1,F=15,I=3,U=258,K=U+I+1,x=42,R=113,d=1,M=2,Q=3,W=4;function et(s,L){return s.msg=b[L],L}function V(s){return(s<<1)-(4<s?9:0)}function J(s){for(var L=s.length;0<=--L;)s[L]=0}function P(s){var L=s.state,B=L.pending;B>s.avail_out&&(B=s.avail_out),B!==0&&(o.arraySet(s.output,L.pending_buf,L.pending_out,B,s.next_out),s.next_out+=B,L.pending_out+=B,s.total_out+=B,s.avail_out-=B,L.pending-=B,L.pending===0&&(L.pending_out=0))}function O(s,L){n._tr_flush_block(s,0<=s.block_start?s.block_start:-1,s.strstart-s.block_start,L),s.block_start=s.strstart,P(s.strm)}function $(s,L){s.pending_buf[s.pending++]=L}function D(s,L){s.pending_buf[s.pending++]=L>>>8&255,s.pending_buf[s.pending++]=255&L}function Y(s,L){var B,k,_=s.max_chain_length,A=s.strstart,j=s.prev_length,Z=s.nice_match,N=s.strstart>s.w_size-K?s.strstart-(s.w_size-K):0,H=s.window,G=s.w_mask,X=s.prev,q=s.strstart+U,ot=H[A+j-1],it=H[A+j];s.prev_length>=s.good_match&&(_>>=2),Z>s.lookahead&&(Z=s.lookahead);do if(H[(B=L)+j]===it&&H[B+j-1]===ot&&H[B]===H[A]&&H[++B]===H[A+1]){A+=2,B++;do;while(H[++A]===H[++B]&&H[++A]===H[++B]&&H[++A]===H[++B]&&H[++A]===H[++B]&&H[++A]===H[++B]&&H[++A]===H[++B]&&H[++A]===H[++B]&&H[++A]===H[++B]&&A<q);if(k=U-(q-A),A=q-U,j<k){if(s.match_start=L,Z<=(j=k))break;ot=H[A+j-1],it=H[A+j]}}while((L=X[L&G])>N&&--_!=0);return j<=s.lookahead?j:s.lookahead}function ft(s){var L,B,k,_,A,j,Z,N,H,G,X=s.w_size;do{if(_=s.window_size-s.lookahead-s.strstart,s.strstart>=X+(X-K)){for(o.arraySet(s.window,s.window,X,X,0),s.match_start-=X,s.strstart-=X,s.block_start-=X,L=B=s.hash_size;k=s.head[--L],s.head[L]=X<=k?k-X:0,--B;);for(L=B=X;k=s.prev[--L],s.prev[L]=X<=k?k-X:0,--B;);_+=X}if(s.strm.avail_in===0)break;if(j=s.strm,Z=s.window,N=s.strstart+s.lookahead,H=_,G=void 0,G=j.avail_in,H<G&&(G=H),B=G===0?0:(j.avail_in-=G,o.arraySet(Z,j.input,j.next_in,G,N),j.state.wrap===1?j.adler=l(j.adler,Z,G,N):j.state.wrap===2&&(j.adler=f(j.adler,Z,G,N)),j.next_in+=G,j.total_in+=G,G),s.lookahead+=B,s.lookahead+s.insert>=I)for(A=s.strstart-s.insert,s.ins_h=s.window[A],s.ins_h=(s.ins_h<<s.hash_shift^s.window[A+1])&s.hash_mask;s.insert&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[A+I-1])&s.hash_mask,s.prev[A&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=A,A++,s.insert--,!(s.lookahead+s.insert<I)););}while(s.lookahead<K&&s.strm.avail_in!==0)}function vt(s,L){for(var B,k;;){if(s.lookahead<K){if(ft(s),s.lookahead<K&&L===g)return d;if(s.lookahead===0)break}if(B=0,s.lookahead>=I&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+I-1])&s.hash_mask,B=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),B!==0&&s.strstart-B<=s.w_size-K&&(s.match_length=Y(s,B)),s.match_length>=I)if(k=n._tr_tally(s,s.strstart-s.match_start,s.match_length-I),s.lookahead-=s.match_length,s.match_length<=s.max_lazy_match&&s.lookahead>=I){for(s.match_length--;s.strstart++,s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+I-1])&s.hash_mask,B=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart,--s.match_length!=0;);s.strstart++}else s.strstart+=s.match_length,s.match_length=0,s.ins_h=s.window[s.strstart],s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+1])&s.hash_mask;else k=n._tr_tally(s,0,s.window[s.strstart]),s.lookahead--,s.strstart++;if(k&&(O(s,!1),s.strm.avail_out===0))return d}return s.insert=s.strstart<I-1?s.strstart:I-1,L===y?(O(s,!0),s.strm.avail_out===0?Q:W):s.last_lit&&(O(s,!1),s.strm.avail_out===0)?d:M}function st(s,L){for(var B,k,_;;){if(s.lookahead<K){if(ft(s),s.lookahead<K&&L===g)return d;if(s.lookahead===0)break}if(B=0,s.lookahead>=I&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+I-1])&s.hash_mask,B=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),s.prev_length=s.match_length,s.prev_match=s.match_start,s.match_length=I-1,B!==0&&s.prev_length<s.max_lazy_match&&s.strstart-B<=s.w_size-K&&(s.match_length=Y(s,B),s.match_length<=5&&(s.strategy===1||s.match_length===I&&4096<s.strstart-s.match_start)&&(s.match_length=I-1)),s.prev_length>=I&&s.match_length<=s.prev_length){for(_=s.strstart+s.lookahead-I,k=n._tr_tally(s,s.strstart-1-s.prev_match,s.prev_length-I),s.lookahead-=s.prev_length-1,s.prev_length-=2;++s.strstart<=_&&(s.ins_h=(s.ins_h<<s.hash_shift^s.window[s.strstart+I-1])&s.hash_mask,B=s.prev[s.strstart&s.w_mask]=s.head[s.ins_h],s.head[s.ins_h]=s.strstart),--s.prev_length!=0;);if(s.match_available=0,s.match_length=I-1,s.strstart++,k&&(O(s,!1),s.strm.avail_out===0))return d}else if(s.match_available){if((k=n._tr_tally(s,0,s.window[s.strstart-1]))&&O(s,!1),s.strstart++,s.lookahead--,s.strm.avail_out===0)return d}else s.match_available=1,s.strstart++,s.lookahead--}return s.match_available&&(k=n._tr_tally(s,0,s.window[s.strstart-1]),s.match_available=0),s.insert=s.strstart<I-1?s.strstart:I-1,L===y?(O(s,!0),s.strm.avail_out===0?Q:W):s.last_lit&&(O(s,!1),s.strm.avail_out===0)?d:M}function at(s,L,B,k,_){this.good_length=s,this.max_lazy=L,this.nice_length=B,this.max_chain=k,this.func=_}function gt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=w,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*S),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*z+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(F+1),this.heap=new o.Buf16(2*C+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*C+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ht(s){var L;return s&&s.state?(s.total_in=s.total_out=0,s.data_type=p,(L=s.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?x:R,s.adler=L.wrap===2?0:1,L.last_flush=g,n._tr_init(L),c):et(s,v)}function Tt(s){var L=ht(s);return L===c&&(function(B){B.window_size=2*B.w_size,J(B.head),B.max_lazy_match=r[B.level].max_lazy,B.good_match=r[B.level].good_length,B.nice_match=r[B.level].nice_length,B.max_chain_length=r[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=I-1,B.match_available=0,B.ins_h=0})(s.state),L}function Et(s,L,B,k,_,A){if(!s)return v;var j=1;if(L===h&&(L=6),k<0?(j=0,k=-k):15<k&&(j=2,k-=16),_<1||E<_||B!==w||k<8||15<k||L<0||9<L||A<0||m<A)return et(s,v);k===8&&(k=9);var Z=new gt;return(s.state=Z).strm=s,Z.wrap=j,Z.gzhead=null,Z.w_bits=k,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=_+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+I-1)/I),Z.window=new o.Buf8(2*Z.w_size),Z.head=new o.Buf16(Z.hash_size),Z.prev=new o.Buf16(Z.w_size),Z.lit_bufsize=1<<_+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new o.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=L,Z.strategy=A,Z.method=B,Tt(s)}r=[new at(0,0,0,0,function(s,L){var B=65535;for(B>s.pending_buf_size-5&&(B=s.pending_buf_size-5);;){if(s.lookahead<=1){if(ft(s),s.lookahead===0&&L===g)return d;if(s.lookahead===0)break}s.strstart+=s.lookahead,s.lookahead=0;var k=s.block_start+B;if((s.strstart===0||s.strstart>=k)&&(s.lookahead=s.strstart-k,s.strstart=k,O(s,!1),s.strm.avail_out===0)||s.strstart-s.block_start>=s.w_size-K&&(O(s,!1),s.strm.avail_out===0))return d}return s.insert=0,L===y?(O(s,!0),s.strm.avail_out===0?Q:W):(s.strstart>s.block_start&&(O(s,!1),s.strm.avail_out),d)}),new at(4,4,8,4,vt),new at(4,5,16,8,vt),new at(4,6,32,32,vt),new at(4,4,16,16,st),new at(8,16,32,32,st),new at(8,16,128,128,st),new at(8,32,128,256,st),new at(32,128,258,1024,st),new at(32,258,258,4096,st)],a.deflateInit=function(s,L){return Et(s,L,w,15,8,0)},a.deflateInit2=Et,a.deflateReset=Tt,a.deflateResetKeep=ht,a.deflateSetHeader=function(s,L){return s&&s.state?s.state.wrap!==2?v:(s.state.gzhead=L,c):v},a.deflate=function(s,L){var B,k,_,A;if(!s||!s.state||5<L||L<0)return s?et(s,v):v;if(k=s.state,!s.output||!s.input&&s.avail_in!==0||k.status===666&&L!==y)return et(s,s.avail_out===0?-5:v);if(k.strm=s,B=k.last_flush,k.last_flush=L,k.status===x)if(k.wrap===2)s.adler=0,$(k,31),$(k,139),$(k,8),k.gzhead?($(k,(k.gzhead.text?1:0)+(k.gzhead.hcrc?2:0)+(k.gzhead.extra?4:0)+(k.gzhead.name?8:0)+(k.gzhead.comment?16:0)),$(k,255&k.gzhead.time),$(k,k.gzhead.time>>8&255),$(k,k.gzhead.time>>16&255),$(k,k.gzhead.time>>24&255),$(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),$(k,255&k.gzhead.os),k.gzhead.extra&&k.gzhead.extra.length&&($(k,255&k.gzhead.extra.length),$(k,k.gzhead.extra.length>>8&255)),k.gzhead.hcrc&&(s.adler=f(s.adler,k.pending_buf,k.pending,0)),k.gzindex=0,k.status=69):($(k,0),$(k,0),$(k,0),$(k,0),$(k,0),$(k,k.level===9?2:2<=k.strategy||k.level<2?4:0),$(k,3),k.status=R);else{var j=w+(k.w_bits-8<<4)<<8;j|=(2<=k.strategy||k.level<2?0:k.level<6?1:k.level===6?2:3)<<6,k.strstart!==0&&(j|=32),j+=31-j%31,k.status=R,D(k,j),k.strstart!==0&&(D(k,s.adler>>>16),D(k,65535&s.adler)),s.adler=1}if(k.status===69)if(k.gzhead.extra){for(_=k.pending;k.gzindex<(65535&k.gzhead.extra.length)&&(k.pending!==k.pending_buf_size||(k.gzhead.hcrc&&k.pending>_&&(s.adler=f(s.adler,k.pending_buf,k.pending-_,_)),P(s),_=k.pending,k.pending!==k.pending_buf_size));)$(k,255&k.gzhead.extra[k.gzindex]),k.gzindex++;k.gzhead.hcrc&&k.pending>_&&(s.adler=f(s.adler,k.pending_buf,k.pending-_,_)),k.gzindex===k.gzhead.extra.length&&(k.gzindex=0,k.status=73)}else k.status=73;if(k.status===73)if(k.gzhead.name){_=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>_&&(s.adler=f(s.adler,k.pending_buf,k.pending-_,_)),P(s),_=k.pending,k.pending===k.pending_buf_size)){A=1;break}A=k.gzindex<k.gzhead.name.length?255&k.gzhead.name.charCodeAt(k.gzindex++):0,$(k,A)}while(A!==0);k.gzhead.hcrc&&k.pending>_&&(s.adler=f(s.adler,k.pending_buf,k.pending-_,_)),A===0&&(k.gzindex=0,k.status=91)}else k.status=91;if(k.status===91)if(k.gzhead.comment){_=k.pending;do{if(k.pending===k.pending_buf_size&&(k.gzhead.hcrc&&k.pending>_&&(s.adler=f(s.adler,k.pending_buf,k.pending-_,_)),P(s),_=k.pending,k.pending===k.pending_buf_size)){A=1;break}A=k.gzindex<k.gzhead.comment.length?255&k.gzhead.comment.charCodeAt(k.gzindex++):0,$(k,A)}while(A!==0);k.gzhead.hcrc&&k.pending>_&&(s.adler=f(s.adler,k.pending_buf,k.pending-_,_)),A===0&&(k.status=103)}else k.status=103;if(k.status===103&&(k.gzhead.hcrc?(k.pending+2>k.pending_buf_size&&P(s),k.pending+2<=k.pending_buf_size&&($(k,255&s.adler),$(k,s.adler>>8&255),s.adler=0,k.status=R)):k.status=R),k.pending!==0){if(P(s),s.avail_out===0)return k.last_flush=-1,c}else if(s.avail_in===0&&V(L)<=V(B)&&L!==y)return et(s,-5);if(k.status===666&&s.avail_in!==0)return et(s,-5);if(s.avail_in!==0||k.lookahead!==0||L!==g&&k.status!==666){var Z=k.strategy===2?(function(N,H){for(var G;;){if(N.lookahead===0&&(ft(N),N.lookahead===0)){if(H===g)return d;break}if(N.match_length=0,G=n._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,G&&(O(N,!1),N.strm.avail_out===0))return d}return N.insert=0,H===y?(O(N,!0),N.strm.avail_out===0?Q:W):N.last_lit&&(O(N,!1),N.strm.avail_out===0)?d:M})(k,L):k.strategy===3?(function(N,H){for(var G,X,q,ot,it=N.window;;){if(N.lookahead<=U){if(ft(N),N.lookahead<=U&&H===g)return d;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=I&&0<N.strstart&&(X=it[q=N.strstart-1])===it[++q]&&X===it[++q]&&X===it[++q]){ot=N.strstart+U;do;while(X===it[++q]&&X===it[++q]&&X===it[++q]&&X===it[++q]&&X===it[++q]&&X===it[++q]&&X===it[++q]&&X===it[++q]&&q<ot);N.match_length=U-(ot-q),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=I?(G=n._tr_tally(N,1,N.match_length-I),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(G=n._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),G&&(O(N,!1),N.strm.avail_out===0))return d}return N.insert=0,H===y?(O(N,!0),N.strm.avail_out===0?Q:W):N.last_lit&&(O(N,!1),N.strm.avail_out===0)?d:M})(k,L):r[k.level].func(k,L);if(Z!==Q&&Z!==W||(k.status=666),Z===d||Z===Q)return s.avail_out===0&&(k.last_flush=-1),c;if(Z===M&&(L===1?n._tr_align(k):L!==5&&(n._tr_stored_block(k,0,0,!1),L===3&&(J(k.head),k.lookahead===0&&(k.strstart=0,k.block_start=0,k.insert=0))),P(s),s.avail_out===0))return k.last_flush=-1,c}return L!==y?c:k.wrap<=0?1:(k.wrap===2?($(k,255&s.adler),$(k,s.adler>>8&255),$(k,s.adler>>16&255),$(k,s.adler>>24&255),$(k,255&s.total_in),$(k,s.total_in>>8&255),$(k,s.total_in>>16&255),$(k,s.total_in>>24&255)):(D(k,s.adler>>>16),D(k,65535&s.adler)),P(s),0<k.wrap&&(k.wrap=-k.wrap),k.pending!==0?c:1)},a.deflateEnd=function(s){var L;return s&&s.state?(L=s.state.status)!==x&&L!==69&&L!==73&&L!==91&&L!==103&&L!==R&&L!==666?et(s,v):(s.state=null,L===R?et(s,-3):c):v},a.deflateSetDictionary=function(s,L){var B,k,_,A,j,Z,N,H,G=L.length;if(!s||!s.state||(A=(B=s.state).wrap)===2||A===1&&B.status!==x||B.lookahead)return v;for(A===1&&(s.adler=l(s.adler,L,G,0)),B.wrap=0,G>=B.w_size&&(A===0&&(J(B.head),B.strstart=0,B.block_start=0,B.insert=0),H=new o.Buf8(B.w_size),o.arraySet(H,L,G-B.w_size,B.w_size,0),L=H,G=B.w_size),j=s.avail_in,Z=s.next_in,N=s.input,s.avail_in=G,s.next_in=0,s.input=L,ft(B);B.lookahead>=I;){for(k=B.strstart,_=B.lookahead-(I-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[k+I-1])&B.hash_mask,B.prev[k&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=k,k++,--_;);B.strstart=k,B.lookahead=I-1,ft(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=I-1,B.match_available=0,s.next_in=Z,s.input=N,s.avail_in=j,B.wrap=A,c},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,u,a){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,u,a){u.exports=function(r,o){var n,l,f,b,g,y,c,v,h,m,p,w,E,C,T,z,S,F,I,U,K,x,R,d,M;n=r.state,l=r.next_in,d=r.input,f=l+(r.avail_in-5),b=r.next_out,M=r.output,g=b-(o-r.avail_out),y=b+(r.avail_out-257),c=n.dmax,v=n.wsize,h=n.whave,m=n.wnext,p=n.window,w=n.hold,E=n.bits,C=n.lencode,T=n.distcode,z=(1<<n.lenbits)-1,S=(1<<n.distbits)-1;t:do{E<15&&(w+=d[l++]<<E,E+=8,w+=d[l++]<<E,E+=8),F=C[w&z];e:for(;;){if(w>>>=I=F>>>24,E-=I,(I=F>>>16&255)===0)M[b++]=65535&F;else{if(!(16&I)){if((64&I)==0){F=C[(65535&F)+(w&(1<<I)-1)];continue e}if(32&I){n.mode=12;break t}r.msg="invalid literal/length code",n.mode=30;break t}U=65535&F,(I&=15)&&(E<I&&(w+=d[l++]<<E,E+=8),U+=w&(1<<I)-1,w>>>=I,E-=I),E<15&&(w+=d[l++]<<E,E+=8,w+=d[l++]<<E,E+=8),F=T[w&S];r:for(;;){if(w>>>=I=F>>>24,E-=I,!(16&(I=F>>>16&255))){if((64&I)==0){F=T[(65535&F)+(w&(1<<I)-1)];continue r}r.msg="invalid distance code",n.mode=30;break t}if(K=65535&F,E<(I&=15)&&(w+=d[l++]<<E,(E+=8)<I&&(w+=d[l++]<<E,E+=8)),c<(K+=w&(1<<I)-1)){r.msg="invalid distance too far back",n.mode=30;break t}if(w>>>=I,E-=I,(I=b-g)<K){if(h<(I=K-I)&&n.sane){r.msg="invalid distance too far back",n.mode=30;break t}if(R=p,(x=0)===m){if(x+=v-I,I<U){for(U-=I;M[b++]=p[x++],--I;);x=b-K,R=M}}else if(m<I){if(x+=v+m-I,(I-=m)<U){for(U-=I;M[b++]=p[x++],--I;);if(x=0,m<U){for(U-=I=m;M[b++]=p[x++],--I;);x=b-K,R=M}}}else if(x+=m-I,I<U){for(U-=I;M[b++]=p[x++],--I;);x=b-K,R=M}for(;2<U;)M[b++]=R[x++],M[b++]=R[x++],M[b++]=R[x++],U-=3;U&&(M[b++]=R[x++],1<U&&(M[b++]=R[x++]))}else{for(x=b-K;M[b++]=M[x++],M[b++]=M[x++],M[b++]=M[x++],2<(U-=3););U&&(M[b++]=M[x++],1<U&&(M[b++]=M[x++]))}break}}break}}while(l<f&&b<y);l-=U=E>>3,w&=(1<<(E-=U<<3))-1,r.next_in=l,r.next_out=b,r.avail_in=l<f?f-l+5:5-(l-f),r.avail_out=b<y?y-b+257:257-(b-y),n.hold=w,n.bits=E}},{}],49:[function(t,u,a){var r=t("../utils/common"),o=t("./adler32"),n=t("./crc32"),l=t("./inffast"),f=t("./inftrees"),b=1,g=2,y=0,c=-2,v=1,h=852,m=592;function p(x){return(x>>>24&255)+(x>>>8&65280)+((65280&x)<<8)+((255&x)<<24)}function w(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(x){var R;return x&&x.state?(R=x.state,x.total_in=x.total_out=R.total=0,x.msg="",R.wrap&&(x.adler=1&R.wrap),R.mode=v,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new r.Buf32(h),R.distcode=R.distdyn=new r.Buf32(m),R.sane=1,R.back=-1,y):c}function C(x){var R;return x&&x.state?((R=x.state).wsize=0,R.whave=0,R.wnext=0,E(x)):c}function T(x,R){var d,M;return x&&x.state?(M=x.state,R<0?(d=0,R=-R):(d=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?c:(M.window!==null&&M.wbits!==R&&(M.window=null),M.wrap=d,M.wbits=R,C(x))):c}function z(x,R){var d,M;return x?(M=new w,(x.state=M).window=null,(d=T(x,R))!==y&&(x.state=null),d):c}var S,F,I=!0;function U(x){if(I){var R;for(S=new r.Buf32(512),F=new r.Buf32(32),R=0;R<144;)x.lens[R++]=8;for(;R<256;)x.lens[R++]=9;for(;R<280;)x.lens[R++]=7;for(;R<288;)x.lens[R++]=8;for(f(b,x.lens,0,288,S,0,x.work,{bits:9}),R=0;R<32;)x.lens[R++]=5;f(g,x.lens,0,32,F,0,x.work,{bits:5}),I=!1}x.lencode=S,x.lenbits=9,x.distcode=F,x.distbits=5}function K(x,R,d,M){var Q,W=x.state;return W.window===null&&(W.wsize=1<<W.wbits,W.wnext=0,W.whave=0,W.window=new r.Buf8(W.wsize)),M>=W.wsize?(r.arraySet(W.window,R,d-W.wsize,W.wsize,0),W.wnext=0,W.whave=W.wsize):(M<(Q=W.wsize-W.wnext)&&(Q=M),r.arraySet(W.window,R,d-M,Q,W.wnext),(M-=Q)?(r.arraySet(W.window,R,d-M,M,0),W.wnext=M,W.whave=W.wsize):(W.wnext+=Q,W.wnext===W.wsize&&(W.wnext=0),W.whave<W.wsize&&(W.whave+=Q))),0}a.inflateReset=C,a.inflateReset2=T,a.inflateResetKeep=E,a.inflateInit=function(x){return z(x,15)},a.inflateInit2=z,a.inflate=function(x,R){var d,M,Q,W,et,V,J,P,O,$,D,Y,ft,vt,st,at,gt,ht,Tt,Et,s,L,B,k,_=0,A=new r.Buf8(4),j=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!x||!x.state||!x.output||!x.input&&x.avail_in!==0)return c;(d=x.state).mode===12&&(d.mode=13),et=x.next_out,Q=x.output,J=x.avail_out,W=x.next_in,M=x.input,V=x.avail_in,P=d.hold,O=d.bits,$=V,D=J,L=y;t:for(;;)switch(d.mode){case v:if(d.wrap===0){d.mode=13;break}for(;O<16;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(2&d.wrap&&P===35615){A[d.check=0]=255&P,A[1]=P>>>8&255,d.check=n(d.check,A,2,0),O=P=0,d.mode=2;break}if(d.flags=0,d.head&&(d.head.done=!1),!(1&d.wrap)||(((255&P)<<8)+(P>>8))%31){x.msg="incorrect header check",d.mode=30;break}if((15&P)!=8){x.msg="unknown compression method",d.mode=30;break}if(O-=4,s=8+(15&(P>>>=4)),d.wbits===0)d.wbits=s;else if(s>d.wbits){x.msg="invalid window size",d.mode=30;break}d.dmax=1<<s,x.adler=d.check=1,d.mode=512&P?10:12,O=P=0;break;case 2:for(;O<16;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(d.flags=P,(255&d.flags)!=8){x.msg="unknown compression method",d.mode=30;break}if(57344&d.flags){x.msg="unknown header flags set",d.mode=30;break}d.head&&(d.head.text=P>>8&1),512&d.flags&&(A[0]=255&P,A[1]=P>>>8&255,d.check=n(d.check,A,2,0)),O=P=0,d.mode=3;case 3:for(;O<32;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}d.head&&(d.head.time=P),512&d.flags&&(A[0]=255&P,A[1]=P>>>8&255,A[2]=P>>>16&255,A[3]=P>>>24&255,d.check=n(d.check,A,4,0)),O=P=0,d.mode=4;case 4:for(;O<16;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}d.head&&(d.head.xflags=255&P,d.head.os=P>>8),512&d.flags&&(A[0]=255&P,A[1]=P>>>8&255,d.check=n(d.check,A,2,0)),O=P=0,d.mode=5;case 5:if(1024&d.flags){for(;O<16;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}d.length=P,d.head&&(d.head.extra_len=P),512&d.flags&&(A[0]=255&P,A[1]=P>>>8&255,d.check=n(d.check,A,2,0)),O=P=0}else d.head&&(d.head.extra=null);d.mode=6;case 6:if(1024&d.flags&&(V<(Y=d.length)&&(Y=V),Y&&(d.head&&(s=d.head.extra_len-d.length,d.head.extra||(d.head.extra=new Array(d.head.extra_len)),r.arraySet(d.head.extra,M,W,Y,s)),512&d.flags&&(d.check=n(d.check,M,Y,W)),V-=Y,W+=Y,d.length-=Y),d.length))break t;d.length=0,d.mode=7;case 7:if(2048&d.flags){if(V===0)break t;for(Y=0;s=M[W+Y++],d.head&&s&&d.length<65536&&(d.head.name+=String.fromCharCode(s)),s&&Y<V;);if(512&d.flags&&(d.check=n(d.check,M,Y,W)),V-=Y,W+=Y,s)break t}else d.head&&(d.head.name=null);d.length=0,d.mode=8;case 8:if(4096&d.flags){if(V===0)break t;for(Y=0;s=M[W+Y++],d.head&&s&&d.length<65536&&(d.head.comment+=String.fromCharCode(s)),s&&Y<V;);if(512&d.flags&&(d.check=n(d.check,M,Y,W)),V-=Y,W+=Y,s)break t}else d.head&&(d.head.comment=null);d.mode=9;case 9:if(512&d.flags){for(;O<16;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(P!==(65535&d.check)){x.msg="header crc mismatch",d.mode=30;break}O=P=0}d.head&&(d.head.hcrc=d.flags>>9&1,d.head.done=!0),x.adler=d.check=0,d.mode=12;break;case 10:for(;O<32;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}x.adler=d.check=p(P),O=P=0,d.mode=11;case 11:if(d.havedict===0)return x.next_out=et,x.avail_out=J,x.next_in=W,x.avail_in=V,d.hold=P,d.bits=O,2;x.adler=d.check=1,d.mode=12;case 12:if(R===5||R===6)break t;case 13:if(d.last){P>>>=7&O,O-=7&O,d.mode=27;break}for(;O<3;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}switch(d.last=1&P,O-=1,3&(P>>>=1)){case 0:d.mode=14;break;case 1:if(U(d),d.mode=20,R!==6)break;P>>>=2,O-=2;break t;case 2:d.mode=17;break;case 3:x.msg="invalid block type",d.mode=30}P>>>=2,O-=2;break;case 14:for(P>>>=7&O,O-=7&O;O<32;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if((65535&P)!=(P>>>16^65535)){x.msg="invalid stored block lengths",d.mode=30;break}if(d.length=65535&P,O=P=0,d.mode=15,R===6)break t;case 15:d.mode=16;case 16:if(Y=d.length){if(V<Y&&(Y=V),J<Y&&(Y=J),Y===0)break t;r.arraySet(Q,M,W,Y,et),V-=Y,W+=Y,J-=Y,et+=Y,d.length-=Y;break}d.mode=12;break;case 17:for(;O<14;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(d.nlen=257+(31&P),P>>>=5,O-=5,d.ndist=1+(31&P),P>>>=5,O-=5,d.ncode=4+(15&P),P>>>=4,O-=4,286<d.nlen||30<d.ndist){x.msg="too many length or distance symbols",d.mode=30;break}d.have=0,d.mode=18;case 18:for(;d.have<d.ncode;){for(;O<3;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}d.lens[j[d.have++]]=7&P,P>>>=3,O-=3}for(;d.have<19;)d.lens[j[d.have++]]=0;if(d.lencode=d.lendyn,d.lenbits=7,B={bits:d.lenbits},L=f(0,d.lens,0,19,d.lencode,0,d.work,B),d.lenbits=B.bits,L){x.msg="invalid code lengths set",d.mode=30;break}d.have=0,d.mode=19;case 19:for(;d.have<d.nlen+d.ndist;){for(;at=(_=d.lencode[P&(1<<d.lenbits)-1])>>>16&255,gt=65535&_,!((st=_>>>24)<=O);){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(gt<16)P>>>=st,O-=st,d.lens[d.have++]=gt;else{if(gt===16){for(k=st+2;O<k;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(P>>>=st,O-=st,d.have===0){x.msg="invalid bit length repeat",d.mode=30;break}s=d.lens[d.have-1],Y=3+(3&P),P>>>=2,O-=2}else if(gt===17){for(k=st+3;O<k;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}O-=st,s=0,Y=3+(7&(P>>>=st)),P>>>=3,O-=3}else{for(k=st+7;O<k;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}O-=st,s=0,Y=11+(127&(P>>>=st)),P>>>=7,O-=7}if(d.have+Y>d.nlen+d.ndist){x.msg="invalid bit length repeat",d.mode=30;break}for(;Y--;)d.lens[d.have++]=s}}if(d.mode===30)break;if(d.lens[256]===0){x.msg="invalid code -- missing end-of-block",d.mode=30;break}if(d.lenbits=9,B={bits:d.lenbits},L=f(b,d.lens,0,d.nlen,d.lencode,0,d.work,B),d.lenbits=B.bits,L){x.msg="invalid literal/lengths set",d.mode=30;break}if(d.distbits=6,d.distcode=d.distdyn,B={bits:d.distbits},L=f(g,d.lens,d.nlen,d.ndist,d.distcode,0,d.work,B),d.distbits=B.bits,L){x.msg="invalid distances set",d.mode=30;break}if(d.mode=20,R===6)break t;case 20:d.mode=21;case 21:if(6<=V&&258<=J){x.next_out=et,x.avail_out=J,x.next_in=W,x.avail_in=V,d.hold=P,d.bits=O,l(x,D),et=x.next_out,Q=x.output,J=x.avail_out,W=x.next_in,M=x.input,V=x.avail_in,P=d.hold,O=d.bits,d.mode===12&&(d.back=-1);break}for(d.back=0;at=(_=d.lencode[P&(1<<d.lenbits)-1])>>>16&255,gt=65535&_,!((st=_>>>24)<=O);){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(at&&(240&at)==0){for(ht=st,Tt=at,Et=gt;at=(_=d.lencode[Et+((P&(1<<ht+Tt)-1)>>ht)])>>>16&255,gt=65535&_,!(ht+(st=_>>>24)<=O);){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}P>>>=ht,O-=ht,d.back+=ht}if(P>>>=st,O-=st,d.back+=st,d.length=gt,at===0){d.mode=26;break}if(32&at){d.back=-1,d.mode=12;break}if(64&at){x.msg="invalid literal/length code",d.mode=30;break}d.extra=15&at,d.mode=22;case 22:if(d.extra){for(k=d.extra;O<k;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}d.length+=P&(1<<d.extra)-1,P>>>=d.extra,O-=d.extra,d.back+=d.extra}d.was=d.length,d.mode=23;case 23:for(;at=(_=d.distcode[P&(1<<d.distbits)-1])>>>16&255,gt=65535&_,!((st=_>>>24)<=O);){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if((240&at)==0){for(ht=st,Tt=at,Et=gt;at=(_=d.distcode[Et+((P&(1<<ht+Tt)-1)>>ht)])>>>16&255,gt=65535&_,!(ht+(st=_>>>24)<=O);){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}P>>>=ht,O-=ht,d.back+=ht}if(P>>>=st,O-=st,d.back+=st,64&at){x.msg="invalid distance code",d.mode=30;break}d.offset=gt,d.extra=15&at,d.mode=24;case 24:if(d.extra){for(k=d.extra;O<k;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}d.offset+=P&(1<<d.extra)-1,P>>>=d.extra,O-=d.extra,d.back+=d.extra}if(d.offset>d.dmax){x.msg="invalid distance too far back",d.mode=30;break}d.mode=25;case 25:if(J===0)break t;if(Y=D-J,d.offset>Y){if((Y=d.offset-Y)>d.whave&&d.sane){x.msg="invalid distance too far back",d.mode=30;break}ft=Y>d.wnext?(Y-=d.wnext,d.wsize-Y):d.wnext-Y,Y>d.length&&(Y=d.length),vt=d.window}else vt=Q,ft=et-d.offset,Y=d.length;for(J<Y&&(Y=J),J-=Y,d.length-=Y;Q[et++]=vt[ft++],--Y;);d.length===0&&(d.mode=21);break;case 26:if(J===0)break t;Q[et++]=d.length,J--,d.mode=21;break;case 27:if(d.wrap){for(;O<32;){if(V===0)break t;V--,P|=M[W++]<<O,O+=8}if(D-=J,x.total_out+=D,d.total+=D,D&&(x.adler=d.check=d.flags?n(d.check,Q,D,et-D):o(d.check,Q,D,et-D)),D=J,(d.flags?P:p(P))!==d.check){x.msg="incorrect data check",d.mode=30;break}O=P=0}d.mode=28;case 28:if(d.wrap&&d.flags){for(;O<32;){if(V===0)break t;V--,P+=M[W++]<<O,O+=8}if(P!==(4294967295&d.total)){x.msg="incorrect length check",d.mode=30;break}O=P=0}d.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return c}return x.next_out=et,x.avail_out=J,x.next_in=W,x.avail_in=V,d.hold=P,d.bits=O,(d.wsize||D!==x.avail_out&&d.mode<30&&(d.mode<27||R!==4))&&K(x,x.output,x.next_out,D-x.avail_out)?(d.mode=31,-4):($-=x.avail_in,D-=x.avail_out,x.total_in+=$,x.total_out+=D,d.total+=D,d.wrap&&D&&(x.adler=d.check=d.flags?n(d.check,Q,D,x.next_out-D):o(d.check,Q,D,x.next_out-D)),x.data_type=d.bits+(d.last?64:0)+(d.mode===12?128:0)+(d.mode===20||d.mode===15?256:0),($==0&&D===0||R===4)&&L===y&&(L=-5),L)},a.inflateEnd=function(x){if(!x||!x.state)return c;var R=x.state;return R.window&&(R.window=null),x.state=null,y},a.inflateGetHeader=function(x,R){var d;return x&&x.state?(2&(d=x.state).wrap)==0?c:((d.head=R).done=!1,y):c},a.inflateSetDictionary=function(x,R){var d,M=R.length;return x&&x.state?(d=x.state).wrap!==0&&d.mode!==11?c:d.mode===11&&o(1,R,M,0)!==d.check?-3:K(x,R,M,M)?(d.mode=31,-4):(d.havedict=1,y):c},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,u,a){var r=t("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],n=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(b,g,y,c,v,h,m,p){var w,E,C,T,z,S,F,I,U,K=p.bits,x=0,R=0,d=0,M=0,Q=0,W=0,et=0,V=0,J=0,P=0,O=null,$=0,D=new r.Buf16(16),Y=new r.Buf16(16),ft=null,vt=0;for(x=0;x<=15;x++)D[x]=0;for(R=0;R<c;R++)D[g[y+R]]++;for(Q=K,M=15;1<=M&&D[M]===0;M--);if(M<Q&&(Q=M),M===0)return v[h++]=20971520,v[h++]=20971520,p.bits=1,0;for(d=1;d<M&&D[d]===0;d++);for(Q<d&&(Q=d),x=V=1;x<=15;x++)if(V<<=1,(V-=D[x])<0)return-1;if(0<V&&(b===0||M!==1))return-1;for(Y[1]=0,x=1;x<15;x++)Y[x+1]=Y[x]+D[x];for(R=0;R<c;R++)g[y+R]!==0&&(m[Y[g[y+R]]++]=R);if(S=b===0?(O=ft=m,19):b===1?(O=o,$-=257,ft=n,vt-=257,256):(O=l,ft=f,-1),x=d,z=h,et=R=P=0,C=-1,T=(J=1<<(W=Q))-1,b===1&&852<J||b===2&&592<J)return 1;for(;;){for(F=x-et,U=m[R]<S?(I=0,m[R]):m[R]>S?(I=ft[vt+m[R]],O[$+m[R]]):(I=96,0),w=1<<x-et,d=E=1<<W;v[z+(P>>et)+(E-=w)]=F<<24|I<<16|U|0,E!==0;);for(w=1<<x-1;P&w;)w>>=1;if(w!==0?(P&=w-1,P+=w):P=0,R++,--D[x]==0){if(x===M)break;x=g[y+m[R]]}if(Q<x&&(P&T)!==C){for(et===0&&(et=Q),z+=d,V=1<<(W=x-et);W+et<M&&!((V-=D[W+et])<=0);)W++,V<<=1;if(J+=1<<W,b===1&&852<J||b===2&&592<J)return 1;v[C=P&T]=Q<<24|W<<16|z-h|0}}return P!==0&&(v[z+P]=x-et<<24|64<<16|0),p.bits=Q,0}},{"../utils/common":41}],51:[function(t,u,a){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,u,a){var r=t("../utils/common"),o=0,n=1;function l(_){for(var A=_.length;0<=--A;)_[A]=0}var f=0,b=29,g=256,y=g+1+b,c=30,v=19,h=2*y+1,m=15,p=16,w=7,E=256,C=16,T=17,z=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=new Array(2*(y+2));l(K);var x=new Array(2*c);l(x);var R=new Array(512);l(R);var d=new Array(256);l(d);var M=new Array(b);l(M);var Q,W,et,V=new Array(c);function J(_,A,j,Z,N){this.static_tree=_,this.extra_bits=A,this.extra_base=j,this.elems=Z,this.max_length=N,this.has_stree=_&&_.length}function P(_,A){this.dyn_tree=_,this.max_code=0,this.stat_desc=A}function O(_){return _<256?R[_]:R[256+(_>>>7)]}function $(_,A){_.pending_buf[_.pending++]=255&A,_.pending_buf[_.pending++]=A>>>8&255}function D(_,A,j){_.bi_valid>p-j?(_.bi_buf|=A<<_.bi_valid&65535,$(_,_.bi_buf),_.bi_buf=A>>p-_.bi_valid,_.bi_valid+=j-p):(_.bi_buf|=A<<_.bi_valid&65535,_.bi_valid+=j)}function Y(_,A,j){D(_,j[2*A],j[2*A+1])}function ft(_,A){for(var j=0;j|=1&_,_>>>=1,j<<=1,0<--A;);return j>>>1}function vt(_,A,j){var Z,N,H=new Array(m+1),G=0;for(Z=1;Z<=m;Z++)H[Z]=G=G+j[Z-1]<<1;for(N=0;N<=A;N++){var X=_[2*N+1];X!==0&&(_[2*N]=ft(H[X]++,X))}}function st(_){var A;for(A=0;A<y;A++)_.dyn_ltree[2*A]=0;for(A=0;A<c;A++)_.dyn_dtree[2*A]=0;for(A=0;A<v;A++)_.bl_tree[2*A]=0;_.dyn_ltree[2*E]=1,_.opt_len=_.static_len=0,_.last_lit=_.matches=0}function at(_){8<_.bi_valid?$(_,_.bi_buf):0<_.bi_valid&&(_.pending_buf[_.pending++]=_.bi_buf),_.bi_buf=0,_.bi_valid=0}function gt(_,A,j,Z){var N=2*A,H=2*j;return _[N]<_[H]||_[N]===_[H]&&Z[A]<=Z[j]}function ht(_,A,j){for(var Z=_.heap[j],N=j<<1;N<=_.heap_len&&(N<_.heap_len&&gt(A,_.heap[N+1],_.heap[N],_.depth)&&N++,!gt(A,Z,_.heap[N],_.depth));)_.heap[j]=_.heap[N],j=N,N<<=1;_.heap[j]=Z}function Tt(_,A,j){var Z,N,H,G,X=0;if(_.last_lit!==0)for(;Z=_.pending_buf[_.d_buf+2*X]<<8|_.pending_buf[_.d_buf+2*X+1],N=_.pending_buf[_.l_buf+X],X++,Z===0?Y(_,N,A):(Y(_,(H=d[N])+g+1,A),(G=S[H])!==0&&D(_,N-=M[H],G),Y(_,H=O(--Z),j),(G=F[H])!==0&&D(_,Z-=V[H],G)),X<_.last_lit;);Y(_,E,A)}function Et(_,A){var j,Z,N,H=A.dyn_tree,G=A.stat_desc.static_tree,X=A.stat_desc.has_stree,q=A.stat_desc.elems,ot=-1;for(_.heap_len=0,_.heap_max=h,j=0;j<q;j++)H[2*j]!==0?(_.heap[++_.heap_len]=ot=j,_.depth[j]=0):H[2*j+1]=0;for(;_.heap_len<2;)H[2*(N=_.heap[++_.heap_len]=ot<2?++ot:0)]=1,_.depth[N]=0,_.opt_len--,X&&(_.static_len-=G[2*N+1]);for(A.max_code=ot,j=_.heap_len>>1;1<=j;j--)ht(_,H,j);for(N=q;j=_.heap[1],_.heap[1]=_.heap[_.heap_len--],ht(_,H,1),Z=_.heap[1],_.heap[--_.heap_max]=j,_.heap[--_.heap_max]=Z,H[2*N]=H[2*j]+H[2*Z],_.depth[N]=(_.depth[j]>=_.depth[Z]?_.depth[j]:_.depth[Z])+1,H[2*j+1]=H[2*Z+1]=N,_.heap[1]=N++,ht(_,H,1),2<=_.heap_len;);_.heap[--_.heap_max]=_.heap[1],(function(it,kt){var Vt,Ct,Ht,ct,qt,oe,It=kt.dyn_tree,Ee=kt.max_code,qe=kt.stat_desc.static_tree,Je=kt.stat_desc.has_stree,Qe=kt.stat_desc.extra_bits,Te=kt.stat_desc.extra_base,Xt=kt.stat_desc.max_length,Jt=0;for(ct=0;ct<=m;ct++)it.bl_count[ct]=0;for(It[2*it.heap[it.heap_max]+1]=0,Vt=it.heap_max+1;Vt<h;Vt++)Xt<(ct=It[2*It[2*(Ct=it.heap[Vt])+1]+1]+1)&&(ct=Xt,Jt++),It[2*Ct+1]=ct,Ee<Ct||(it.bl_count[ct]++,qt=0,Te<=Ct&&(qt=Qe[Ct-Te]),oe=It[2*Ct],it.opt_len+=oe*(ct+qt),Je&&(it.static_len+=oe*(qe[2*Ct+1]+qt)));if(Jt!==0){do{for(ct=Xt-1;it.bl_count[ct]===0;)ct--;it.bl_count[ct]--,it.bl_count[ct+1]+=2,it.bl_count[Xt]--,Jt-=2}while(0<Jt);for(ct=Xt;ct!==0;ct--)for(Ct=it.bl_count[ct];Ct!==0;)Ee<(Ht=it.heap[--Vt])||(It[2*Ht+1]!==ct&&(it.opt_len+=(ct-It[2*Ht+1])*It[2*Ht],It[2*Ht+1]=ct),Ct--)}})(_,A),vt(H,ot,_.bl_count)}function s(_,A,j){var Z,N,H=-1,G=A[1],X=0,q=7,ot=4;for(G===0&&(q=138,ot=3),A[2*(j+1)+1]=65535,Z=0;Z<=j;Z++)N=G,G=A[2*(Z+1)+1],++X<q&&N===G||(X<ot?_.bl_tree[2*N]+=X:N!==0?(N!==H&&_.bl_tree[2*N]++,_.bl_tree[2*C]++):X<=10?_.bl_tree[2*T]++:_.bl_tree[2*z]++,H=N,ot=(X=0)===G?(q=138,3):N===G?(q=6,3):(q=7,4))}function L(_,A,j){var Z,N,H=-1,G=A[1],X=0,q=7,ot=4;for(G===0&&(q=138,ot=3),Z=0;Z<=j;Z++)if(N=G,G=A[2*(Z+1)+1],!(++X<q&&N===G)){if(X<ot)for(;Y(_,N,_.bl_tree),--X!=0;);else N!==0?(N!==H&&(Y(_,N,_.bl_tree),X--),Y(_,C,_.bl_tree),D(_,X-3,2)):X<=10?(Y(_,T,_.bl_tree),D(_,X-3,3)):(Y(_,z,_.bl_tree),D(_,X-11,7));H=N,ot=(X=0)===G?(q=138,3):N===G?(q=6,3):(q=7,4)}}l(V);var B=!1;function k(_,A,j,Z){D(_,(f<<1)+(Z?1:0),3),(function(N,H,G,X){at(N),$(N,G),$(N,~G),r.arraySet(N.pending_buf,N.window,H,G,N.pending),N.pending+=G})(_,A,j)}a._tr_init=function(_){B||((function(){var A,j,Z,N,H,G=new Array(m+1);for(N=Z=0;N<b-1;N++)for(M[N]=Z,A=0;A<1<<S[N];A++)d[Z++]=N;for(d[Z-1]=N,N=H=0;N<16;N++)for(V[N]=H,A=0;A<1<<F[N];A++)R[H++]=N;for(H>>=7;N<c;N++)for(V[N]=H<<7,A=0;A<1<<F[N]-7;A++)R[256+H++]=N;for(j=0;j<=m;j++)G[j]=0;for(A=0;A<=143;)K[2*A+1]=8,A++,G[8]++;for(;A<=255;)K[2*A+1]=9,A++,G[9]++;for(;A<=279;)K[2*A+1]=7,A++,G[7]++;for(;A<=287;)K[2*A+1]=8,A++,G[8]++;for(vt(K,y+1,G),A=0;A<c;A++)x[2*A+1]=5,x[2*A]=ft(A,5);Q=new J(K,S,g+1,y,m),W=new J(x,F,0,c,m),et=new J(new Array(0),I,0,v,w)})(),B=!0),_.l_desc=new P(_.dyn_ltree,Q),_.d_desc=new P(_.dyn_dtree,W),_.bl_desc=new P(_.bl_tree,et),_.bi_buf=0,_.bi_valid=0,st(_)},a._tr_stored_block=k,a._tr_flush_block=function(_,A,j,Z){var N,H,G=0;0<_.level?(_.strm.data_type===2&&(_.strm.data_type=(function(X){var q,ot=4093624447;for(q=0;q<=31;q++,ot>>>=1)if(1&ot&&X.dyn_ltree[2*q]!==0)return o;if(X.dyn_ltree[18]!==0||X.dyn_ltree[20]!==0||X.dyn_ltree[26]!==0)return n;for(q=32;q<g;q++)if(X.dyn_ltree[2*q]!==0)return n;return o})(_)),Et(_,_.l_desc),Et(_,_.d_desc),G=(function(X){var q;for(s(X,X.dyn_ltree,X.l_desc.max_code),s(X,X.dyn_dtree,X.d_desc.max_code),Et(X,X.bl_desc),q=v-1;3<=q&&X.bl_tree[2*U[q]+1]===0;q--);return X.opt_len+=3*(q+1)+5+5+4,q})(_),N=_.opt_len+3+7>>>3,(H=_.static_len+3+7>>>3)<=N&&(N=H)):N=H=j+5,j+4<=N&&A!==-1?k(_,A,j,Z):_.strategy===4||H===N?(D(_,2+(Z?1:0),3),Tt(_,K,x)):(D(_,4+(Z?1:0),3),(function(X,q,ot,it){var kt;for(D(X,q-257,5),D(X,ot-1,5),D(X,it-4,4),kt=0;kt<it;kt++)D(X,X.bl_tree[2*U[kt]+1],3);L(X,X.dyn_ltree,q-1),L(X,X.dyn_dtree,ot-1)})(_,_.l_desc.max_code+1,_.d_desc.max_code+1,G+1),Tt(_,_.dyn_ltree,_.dyn_dtree)),st(_),Z&&at(_)},a._tr_tally=function(_,A,j){return _.pending_buf[_.d_buf+2*_.last_lit]=A>>>8&255,_.pending_buf[_.d_buf+2*_.last_lit+1]=255&A,_.pending_buf[_.l_buf+_.last_lit]=255&j,_.last_lit++,A===0?_.dyn_ltree[2*j]++:(_.matches++,A--,_.dyn_ltree[2*(d[j]+g+1)]++,_.dyn_dtree[2*O(A)]++),_.last_lit===_.lit_bufsize-1},a._tr_align=function(_){D(_,2,3),Y(_,E,K),(function(A){A.bi_valid===16?($(A,A.bi_buf),A.bi_buf=0,A.bi_valid=0):8<=A.bi_valid&&(A.pending_buf[A.pending++]=255&A.bi_buf,A.bi_buf>>=8,A.bi_valid-=8)})(_)}},{"../utils/common":41}],53:[function(t,u,a){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,u,a){(function(r){(function(o,n){if(!o.setImmediate){var l,f,b,g,y=1,c={},v=!1,h=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,l={}.toString.call(o.process)==="[object process]"?function(C){process.nextTick(function(){w(C)})}:(function(){if(o.postMessage&&!o.importScripts){var C=!0,T=o.onmessage;return o.onmessage=function(){C=!1},o.postMessage("","*"),o.onmessage=T,C}})()?(g="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(C){o.postMessage(g+C,"*")}):o.MessageChannel?((b=new MessageChannel).port1.onmessage=function(C){w(C.data)},function(C){b.port2.postMessage(C)}):h&&"onreadystatechange"in h.createElement("script")?(f=h.documentElement,function(C){var T=h.createElement("script");T.onreadystatechange=function(){w(C),T.onreadystatechange=null,f.removeChild(T),T=null},f.appendChild(T)}):function(C){setTimeout(w,0,C)},m.setImmediate=function(C){typeof C!="function"&&(C=new Function(""+C));for(var T=new Array(arguments.length-1),z=0;z<T.length;z++)T[z]=arguments[z+1];var S={callback:C,args:T};return c[y]=S,l(y),y++},m.clearImmediate=p}function p(C){delete c[C]}function w(C){if(v)setTimeout(w,0,C);else{var T=c[C];if(T){v=!0;try{(function(z){var S=z.callback,F=z.args;switch(F.length){case 0:S();break;case 1:S(F[0]);break;case 2:S(F[0],F[1]);break;case 3:S(F[0],F[1],F[2]);break;default:S.apply(n,F)}})(T)}finally{p(C),v=!1}}}}function E(C){C.source===o&&typeof C.data=="string"&&C.data.indexOf(g)===0&&w(+C.data.slice(g.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof te<"u"?te:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(he)),he.exports}var hn=fn();const cn=dn(hn),Ye=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",pn=Ye+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",gn="["+Ye+"]["+pn+"]*",mn=new RegExp("^"+gn+"$");function De(i,e){const t=[];let u=e.exec(i);for(;u;){const a=[];a.startIndex=e.lastIndex-u[0].length;const r=u.length;for(let o=0;o<r;o++)a.push(u[o]);t.push(a),u=e.exec(i)}return t}const ae=function(i){const e=mn.exec(i);return!(e===null||typeof e>"u")};function vn(i){return typeof i<"u"}const _n={allowBooleanAttributes:!1,unpairedTags:[]};function bn(i,e){e=Object.assign({},_n,e);const t=[];let u=!1,a=!1;i[0]==="\uFEFF"&&(i=i.substr(1));for(let r=0;r<i.length;r++)if(i[r]==="<"&&i[r+1]==="?"){if(r+=2,r=Fe(i,r),r.err)return r}else if(i[r]==="<"){let o=r;if(r++,i[r]==="!"){r=Be(i,r);continue}else{let n=!1;i[r]==="/"&&(n=!0,r++);let l="";for(;r<i.length&&i[r]!==">"&&i[r]!==" "&&i[r]!=="	"&&i[r]!==`
`&&i[r]!=="\r";r++)l+=i[r];if(l=l.trim(),l[l.length-1]==="/"&&(l=l.substring(0,l.length-1),r--),!Sn(l)){let g;return l.trim().length===0?g="Invalid space after '<'.":g="Tag '"+l+"' is an invalid name.",pt("InvalidTag",g,_t(i,r))}const f=kn(i,r);if(f===!1)return pt("InvalidAttr","Attributes for '"+l+"' have open quote.",_t(i,r));let b=f.value;if(r=f.index,b[b.length-1]==="/"){const g=r-b.length;b=b.substring(0,b.length-1);const y=Re(b,e);if(y===!0)u=!0;else return pt(y.err.code,y.err.msg,_t(i,g+y.err.line))}else if(n)if(f.tagClosed){if(b.trim().length>0)return pt("InvalidTag","Closing tag '"+l+"' can't have attributes or invalid starting.",_t(i,o));if(t.length===0)return pt("InvalidTag","Closing tag '"+l+"' has not been opened.",_t(i,o));{const g=t.pop();if(l!==g.tagName){let y=_t(i,g.tagStartPos);return pt("InvalidTag","Expected closing tag '"+g.tagName+"' (opened in line "+y.line+", col "+y.col+") instead of closing tag '"+l+"'.",_t(i,o))}t.length==0&&(a=!0)}}else return pt("InvalidTag","Closing tag '"+l+"' doesn't have proper closing.",_t(i,r));else{const g=Re(b,e);if(g!==!0)return pt(g.err.code,g.err.msg,_t(i,r-b.length+g.err.line));if(a===!0)return pt("InvalidXml","Multiple possible root nodes found.",_t(i,r));e.unpairedTags.indexOf(l)!==-1||t.push({tagName:l,tagStartPos:o}),u=!0}for(r++;r<i.length;r++)if(i[r]==="<")if(i[r+1]==="!"){r++,r=Be(i,r);continue}else if(i[r+1]==="?"){if(r=Fe(i,++r),r.err)return r}else break;else if(i[r]==="&"){const g=Tn(i,r);if(g==-1)return pt("InvalidChar","char '&' is not expected.",_t(i,r));r=g}else if(a===!0&&!Pe(i[r]))return pt("InvalidXml","Extra text at the end",_t(i,r));i[r]==="<"&&r--}}else{if(Pe(i[r]))continue;return pt("InvalidChar","char '"+i[r]+"' is not expected.",_t(i,r))}if(u){if(t.length==1)return pt("InvalidTag","Unclosed tag '"+t[0].tagName+"'.",_t(i,t[0].tagStartPos));if(t.length>0)return pt("InvalidXml","Invalid '"+JSON.stringify(t.map(r=>r.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return pt("InvalidXml","Start tag expected.",1);return!0}function Pe(i){return i===" "||i==="	"||i===`
`||i==="\r"}function Fe(i,e){const t=e;for(;e<i.length;e++)if(i[e]=="?"||i[e]==" "){const u=i.substr(t,e-t);if(e>5&&u==="xml")return pt("InvalidXml","XML declaration allowed only at the start of the document.",_t(i,e));if(i[e]=="?"&&i[e+1]==">"){e++;break}else continue}return e}function Be(i,e){if(i.length>e+5&&i[e+1]==="-"&&i[e+2]==="-"){for(e+=3;e<i.length;e++)if(i[e]==="-"&&i[e+1]==="-"&&i[e+2]===">"){e+=2;break}}else if(i.length>e+8&&i[e+1]==="D"&&i[e+2]==="O"&&i[e+3]==="C"&&i[e+4]==="T"&&i[e+5]==="Y"&&i[e+6]==="P"&&i[e+7]==="E"){let t=1;for(e+=8;e<i.length;e++)if(i[e]==="<")t++;else if(i[e]===">"&&(t--,t===0))break}else if(i.length>e+9&&i[e+1]==="["&&i[e+2]==="C"&&i[e+3]==="D"&&i[e+4]==="A"&&i[e+5]==="T"&&i[e+6]==="A"&&i[e+7]==="["){for(e+=8;e<i.length;e++)if(i[e]==="]"&&i[e+1]==="]"&&i[e+2]===">"){e+=2;break}}return e}const wn='"',yn="'";function kn(i,e){let t="",u="",a=!1;for(;e<i.length;e++){if(i[e]===wn||i[e]===yn)u===""?u=i[e]:u!==i[e]||(u="");else if(i[e]===">"&&u===""){a=!0;break}t+=i[e]}return u!==""?!1:{value:t,index:e,tagClosed:a}}const xn=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Re(i,e){const t=De(i,xn),u={};for(let a=0;a<t.length;a++){if(t[a][1].length===0)return pt("InvalidAttr","Attribute '"+t[a][2]+"' has no space in starting.",Dt(t[a]));if(t[a][3]!==void 0&&t[a][4]===void 0)return pt("InvalidAttr","Attribute '"+t[a][2]+"' is without value.",Dt(t[a]));if(t[a][3]===void 0&&!e.allowBooleanAttributes)return pt("InvalidAttr","boolean attribute '"+t[a][2]+"' is not allowed.",Dt(t[a]));const r=t[a][2];if(!Cn(r))return pt("InvalidAttr","Attribute '"+r+"' is an invalid name.",Dt(t[a]));if(!Object.prototype.hasOwnProperty.call(u,r))u[r]=1;else return pt("InvalidAttr","Attribute '"+r+"' is repeated.",Dt(t[a]))}return!0}function En(i,e){let t=/\d/;for(i[e]==="x"&&(e++,t=/[\da-fA-F]/);e<i.length;e++){if(i[e]===";")return e;if(!i[e].match(t))break}return-1}function Tn(i,e){if(e++,i[e]===";")return-1;if(i[e]==="#")return e++,En(i,e);let t=0;for(;e<i.length;e++,t++)if(!(i[e].match(/\w/)&&t<20)){if(i[e]===";")break;return-1}return e}function pt(i,e,t){return{err:{code:i,msg:e,line:t.line||t,col:t.col}}}function Cn(i){return ae(i)}function Sn(i){return ae(i)}function _t(i,e){const t=i.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function Dt(i){return i.startIndex+i[1].length}const An={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(i,e){return e},attributeValueProcessor:function(i,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(i,e,t){return i},captureMetaData:!1,maxNestedTags:100,strictReservedNames:!0};function Ge(i){return typeof i=="boolean"?{enabled:i,maxEntitySize:1e4,maxExpansionDepth:10,maxTotalExpansions:1e3,maxExpandedLength:1e5,allowedTags:null,tagFilter:null}:typeof i=="object"&&i!==null?{enabled:i.enabled!==!1,maxEntitySize:i.maxEntitySize??1e4,maxExpansionDepth:i.maxExpansionDepth??10,maxTotalExpansions:i.maxTotalExpansions??1e3,maxExpandedLength:i.maxExpandedLength??1e5,allowedTags:i.allowedTags??null,tagFilter:i.tagFilter??null}:Ge(!0)}const In=function(i){const e=Object.assign({},An,i);return e.processEntities=Ge(e.processEntities),e};let ie;typeof Symbol!="function"?ie="@@xmlMetadata":ie=Symbol("XML Node Metadata");class Ft{constructor(e){this.tagname=e,this.child=[],this[":@"]=Object.create(null)}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][ie]={startIndex:t})}static getMetaDataSymbol(){return ie}}class Nn{constructor(e){this.suppressValidationErr=!e,this.options=e}readDocType(e,t){const u=Object.create(null);if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let a=1,r=!1,o=!1,n="";for(;t<e.length;t++)if(e[t]==="<"&&!o){if(r&&Rt(e,"!ENTITY",t)){t+=7;let l,f;if([l,f,t]=this.readEntityExp(e,t+1,this.suppressValidationErr),f.indexOf("&")===-1){const b=l.replace(/[.\-+*:]/g,"\\.");u[l]={regx:RegExp(`&${b};`,"g"),val:f}}}else if(r&&Rt(e,"!ELEMENT",t)){t+=8;const{index:l}=this.readElementExp(e,t+1);t=l}else if(r&&Rt(e,"!ATTLIST",t))t+=8;else if(r&&Rt(e,"!NOTATION",t)){t+=9;const{index:l}=this.readNotationExp(e,t+1,this.suppressValidationErr);t=l}else if(Rt(e,"!--",t))o=!0;else throw new Error("Invalid DOCTYPE");a++,n=""}else if(e[t]===">"){if(o?e[t-1]==="-"&&e[t-2]==="-"&&(o=!1,a--):a--,a===0)break}else e[t]==="["?r=!0:n+=e[t];if(a!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:u,i:t}}readEntityExp(e,t){t=bt(e,t);let u="";for(;t<e.length&&!/\s/.test(e[t])&&e[t]!=='"'&&e[t]!=="'";)u+=e[t],t++;if(Gt(u),t=bt(e,t),!this.suppressValidationErr){if(e.substring(t,t+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[t]==="%")throw new Error("Parameter entities are not supported")}let a="";if([t,a]=this.readIdentifierVal(e,t,"entity"),this.options.enabled!==!1&&this.options.maxEntitySize&&a.length>this.options.maxEntitySize)throw new Error(`Entity "${u}" size (${a.length}) exceeds maximum allowed size (${this.options.maxEntitySize})`);return t--,[u,a,t]}readNotationExp(e,t){t=bt(e,t);let u="";for(;t<e.length&&!/\s/.test(e[t]);)u+=e[t],t++;!this.suppressValidationErr&&Gt(u),t=bt(e,t);const a=e.substring(t,t+6).toUpperCase();if(!this.suppressValidationErr&&a!=="SYSTEM"&&a!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${a}"`);t+=a.length,t=bt(e,t);let r=null,o=null;if(a==="PUBLIC")[t,r]=this.readIdentifierVal(e,t,"publicIdentifier"),t=bt(e,t),(e[t]==='"'||e[t]==="'")&&([t,o]=this.readIdentifierVal(e,t,"systemIdentifier"));else if(a==="SYSTEM"&&([t,o]=this.readIdentifierVal(e,t,"systemIdentifier"),!this.suppressValidationErr&&!o))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:u,publicIdentifier:r,systemIdentifier:o,index:--t}}readIdentifierVal(e,t,u){let a="";const r=e[t];if(r!=='"'&&r!=="'")throw new Error(`Expected quoted string, found "${r}"`);for(t++;t<e.length&&e[t]!==r;)a+=e[t],t++;if(e[t]!==r)throw new Error(`Unterminated ${u} value`);return t++,[t,a]}readElementExp(e,t){t=bt(e,t);let u="";for(;t<e.length&&!/\s/.test(e[t]);)u+=e[t],t++;if(!this.suppressValidationErr&&!ae(u))throw new Error(`Invalid element name: "${u}"`);t=bt(e,t);let a="";if(e[t]==="E"&&Rt(e,"MPTY",t))t+=4;else if(e[t]==="A"&&Rt(e,"NY",t))t+=2;else if(e[t]==="("){for(t++;t<e.length&&e[t]!==")";)a+=e[t],t++;if(e[t]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:u,contentModel:a.trim(),index:t}}readAttlistExp(e,t){t=bt(e,t);let u="";for(;t<e.length&&!/\s/.test(e[t]);)u+=e[t],t++;Gt(u),t=bt(e,t);let a="";for(;t<e.length&&!/\s/.test(e[t]);)a+=e[t],t++;if(!Gt(a))throw new Error(`Invalid attribute name: "${a}"`);t=bt(e,t);let r="";if(e.substring(t,t+8).toUpperCase()==="NOTATION"){if(r="NOTATION",t+=8,t=bt(e,t),e[t]!=="(")throw new Error(`Expected '(', found "${e[t]}"`);t++;let n=[];for(;t<e.length&&e[t]!==")";){let l="";for(;t<e.length&&e[t]!=="|"&&e[t]!==")";)l+=e[t],t++;if(l=l.trim(),!Gt(l))throw new Error(`Invalid notation name: "${l}"`);n.push(l),e[t]==="|"&&(t++,t=bt(e,t))}if(e[t]!==")")throw new Error("Unterminated list of notations");t++,r+=" ("+n.join("|")+")"}else{for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;const n=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!n.includes(r.toUpperCase()))throw new Error(`Invalid attribute type: "${r}"`)}t=bt(e,t);let o="";return e.substring(t,t+8).toUpperCase()==="#REQUIRED"?(o="#REQUIRED",t+=8):e.substring(t,t+7).toUpperCase()==="#IMPLIED"?(o="#IMPLIED",t+=7):[t,o]=this.readIdentifierVal(e,t,"ATTLIST"),{elementName:u,attributeName:a,attributeType:r,defaultValue:o,index:t}}}const bt=(i,e)=>{for(;e<i.length&&/\s/.test(i[e]);)e++;return e};function Rt(i,e,t){for(let u=0;u<e.length;u++)if(e[u]!==i[t+u+1])return!1;return!0}function Gt(i){if(ae(i))return i;throw new Error(`Invalid entity name ${i}`)}const zn=/^[-+]?0x[a-fA-F0-9]+$/,On=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Pn={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Fn(i,e={}){if(e=Object.assign({},Pn,e),!i||typeof i!="string")return i;let t=i.trim();if(e.skipLike!==void 0&&e.skipLike.test(t))return i;if(i==="0")return 0;if(e.hex&&zn.test(t))return Ln(t,16);if(t.includes("e")||t.includes("E"))return Rn(i,t,e);{const u=On.exec(t);if(u){const a=u[1]||"",r=u[2];let o=Mn(u[3]);const n=a?i[r.length+1]===".":i[r.length]===".";if(!e.leadingZeros&&(r.length>1||r.length===1&&!n))return i;{const l=Number(t),f=String(l);if(l===0)return l;if(f.search(/[eE]/)!==-1)return e.eNotation?l:i;if(t.indexOf(".")!==-1)return f==="0"||f===o||f===`${a}${o}`?l:i;let b=r?o:t;return r?b===f||a+b===f?l:i:b===f||b===a+f?l:i}}else return i}}const Bn=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function Rn(i,e,t){if(!t.eNotation)return i;const u=e.match(Bn);if(u){let a=u[1]||"";const r=u[3].indexOf("e")===-1?"E":"e",o=u[2],n=a?i[o.length+1]===r:i[o.length]===r;return o.length>1&&n?i:o.length===1&&(u[3].startsWith(`.${r}`)||u[3][0]===r)?Number(e):t.leadingZeros&&!n?(e=(u[1]||"")+u[3],Number(e)):i}else return i}function Mn(i){return i&&i.indexOf(".")!==-1&&(i=i.replace(/0+$/,""),i==="."?i="0":i[0]==="."?i="0"+i:i[i.length-1]==="."&&(i=i.substring(0,i.length-1))),i}function Ln(i,e){if(parseInt)return parseInt(i,e);if(Number.parseInt)return Number.parseInt(i,e);if(window&&window.parseInt)return window.parseInt(i,e);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}function jn(i){return typeof i=="function"?i:Array.isArray(i)?e=>{for(const t of i)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class Un{constructor(e){if(this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"Â¢"},pound:{regex:/&(pound|#163);/g,val:"Â£"},yen:{regex:/&(yen|#165);/g,val:"Â¥"},euro:{regex:/&(euro|#8364);/g,val:"â‚¬"},copyright:{regex:/&(copy|#169);/g,val:"Â©"},reg:{regex:/&(reg|#174);/g,val:"Â®"},inr:{regex:/&(inr|#8377);/g,val:"â‚¹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,u)=>Me(u,10,"&#")},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,u)=>Me(u,16,"&#x")}},this.addExternalEntities=Wn,this.parseXml=Yn,this.parseTextData=Zn,this.resolveNameSpace=Vn,this.buildAttributesMap=Xn,this.isItStopNode=$n,this.replaceEntitiesValue=Gn,this.readStopNodeData=Jn,this.saveTextToParentTag=Kn,this.addChild=Dn,this.ignoreAttributesFn=jn(this.options.ignoreAttributes),this.entityExpansionCount=0,this.currentExpandedLength=0,this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let t=0;t<this.options.stopNodes.length;t++){const u=this.options.stopNodes[t];typeof u=="string"&&(u.startsWith("*.")?this.stopNodesWildcard.add(u.substring(2)):this.stopNodesExact.add(u))}}}}function Wn(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const u=e[t],a=u.replace(/[.\-+*:]/g,"\\.");this.lastEntities[u]={regex:new RegExp("&"+a+";","g"),val:i[u]}}}function Zn(i,e,t,u,a,r,o){if(i!==void 0&&(this.options.trimValues&&!u&&(i=i.trim()),i.length>0)){o||(i=this.replaceEntitiesValue(i,e,t));const n=this.options.tagValueProcessor(e,i,t,a,r);return n==null?i:typeof n!=typeof i||n!==i?n:this.options.trimValues?ke(i,this.options.parseTagValue,this.options.numberParseOptions):i.trim()===i?ke(i,this.options.parseTagValue,this.options.numberParseOptions):i}}function Vn(i){if(this.options.removeNSPrefix){const e=i.split(":"),t=i.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(i=t+e[1])}return i}const Hn=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Xn(i,e,t){if(this.options.ignoreAttributes!==!0&&typeof i=="string"){const u=De(i,Hn),a=u.length,r={};for(let o=0;o<a;o++){const n=this.resolveNameSpace(u[o][1]);if(this.ignoreAttributesFn(n,e))continue;let l=u[o][4],f=this.options.attributeNamePrefix+n;if(n.length)if(this.options.transformAttributeName&&(f=this.options.transformAttributeName(f)),f==="__proto__"&&(f="#__proto__"),l!==void 0){this.options.trimValues&&(l=l.trim()),l=this.replaceEntitiesValue(l,t,e);const b=this.options.attributeValueProcessor(n,l,e);b==null?r[f]=l:typeof b!=typeof l||b!==l?r[f]=b:r[f]=ke(l,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(r[f]=!0)}if(!Object.keys(r).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=r,o}return r}}const Yn=function(i){i=i.replace(/\r\n?/g,`
`);const e=new Ft("!xml");let t=e,u="",a="";this.entityExpansionCount=0,this.currentExpandedLength=0;const r=new Nn(this.options.processEntities);for(let o=0;o<i.length;o++)if(i[o]==="<")if(i[o+1]==="/"){const l=Mt(i,">",o,"Closing Tag is not closed.");let f=i.substring(o+2,l).trim();if(this.options.removeNSPrefix){const y=f.indexOf(":");y!==-1&&(f=f.substr(y+1))}this.options.transformTagName&&(f=this.options.transformTagName(f)),t&&(u=this.saveTextToParentTag(u,t,a));const b=a.substring(a.lastIndexOf(".")+1);if(f&&this.options.unpairedTags.indexOf(f)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${f}>`);let g=0;b&&this.options.unpairedTags.indexOf(b)!==-1?(g=a.lastIndexOf(".",a.lastIndexOf(".")-1),this.tagsNodeStack.pop()):g=a.lastIndexOf("."),a=a.substring(0,g),t=this.tagsNodeStack.pop(),u="",o=l}else if(i[o+1]==="?"){let l=ye(i,o,!1,"?>");if(!l)throw new Error("Pi Tag is not closed.");if(u=this.saveTextToParentTag(u,t,a),!(this.options.ignoreDeclaration&&l.tagName==="?xml"||this.options.ignorePiTags)){const f=new Ft(l.tagName);f.add(this.options.textNodeName,""),l.tagName!==l.tagExp&&l.attrExpPresent&&(f[":@"]=this.buildAttributesMap(l.tagExp,a,l.tagName)),this.addChild(t,f,a,o)}o=l.closeIndex+1}else if(i.substr(o+1,3)==="!--"){const l=Mt(i,"-->",o+4,"Comment is not closed.");if(this.options.commentPropName){const f=i.substring(o+4,l-2);u=this.saveTextToParentTag(u,t,a),t.add(this.options.commentPropName,[{[this.options.textNodeName]:f}])}o=l}else if(i.substr(o+1,2)==="!D"){const l=r.readDocType(i,o);this.docTypeEntities=l.entities,o=l.i}else if(i.substr(o+1,2)==="!["){const l=Mt(i,"]]>",o,"CDATA is not closed.")-2,f=i.substring(o+9,l);u=this.saveTextToParentTag(u,t,a);let b=this.parseTextData(f,t.tagname,a,!0,!1,!0,!0);b==null&&(b=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:f}]):t.add(this.options.textNodeName,b),o=l+2}else{let l=ye(i,o,this.options.removeNSPrefix),f=l.tagName;const b=l.rawTagName;let g=l.tagExp,y=l.attrExpPresent,c=l.closeIndex;if(this.options.transformTagName){const m=this.options.transformTagName(f);g===f&&(g=m),f=m}if(this.options.strictReservedNames&&(f===this.options.commentPropName||f===this.options.cdataPropName))throw new Error(`Invalid tag name: ${f}`);t&&u&&t.tagname!=="!xml"&&(u=this.saveTextToParentTag(u,t,a,!1));const v=t;v&&this.options.unpairedTags.indexOf(v.tagname)!==-1&&(t=this.tagsNodeStack.pop(),a=a.substring(0,a.lastIndexOf("."))),f!==e.tagname&&(a+=a?"."+f:f);const h=o;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,a,f)){let m="";if(g.length>0&&g.lastIndexOf("/")===g.length-1)f[f.length-1]==="/"?(f=f.substr(0,f.length-1),a=a.substr(0,a.length-1),g=f):g=g.substr(0,g.length-1),o=l.closeIndex;else if(this.options.unpairedTags.indexOf(f)!==-1)o=l.closeIndex;else{const w=this.readStopNodeData(i,b,c+1);if(!w)throw new Error(`Unexpected end of ${b}`);o=w.i,m=w.tagContent}const p=new Ft(f);f!==g&&y&&(p[":@"]=this.buildAttributesMap(g,a,f)),m&&(m=this.parseTextData(m,f,a,!0,y,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),p.add(this.options.textNodeName,m),this.addChild(t,p,a,h)}else{if(g.length>0&&g.lastIndexOf("/")===g.length-1){if(f[f.length-1]==="/"?(f=f.substr(0,f.length-1),a=a.substr(0,a.length-1),g=f):g=g.substr(0,g.length-1),this.options.transformTagName){const p=this.options.transformTagName(f);g===f&&(g=p),f=p}const m=new Ft(f);f!==g&&y&&(m[":@"]=this.buildAttributesMap(g,a,f)),this.addChild(t,m,a,h),a=a.substr(0,a.lastIndexOf("."))}else if(this.options.unpairedTags.indexOf(f)!==-1){const m=new Ft(f);f!==g&&y&&(m[":@"]=this.buildAttributesMap(g,a)),this.addChild(t,m,a,h),a=a.substr(0,a.lastIndexOf(".")),o=l.closeIndex;continue}else{const m=new Ft(f);if(this.tagsNodeStack.length>this.options.maxNestedTags)throw new Error("Maximum nested tags exceeded");this.tagsNodeStack.push(t),f!==g&&y&&(m[":@"]=this.buildAttributesMap(g,a,f)),this.addChild(t,m,a,h),t=m}u="",o=c}}else u+=i[o];return e.child};function Dn(i,e,t,u){this.options.captureMetaData||(u=void 0);const a=this.options.updateTag(e.tagname,t,e[":@"]);a===!1||(typeof a=="string"&&(e.tagname=a),i.addChild(e,u))}const Gn=function(i,e,t){if(i.indexOf("&")===-1)return i;const u=this.options.processEntities;if(!u.enabled||u.allowedTags&&!u.allowedTags.includes(e)||u.tagFilter&&!u.tagFilter(e,t))return i;for(let a in this.docTypeEntities){const r=this.docTypeEntities[a],o=i.match(r.regx);if(o){if(this.entityExpansionCount+=o.length,u.maxTotalExpansions&&this.entityExpansionCount>u.maxTotalExpansions)throw new Error(`Entity expansion limit exceeded: ${this.entityExpansionCount} > ${u.maxTotalExpansions}`);const n=i.length;if(i=i.replace(r.regx,r.val),u.maxExpandedLength&&(this.currentExpandedLength+=i.length-n,this.currentExpandedLength>u.maxExpandedLength))throw new Error(`Total expanded content size exceeded: ${this.currentExpandedLength} > ${u.maxExpandedLength}`)}}if(i.indexOf("&")===-1)return i;for(let a in this.lastEntities){const r=this.lastEntities[a];i=i.replace(r.regex,r.val)}if(i.indexOf("&")===-1)return i;if(this.options.htmlEntities)for(let a in this.htmlEntities){const r=this.htmlEntities[a];i=i.replace(r.regex,r.val)}return i=i.replace(this.ampEntity.regex,this.ampEntity.val),i};function Kn(i,e,t,u){return i&&(u===void 0&&(u=e.child.length===0),i=this.parseTextData(i,e.tagname,t,!1,e[":@"]?Object.keys(e[":@"]).length!==0:!1,u),i!==void 0&&i!==""&&e.add(this.options.textNodeName,i),i=""),i}function $n(i,e,t,u){return!!(e&&e.has(u)||i&&i.has(t))}function qn(i,e,t=">"){let u,a="";for(let r=e;r<i.length;r++){let o=i[r];if(u)o===u&&(u="");else if(o==='"'||o==="'")u=o;else if(o===t[0])if(t[1]){if(i[r+1]===t[1])return{data:a,index:r}}else return{data:a,index:r};else o==="	"&&(o=" ");a+=o}}function Mt(i,e,t,u){const a=i.indexOf(e,t);if(a===-1)throw new Error(u);return a+e.length-1}function ye(i,e,t,u=">"){const a=qn(i,e+1,u);if(!a)return;let r=a.data;const o=a.index,n=r.search(/\s/);let l=r,f=!0;n!==-1&&(l=r.substring(0,n),r=r.substring(n+1).trimStart());const b=l;if(t){const g=l.indexOf(":");g!==-1&&(l=l.substr(g+1),f=l!==a.data.substr(g+1))}return{tagName:l,tagExp:r,closeIndex:o,attrExpPresent:f,rawTagName:b}}function Jn(i,e,t){const u=t;let a=1;for(;t<i.length;t++)if(i[t]==="<")if(i[t+1]==="/"){const r=Mt(i,">",t,`${e} is not closed`);if(i.substring(t+2,r).trim()===e&&(a--,a===0))return{tagContent:i.substring(u,t),i:r};t=r}else if(i[t+1]==="?")t=Mt(i,"?>",t+1,"StopNode is not closed.");else if(i.substr(t+1,3)==="!--")t=Mt(i,"-->",t+3,"StopNode is not closed.");else if(i.substr(t+1,2)==="![")t=Mt(i,"]]>",t,"StopNode is not closed.")-2;else{const r=ye(i,t,">");r&&((r&&r.tagName)===e&&r.tagExp[r.tagExp.length-1]!=="/"&&a++,t=r.closeIndex)}}function ke(i,e,t){if(e&&typeof i=="string"){const u=i.trim();return u==="true"?!0:u==="false"?!1:Fn(i,t)}else return vn(i)?i:""}function Me(i,e,t){const u=Number.parseInt(i,e);return u>=0&&u<=1114111?String.fromCodePoint(u):t+i+";"}const ce=Ft.getMetaDataSymbol();function Qn(i,e){return Ke(i,e)}function Ke(i,e,t){let u;const a={};for(let r=0;r<i.length;r++){const o=i[r],n=ts(o);let l="";if(t===void 0?l=n:l=t+"."+n,n===e.textNodeName)u===void 0?u=o[n]:u+=""+o[n];else{if(n===void 0)continue;if(o[n]){let f=Ke(o[n],e,l);const b=rs(f,e);o[":@"]?es(f,o[":@"],l,e):Object.keys(f).length===1&&f[e.textNodeName]!==void 0&&!e.alwaysCreateTextNode?f=f[e.textNodeName]:Object.keys(f).length===0&&(e.alwaysCreateTextNode?f[e.textNodeName]="":f=""),o[ce]!==void 0&&typeof f=="object"&&f!==null&&(f[ce]=o[ce]),a[n]!==void 0&&Object.prototype.hasOwnProperty.call(a,n)?(Array.isArray(a[n])||(a[n]=[a[n]]),a[n].push(f)):e.isArray(n,l,b)?a[n]=[f]:a[n]=f}}}return typeof u=="string"?u.length>0&&(a[e.textNodeName]=u):u!==void 0&&(a[e.textNodeName]=u),a}function ts(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const u=e[t];if(u!==":@")return u}}function es(i,e,t,u){if(e){const a=Object.keys(e),r=a.length;for(let o=0;o<r;o++){const n=a[o];u.isArray(n,t+"."+n,!0,!0)?i[n]=[e[n]]:i[n]=e[n]}}}function rs(i,e){const{textNodeName:t}=e,u=Object.keys(i).length;return!!(u===0||u===1&&(i[t]||typeof i[t]=="boolean"||i[t]===0))}class ns{constructor(e){this.externalEntities={},this.options=In(e)}parse(e,t){if(typeof e!="string"&&e.toString)e=e.toString();else if(typeof e!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const r=bn(e,t);if(r!==!0)throw Error(`${r.err.msg}:${r.err.line}:${r.err.col}`)}const u=new Un(this.options);u.addExternalEntities(this.externalEntities);const a=u.parseXml(e);return this.options.preserveOrder||a===void 0?a:Qn(a,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return Ft.getMetaDataSymbol()}}const ss={ignoreAttributes:!1,attributeNamePrefix:"@_",textNodeName:"#text",ignoreDeclaration:!0,ignorePiTags:!0,trimValues:!0,parseAttributeValue:!0,parseTagValue:!0,isArray:i=>["topic","topics","children","marker-ref","marker-refs","attachment","hyperlink","label","notes","plain-text","rich-content"].includes(i)},Le={"priority-1":"ðŸ”´","priority-2":"ðŸŸ ","priority-3":"ðŸŸ¡","priority-4":"ðŸŸ¢","priority-5":"ðŸ”µ","priority-6":"âšª","task-start":"â–¶","task-half":"â—","task-done":"â—¼","task-overtime":"â°","flag-red":"ðŸš©","flag-orange":"ðŸ³","flag-yellow":"ðŸ´","smile-laugh":"ðŸ˜‚","smile-think":"ðŸ¤”","smile-angry":"ðŸ˜ ","smile-cry":"ðŸ˜¢","smile-cool":"ðŸ˜Ž","symbol-ok":"âœ“","symbol-wrong":"âœ—","symbol-question":"?","symbol-wait":"âŒ›","symbol-idea":"ðŸ’¡","symbol-important":"â—","symbol-note":"ðŸ“","arrow-up":"â†‘","arrow-down":"â†“","arrow-left":"â†","arrow-right":"â†’","month-1":"ðŸ“…","month-2":"ðŸ“…","month-3":"ðŸ“…","month-4":"ðŸ“…","month-5":"ðŸ“…","month-6":"ðŸ“…","month-7":"ðŸ“…","month-8":"ðŸ“…","month-9":"ðŸ“…","month-10":"ðŸ“…","month-11":"ðŸ“…","month-12":"ðŸ“…","week-1":"ðŸ“†","week-2":"ðŸ“†","week-3":"ðŸ“†","week-4":"ðŸ“†"};class $e{parser;markerMap;constructor(e){this.parser=new ns(ss),this.markerMap={...Le,...e}}parseXML(e){try{const t=this.parser.parse(e);return t.sheet?t.sheet:t.sheets&&Array.isArray(t.sheets.sheet)?t.sheets.sheet[0]:t.map?t.map:t}catch(t){throw new Error(`Failed to parse XML: ${t instanceof Error?t.message:"Unknown error"}`)}}extractTopicTree(e,t){const u=e.topic;if(!u)throw new Error("No root topic found in XMind content");return this.parseTopic(u,0,void 0,t)}parseTopic(e,t,u,a){const r=e["@_id"]||this.generateId(),o=this.extractTitle(e),n=[];if(e.children?.topics&&(!a?.maxDepth||t<a.maxDepth)){const v=Array.isArray(e.children.topics)?e.children.topics:[e.children.topics];for(const h of v)this.isValidTopic(h)&&n.push(this.parseTopic(h,t+1,r,a))}const l=this.extractMarkers(e),f=this.extractLinks(e),b=this.extractNotes(e),g=this.extractLabels(e),y=this.extractAttachments(e),c=this.extractPosition(e);return{id:r,title:o,level:t,parentId:u,children:n.length>0?n:void 0,markers:l.length>0?l:void 0,links:f.length>0?f:void 0,notes:b,labels:g.length>0?g:void 0,attachments:y.length>0?y:void 0,position:c}}extractTitle(e){return e.title?e.title:e["#text"]?String(e["#text"]):"Untitled Topic"}extractMarkers(e){const t=[];if(e["marker-refs"]?.["marker-ref"]){const u=Array.isArray(e["marker-refs"]["marker-ref"])?e["marker-refs"]["marker-ref"]:[e["marker-refs"]["marker-ref"]];for(const a of u){const r=a["@_marker-id"];r&&this.markerMap[r]?t.push(this.markerMap[r]):r&&t.push(`[${r}]`)}}return t}extractLinks(e){const t=[];if(e["@_href"]){const u=e["@_href"];let a="url";u.startsWith("#")?a="topic":(u.startsWith("file://")||u.startsWith("./"))&&(a="file"),t.push({href:u,type:a})}return t}extractNotes(e){if(e.notes?.["plain-text"])return e.notes["plain-text"]}extractLabels(e){const t=[];if(e.labels?.label){const u=Array.isArray(e.labels.label)?e.labels.label:[e.labels.label];for(const a of u)typeof a=="string"&&t.push(a)}return t}extractAttachments(e){const t=[];if(e["xhtml:img"]){const u=Array.isArray(e["xhtml:img"])?e["xhtml:img"]:[e["xhtml:img"]];for(const a of u){const r=a["@_src"];r&&t.push({filename:r.split("/").pop()||"image",mimeType:this.getMimeTypeFromSrc(r),size:0,path:r,type:"image"})}}return t}extractPosition(e){if(e.position)return{x:parseInt(e.position["@_x"]||"0",10),y:parseInt(e.position["@_y"]||"0",10)}}getMimeTypeFromSrc(e){const t=e.split(".").pop()?.toLowerCase();return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",svg:"image/svg+xml",webp:"image/webp",bmp:"image/bmp"}[t||""]||"image/jpeg"}isValidTopic(e){return Array.isArray(e)?e.length>0:!0}generateId(){return`topic-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}setMarkerMap(e){this.markerMap={...Le,...e}}getMarkerMap(){return{...this.markerMap}}}function is(i,e,t){const u=new $e(t),a=u.parseXML(i);return u.extractTopicTree(a,e)}class as{calculateStats(e,t){const u={totalTopics:0,maxDepth:0,rootTopics:1,markersProcessed:0,attachmentsProcessed:0,linksProcessed:0,imagesProcessed:0,levelDistribution:new Map,wordCount:0,charCount:0,topicsWithNotes:0,topicsWithMarkers:0,topicsWithLinks:0,topicsWithAttachments:0};this.traverseTopic(e,u);const a=performance.now(),r=t?a-t:0;return{totalTopics:u.totalTopics,maxDepthReached:u.maxDepth,rootTopics:u.rootTopics,processingTime:r,markersProcessed:u.markersProcessed,attachmentsProcessed:u.attachmentsProcessed,linksProcessed:u.linksProcessed,imagesProcessed:u.imagesProcessed}}traverseTopic(e,t){t.totalTopics++,e.level>t.maxDepth&&(t.maxDepth=e.level);const u=t.levelDistribution.get(e.level)||0;if(t.levelDistribution.set(e.level,u+1),e.title&&(t.wordCount+=this.countWords(e.title),t.charCount+=e.title.length),e.notes&&(t.topicsWithNotes++,t.wordCount+=this.countWords(e.notes),t.charCount+=e.notes.length),e.markers&&e.markers.length>0&&(t.topicsWithMarkers++,t.markersProcessed+=e.markers.length),e.links&&e.links.length>0&&(t.topicsWithLinks++,t.linksProcessed+=e.links.length),e.attachments&&e.attachments.length>0){t.topicsWithAttachments++,t.attachmentsProcessed+=e.attachments.length;const a=e.attachments.filter(r=>r.type==="image");t.imagesProcessed+=a.length}if(e.children&&e.children.length>0)for(const a of e.children)this.traverseTopic(a,t)}countWords(e){const t=e.trim().replace(/\s+/g," ");if(!t)return 0;const u=(t.match(/[\u4e00-\u9fa5\u3400-\u4dbf\u3040-\u309f\u30a0-\u30ff]/g)||[]).length,r=t.replace(/[\u4e00-\u9fa5\u3400-\u4dbf\u3040-\u309f\u30a0-\u30ff]/g," ").split(/\s+/).filter(o=>o.length>0).length;return u+r}calculateLevelDistribution(e){const t=new Map;return this.traverseForLevelDistribution(e,t),Object.fromEntries(t)}traverseForLevelDistribution(e,t){const u=t.get(e.level)||0;if(t.set(e.level,u+1),e.children&&e.children.length>0)for(const a of e.children)this.traverseForLevelDistribution(a,t)}calculateDetailedStats(e,t){const u={totalTopics:0,maxDepth:0,rootTopics:1,markersProcessed:0,attachmentsProcessed:0,linksProcessed:0,imagesProcessed:0,levelDistribution:new Map,wordCount:0,charCount:0,topicsWithNotes:0,topicsWithMarkers:0,topicsWithLinks:0,topicsWithAttachments:0};this.traverseTopic(e,u);const a=performance.now(),r=t?a-t:0;return{totalTopics:u.totalTopics,maxDepthReached:u.maxDepth,rootTopics:u.rootTopics,processingTime:r,markersProcessed:u.markersProcessed,attachmentsProcessed:u.attachmentsProcessed,linksProcessed:u.linksProcessed,imagesProcessed:u.imagesProcessed,wordCount:u.wordCount,charCount:u.charCount,levelDistribution:Object.fromEntries(u.levelDistribution),topicsWithNotes:u.topicsWithNotes,topicsWithMarkers:u.topicsWithMarkers,topicsWithLinks:u.topicsWithLinks,topicsWithAttachments:u.topicsWithAttachments}}calculateMultipleStats(e){const t={totalTopics:0,maxDepth:0,rootTopics:e.length,markersProcessed:0,attachmentsProcessed:0,linksProcessed:0,imagesProcessed:0,levelDistribution:new Map,wordCount:0,charCount:0,topicsWithNotes:0,topicsWithMarkers:0,topicsWithLinks:0,topicsWithAttachments:0};for(const u of e)this.traverseTopic(u,t);return{totalTopics:t.totalTopics,maxDepthReached:t.maxDepth,rootTopics:t.rootTopics,processingTime:0,markersProcessed:t.markersProcessed,attachmentsProcessed:t.attachmentsProcessed,linksProcessed:t.linksProcessed,imagesProcessed:t.imagesProcessed}}formatStatsSummary(e){return["# Conversion Statistics","",`Total Topics: ${e.totalTopics}`,`Max Depth: ${e.maxDepthReached}`,`Root Topics: ${e.rootTopics}`,"","Content Counts:",`- Markers: ${e.markersProcessed}`,`- Attachments: ${e.attachmentsProcessed}`,`- Links: ${e.linksProcessed}`,`- Images: ${e.imagesProcessed}`,"",`Processing Time: ${e.processingTime.toFixed(2)}ms`].join(`
`)}}const os={outputFormat:"markdown",includeMetadata:!1,includeIds:!1,includeTimestamps:!1,skipEmpty:!0,preserveFormatting:!1};class ls{options;parser;statsCalculator;constructor(e){this.options={...os,...e},this.parser=new $e,this.statsCalculator=new as}async convert(e,t){const u=performance.now();try{const a=await this.extractXmindContent(e),r=this.parser.extractTopicTree(this.parser.parseXML(a),this.options),o=this.topicTreeToMarkdown(r),n=this.statsCalculator.calculateDetailedStats(r,u),l=this.buildMetadata(t,n);return{content:o,stats:n,metadata:l,success:!0}}catch(a){return{content:"",stats:{totalTopics:0,maxDepthReached:0,rootTopics:0,processingTime:performance.now()-u,markersProcessed:0,attachmentsProcessed:0,linksProcessed:0,imagesProcessed:0},metadata:{sourceFile:t||"unknown",sourceFormat:"xmind",timestamp:new Date,version:"1.0.0"},success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}}async extractXmindContent(e){let t;e instanceof File?t=await e.arrayBuffer():t=e;const u=await cn.loadAsync(t),a=["content.xml","src/content.xml","META-INF/content.xml"];for(const r of a){const o=u.file(r);if(o)return await o.async("string")}throw new Error("Could not find content.xml in XMind file")}topicTreeToMarkdown(e){const t=[];if(t.push(`# ${this.sanitizeTitle(e.title)}`),t.push(""),this.options.includeMetadata&&(t.push("<!--"),t.push(`Generated: ${new Date().toISOString()}`),t.push(`Topics: ${this.countTopics(e)}`),t.push(`Max Depth: ${this.getMaxDepth(e)}`),t.push("-->"),t.push("")),e.children&&e.children.length>0)for(const u of e.children)this.convertTopic(u,t,2);return t.join(`
`)}convertTopic(e,t,u){const a="#".repeat(Math.min(u,6)),r=this.sanitizeTitle(e.title);let o=`${a} ${r}`;if(e.markers&&e.markers.length>0){const n=e.markers.join(" ");o+=` ${n}`}if(this.options.includeIds&&e.id&&(o+=` {: id="${e.id}"}`),t.push(o),e.notes&&(t.push(""),t.push("> "+this.notesToBlockquote(e.notes)),t.push("")),e.labels&&e.labels.length>0){const n=e.labels.map(l=>`\`${l}\``).join(" ");t.push(`**Tags:** ${n}`),t.push("")}if(e.links&&e.links.length>0){for(const n of e.links)if(n.type==="url"||n.type==="file"){const l=n.title||n.href;t.push(`ðŸ”— [${l}](${n.href})`)}e.links.length>0&&t.push("")}if(e.attachments&&e.attachments.length>0){for(const n of e.attachments)n.type==="image"?t.push(`![${n.filename}](${n.path})`):t.push(`ðŸ“Ž [${n.filename}](${n.path})`);e.attachments.length>0&&t.push("")}if(this.options.includeTimestamps&&(e.createdAt||e.modifiedAt)){const n=[];e.createdAt&&n.push(`Created: ${e.createdAt.toISOString()}`),e.modifiedAt&&n.push(`Modified: ${e.modifiedAt.toISOString()}`),t.push(`*${n.join(" | ")}*`),t.push("")}if(e.children&&e.children.length>0)for(const n of e.children)this.convertTopic(n,t,u+1)}sanitizeTitle(e){let t=e.trim().replace(/\s+/g," ");return t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;"),t}notesToBlockquote(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0).join(`
> `)}countTopics(e){let t=1;if(e.children)for(const u of e.children)t+=this.countTopics(u);return t}getMaxDepth(e){if(!e.children||e.children.length===0)return e.level;const t=e.children.map(u=>this.getMaxDepth(u));return Math.max(...t)}buildMetadata(e,t){return{sourceFile:e||"unknown.xmind",sourceFormat:"xmind",timestamp:new Date,version:"1.0.0"}}setOptions(e){this.options={...this.options,...e}}getOptions(){return{...this.options}}async convertBatch(e){const t=[];for(const u of e){const a=u instanceof File?u.name:void 0,r=await this.convert(u,a);t.push(r)}return t}parseXML(e){return is(e,this.options)}convertTopicTree(e){return this.topicTreeToMarkdown(e)}}async function us(i,e){const t=new ls(e),u=i instanceof File?i.name:void 0;return t.convert(i,u)}var ds=mt('<h2 class="text-2xl font-semibold mb-4 flex items-center gap-2 text-slate-900 dark:text-slate-100"><svg class="w-6 h-6 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg> Upload XMind File</h2> <!>',1),fs=mt('<div class="flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400"><div class="animate-spin rounded-full h-4 w-4 border-b-2 border-primary-500"></div> Converting...</div>'),hs=mt('<div class="mt-4"><!></div>'),cs=mt('<div class="flex items-center justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 bg-primary-100 dark:bg-primary-900/30 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-primary-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div> <div><p class="font-medium text-slate-900 dark:text-slate-100"> </p> <p class="text-sm text-slate-500 dark:text-slate-400"> </p></div></div> <div class="flex items-center gap-2"><!> <button class="p-2 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors text-slate-500 dark:text-slate-400" aria-label="Clear file"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div></div> <!>',1),ps=mt('<div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl"><div class="flex items-start gap-3"><svg class="w-5 h-5 text-red-500 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div><p class="font-medium text-red-800 dark:text-red-200">Conversion Error</p> <p class="text-sm text-red-600 dark:text-red-400 mt-1"> </p></div></div></div>'),gs=mt('<div class="space-y-6"><section><!></section> <!> <!></div>');function ks(i,e){Wt(e,!0);let t=Nt(null),u=Nt(!1),a=Nt(0),r=Nt(null),o=xt(()=>tt(r)?sr(tt(r).content):""),n=Nt(null);async function l(z){if(z.length===0)return;const S=z[0];if(!S.name.endsWith(".xmind")){lt(n,"Please select a valid XMind file (.xmind)");return}lt(t,S,!0),lt(n,null),await f(S)}async function f(z){lt(u,!0),lt(a,0),lt(r,null),e.onConversionStart?.();try{lt(a,10);const S=await z.arrayBuffer();lt(a,30);const F=await us(S,z.name,{outputFormat:"markdown",includeMetadata:!0,includeIds:!1,includeTimestamps:!1,skipEmpty:!0,preserveFormatting:!0});lt(a,90),await new Promise(I=>setTimeout(I,200)),lt(a,100),lt(r,F,!0),e.onConversionComplete?.(F)}catch(S){const F=S instanceof Error?S.message:"Failed to convert file";lt(n,F,!0),e.onError?.(F)}finally{lt(u,!1)}}function b(){if(tt(r)&&tt(t)){const z=`${rr(tt(t).name)}.md`;nr(tt(r).content,z,"text/markdown")}}async function g(){tt(r)&&(await er(tt(r).content)||lt(n,"Failed to copy to clipboard"))}function y(){lt(t,null),lt(r,null),lt(n,null),lt(a,0)}var c=gs(),v=nt(c),h=nt(v);{var m=z=>{we(z,{children:(S,F)=>{var I=ds(),U=dt(Ut(I),2);Hr(U,{onFileSelect:l}),ut(S,I)},$$slots:{default:!0}})},p=z=>{we(z,{children:(S,F)=>{var I=cs(),U=Ut(I),K=nt(U),x=dt(nt(K),2),R=nt(x),d=nt(R,!0);rt(R);var M=dt(R,2),Q=nt(M);rt(M),rt(x),rt(K);var W=dt(K,2),et=nt(W);{var V=$=>{var D=fs();ut($,D)};wt(et,$=>{tt(u)&&$(V)})}var J=dt(et,2);rt(W),rt(U);var P=dt(U,2);{var O=$=>{var D=hs(),Y=nt(D);un(Y,{get progress(){return tt(a)},label:"Converting..."}),rt(D),ut($,D)};wt(P,$=>{tt(u)&&$(O)})}At($=>{St(d,tt(t).name),St(Q,`${$??""} KB`)},[()=>(tt(t).size/1024).toFixed(2)]),ve("click",J,y),ut(S,I)},$$slots:{default:!0}})};wt(h,z=>{tt(t)?z(p,!1):z(m)})}rt(v);var w=dt(v,2);{var E=z=>{var S=ps(),F=nt(S),I=dt(nt(F),2),U=dt(nt(I),2),K=nt(U,!0);rt(U),rt(I),rt(F),rt(S),At(()=>St(K,tt(n))),ut(z,S)};wt(w,z=>{tt(n)&&z(E)})}var C=dt(w,2);{var T=z=>{nn(z,{get content(){return tt(o)},get stats(){return tt(r).stats},get sourceFile(){return tt(r).metadata.sourceFile},get isLoading(){return tt(u)},onExport:b,onCopy:g})};wt(C,z=>{tt(r)&&z(T)})}rt(c),ut(i,c),Zt()}Ve(["click"]);export{ks as default};
